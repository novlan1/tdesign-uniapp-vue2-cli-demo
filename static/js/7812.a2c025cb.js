(self["webpackChunktdesign_uniapp_vue2_cli"]=self["webpackChunktdesign_uniapp_vue2_cli"]||[]).push([[7812],{9902:function(t,e,a){var i=a(53113);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var l=a(31997).A;l("02b228b4",i,!0,{sourceMap:!1,shadowMode:!1})},27812:function(t,e,a){"use strict";a.d(e,{A:function(){return P}});var i={tLoading:a(66552).A,tIcon:a(14867).A},l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{class:[t.classPrefix,t.inChat?t.classPrefix+"--chatting":"",t.getFileTypeClass(t.inChat,t.files)],style:t._._style([t.customStyle])},[a("v-uni-view",{class:t.classPrefix+"__left"},[a("v-uni-view",{class:t.classPrefix+"__scrollable scroll-x"},[t._l(t.files,function(e,i){return[a("v-uni-view",{key:i+"_0",class:t.classPrefix+"__files",attrs:{"data-index":i},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.onFileWrapTap.apply(void 0,arguments)}}},["image"===e.fileType?[a("v-uni-view",{class:"file-image "+t.classPrefix+"__file "+(t.removable?t.classPrefix+"__file--removable":"")},["pending"===e.status||"fail"===e.status||"error"===e.status?[a("v-uni-view",{class:e.status+" "+t.classPrefix+"__file--"+e.status},[a("t-loading",{attrs:{theme:"circular",size:"48rpx"}})],1)]:[a("v-uni-image",{staticClass:"image",style:t.inChat?t.imageStyle(e):"",attrs:{src:e.url,mode:t.getImageMode(e),"lazy-load":!1}})],t.removable?a("v-uni-view",{class:t.classPrefix+"__remove",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.onRemoveTap(e,{index:i})}}},[a("t-icon",{attrs:{"data-index":i,name:"multiply",size:"16px"}})],1):t._e()],2)]:[a("v-uni-view",{class:"file "+t.classPrefix+"__file "+(t.removable?t.classPrefix+"__file--removable":"")},[a("v-uni-view",{staticClass:"image"},["pending"===e.status?[a("v-uni-view",{class:"loading "+t.classPrefix+"__file--pending"},[a("t-loading",{attrs:{theme:"circular",size:"48rpx"}})],1)]:"fail"===e.status?[a("v-uni-view",{class:"fail "+t.classPrefix+"__file--fail"},[a("t-loading",{attrs:{theme:"circular",size:"48rpx"}})],1)]:"error"===e.status?[a("v-uni-view",{class:"error "+t.classPrefix+"__file--error"},[a("t-loading",{attrs:{theme:"circular",size:"48rpx"}})],1)]:[a("t-icon",{attrs:{name:e.fileIcon.name,color:e.fileIcon.color,size:"48rpx"}})]],2),a("v-uni-view",{class:t.classPrefix+"__content"},[a("v-uni-view",{class:t.classPrefix+"__title"},[t._v(" "+t._s(e.name)+" ")]),"pending"===e.status?a("v-uni-view",{class:t.classPrefix+"__desc"},[t._v(" 上传中..."+t._s(e.progress||"0%")+" ")]):"fail"===e.status?a("v-uni-view",{class:t.classPrefix+"__desc"},[t._v(" 上传失败 ")]):"error"===e.status?a("v-uni-view",{class:t.classPrefix+"__desc"},[t._v(" "+t._s(e.errorMessage)+" ")]):a("v-uni-view",{class:t.classPrefix+"__desc"},[t._v(" "+t._s(e.desc)+" ")])],1),t.removable?a("v-uni-view",{class:t.classPrefix+"__remove",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.onRemoveTap(e,{index:i})}}},[a("t-icon",{attrs:{"data-index":i,name:"multiply",size:"16px"}})],1):t._e()],1)]],2)]})],2)],1)],1)},n=[],s=a(70012),r=(a(73645),a(26128),a(20924),a(88803),a(17932),a(96466),a(77332),a(14867)),o=a(49188),d=a(66552),c=a(46056),f={addable:{type:Boolean,default:!0},imageViewer:{type:Boolean,default:!0},items:{type:Array,default:function(){return[]},required:!0},removable:{type:Boolean,default:!0},onAdd:{type:Function,default:function(){return{}}},onFileClick:{type:Function,default:function(){return{}}},onRemove:{type:Function,default:function(){return{}}}},h=a(10263),u=a(88070);function m(t){return t&&t.width&&t.height?h.A._style({width:h.A.addUnit(t.width),height:h.A.addUnit(t.height)}):h.A._style({width:"400rpx",height:"400rpx"})}function g(t){return t&&t.width&&t.height?t.width>t.height?"widthFix":"heightFix":t&&t.mode?t.mode:"scaleToFill"}function v(t,e){if(!t)return"";if(!e||0===e.length)return"";for(var a=!0,i=0;i<e.length;i++)if("image"!==e[i].fileType){a=!1;break}return a?"all_images":"all_files"}var p,_="".concat(c.Pl,"-attachments"),x=(0,u.o1)({name:_,options:{multipleSlots:!0,styleIsolation:"shared"},components:{tIcon:r.A,tImage:o.A,tLoading:d.A},props:(0,s.A)((0,s.A)({},f),{},{inChat:{type:Boolean,default:!1}}),emits:["fileClick","remove"],data:function(){return{classPrefix:_,_:h.A,files:[]}},watch:{items:{handler:function(){this.setFiles()},immediate:!0,deep:!0}},created:function(){},mounted:function(){this.setFiles()},methods:{imageStyle:m,getFileTypeClass:v,getImageMode:g,onFileWrapTap:function(t){var e,a=t.currentTarget.dataset||{},i=a.index,l=null===(e=this.files)||void 0===e?void 0:e[i];l&&this.handleFileClick(l)},onRemoveTap:function(t,e){var a,i=e.index,l=null===(a=this.files)||void 0===a?void 0:a[i];void 0!==l&&this.handleRemove(l,i)},handleFileClick:function(t){this.imageViewer&&"image"===t.fileType&&wx.previewImage({urls:[t.url]}),this.$emit("fileClick",{item:t})},handleRemove:function(t,e){this.$emit("remove",{item:t,index:e})},renderDesc:function(t){var e,a,i=t.size||0;if(i<1024)e=i,a="B";else if(i<1048576){var l=i/1024;e=l%1===0?l:l.toFixed(2),a="KB"}else{var n=i/1048576;e=n%1===0?n:n.toFixed(2),a="MB"}return"".concat(e," ").concat(a)},renderIcon:function(t){var e={file:{name:"file-zip-filled",color:"#E37318"},video:{name:"video-filled",color:"#D54941"},pdf:{name:"file-pdf-filled",color:"#D54941"},doc:{name:"file-word-filled",color:"#0052d9"},excel:{name:"file-excel-filled",color:"#2BA471"},ppt:{name:"file-powerpoint-filled",color:"#E37318"},audio:{name:"video-filled",color:"#D54941"}};return e[t.fileType]||e.file},renderFileType:function(t){var e=["image","video","audio","pdf","doc","ppt","txt","excel"];if(t.fileType)return t.fileType;if(e.includes(t.type))return t.fileType;var a=t.url||"",i=a.lastIndexOf("."),l=-1!==i?a.substring(i+1).toLowerCase():"",n={jpg:"image",jpeg:"image",png:"image",gif:"image",bmp:"image",webp:"image",mp4:"video",mov:"video",avi:"video",mkv:"video",webm:"video",mp3:"audio",wav:"audio",ogg:"audio",aac:"audio",pdf:"pdf",doc:"doc",docx:"doc",ppt:"ppt",pptx:"ppt",xls:"excel",xlsx:"excel",txt:"txt"};return n[l]||""},renderExtension:function(t){if(t.extension)return t.extension;var e=t.extension||(t.url?t.url.split(".").pop().toLowerCase():"");return e},setFiles:function(){var t=this;this.files=this.items.map(function(e){return(0,s.A)((0,s.A)({},e),{},{fileType:t.renderFileType(e),desc:t.renderDesc(e),fileIcon:t.renderIcon(e)})})}}}),b=x,y=(a(9902),a(1391)),w=(0,y.A)(b,l,n,!1,null,"9b0917fa",null,!1,i,p),P=w.exports},30312:function(t,e,a){var i=a(57997);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var l=a(31997).A;l("ae1a8722",i,!0,{sourceMap:!1,shadowMode:!1})},49188:function(t,e,a){"use strict";a.d(e,{A:function(){return y}});var i,l={tLoading:a(66552).A,tIcon:a(14867).A},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{class:[t.tClass,t.classPrefix],style:t.tools._style([t.customStyle])},[t.isLoading?a("v-uni-view",{class:t.classPrefix+"__mask "+t.classPrefix+"--loading "+t.classPrefix+"--shape-"+t.shape,style:t.tools._style([t.innerStyle]),attrs:{"aria-hidden":t.ariaHidden}},["default"===t.loading?a("t-loading",{attrs:{theme:"dots",size:"44rpx",loading:!0,"inherit-color":!0,"t-class":t.tClassLoad,"t-class-text":t.classPrefix+"--loading-text"}}):""!==t.loading&&"slot"!==t.loading?a("v-uni-view",{class:t.classPrefix+"__common "+t.tClassLoad},[t._v(" "+t._s(t.loading)+" ")]):t._t("loading")],2):t.isFailed?a("v-uni-view",{class:[t.classPrefix+"__mask "+t.classPrefix+"--failed "+t.classPrefix+"--shape-"+t.shape,t.tClassError],style:t.tools._style([t.innerStyle]),attrs:{"aria-hidden":t.ariaHidden}},["default"===t.error?a("v-uni-view",{class:t.tClassLoad,staticStyle:{"font-size":"44rpx"}},[a("t-icon",{attrs:{name:"close","aria-role":"img","aria-label":"加载失败"}})],1):t.error&&"slot"!==t.error?a("v-uni-view",{class:[t.classPrefix+"__common ",t.tClassLoad]},[t._v(" "+t._s(t.error)+" ")]):t._t("error")],2):t._e(),t.isFailed?t._e():a("v-uni-image",{class:[t.classPrefix+"__img "+t.classPrefix+"--shape-"+t.shape+" ",(t.isLoading?t.classPrefix+"--lazy":"")+" ",t.tClassImage],style:t.tools._style([t.innerStyle]),attrs:{id:t.tId||"image",src:t.src,mode:t.mode,webp:t.webp,"lazy-load":t.lazy,"show-menu-by-longpress":t.showMenuByLongpress,"aria-hidden":t.ariaHidden||t.isLoading||t.isFailed,"aria-label":t.ariaLabel},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClick.apply(void 0,arguments)},load:function(e){arguments[0]=e=t.$handleEvent(e),t.onLoaded.apply(void 0,arguments)},error:function(e){arguments[0]=e=t.$handleEvent(e),t.onLoadError.apply(void 0,arguments)}}})],1)},s=[],r=a(70012),o=a(66552),d=a(14867),c=a(88070),f=(a(26128),a(27439),{error:{type:String,default:"default"},height:{type:[String,Number]},lazy:Boolean,loading:{type:String,default:"default"},mode:{type:String,default:"scaleToFill",validator:function(t){return!t||["scaleToFill","aspectFit","aspectFill","widthFix","heightFix","top","bottom","center","left","right","top left","top right","bottom left","bottom right"].includes(t)}},shape:{type:String,default:"square",validator:function(t){return!t||["circle","round","square"].includes(t)}},showMenuByLongpress:Boolean,src:{type:String,default:""},tId:{type:String,default:""},webp:Boolean,width:{type:[String,Number]},onError:{type:Function,default:function(){return{}}},onLoad:{type:Function,default:function(){return{}}}}),h=a(46056),u=a(11005),m=a(23560),g=a(10263),v="".concat(h.Pl,"-image"),p=(0,c.o1)({name:v,options:{styleIsolation:"shared"},externalClasses:["".concat(h.Pl,"-class"),"".concat(h.Pl,"-class-load"),"".concat(h.Pl,"-class-image"),"".concat(h.Pl,"-class-error")],components:{TLoading:o.A,TIcon:d.A},props:(0,r.A)({},f),emits:["click"],data:function(){return{prefix:h.Pl,isLoading:!0,isFailed:!1,innerStyle:"",classPrefix:v,tools:g.A,preSrc:""}},watch:{src:function(){this.preSrc!==this.src&&this.update()},width:"calcSize",height:"calcSize"},mounted:function(){this.calcSize(this.width,this.height)},methods:{onLoaded:function(t){var e=u.TX.SDKVersion;this.mode,this.tId,(0,m.Gm)(e,"2.10.3");this.isLoading=!1,this.isFailed=!1,this.$emit("load",{e:t})},onLoadError:function(t){this.isLoading=!1,this.isFailed=!0,this.$emit("error",{e:t})},calcSize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.width,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.height,a="";t&&(a+="width: ".concat((0,u._V)(t),";")),e&&(a+="height: ".concat((0,u._V)(e),";")),this.innerStyle=a},update:function(){var t=this.src;this.preSrc=t,t?(this.isLoading=!0,this.isFailed=!1):this.onLoadError({errMsg:"图片链接为空"})},onClick:function(t){this.$emit("click",t)}}}),_=p,x=(a(30312),a(1391)),b=(0,x.A)(_,n,s,!1,null,"76af9ffe",null,!1,l,i),y=b.exports},53113:function(t,e,a){"use strict";a.r(e);var i=a(22093),l=a.n(i),n=a(12670),s=a.n(n),r=s()(l());r.push([t.id,".t-attachments[data-v-9b0917fa]{display:flex;width:100%;height:auto}.t-attachments__scrollable[data-v-9b0917fa]{height:100%;display:flex;align-items:center;justify-content:flex-start}.t-attachments .scroll-x[data-v-9b0917fa]{white-space:nowrap;overflow-x:auto;overflow-y:hidden;scrollbar-width:none;\n  /* Firefox */-ms-overflow-style:none\n  /* IE and Edge */}.t-attachments .scroll-x[data-v-9b0917fa]::-webkit-scrollbar{display:none\n  /* Chrome, Safari, Opera */}.t-attachments .wrap[data-v-9b0917fa]{flex-wrap:wrap;overflow-x:hidden}.t-attachments__left[data-v-9b0917fa]{flex:1;overflow:hidden}.t-attachments__file--pending[data-v-9b0917fa],\n.t-attachments__file--fail[data-v-9b0917fa],\n.t-attachments__file--error[data-v-9b0917fa],\n.t-attachments__file--success[data-v-9b0917fa]{position:absolute;width:100%;height:100%;top:0;left:0;border-radius:var(--td-radius-extraLarge,12px);display:flex;flex-direction:column;align-items:center;justify-content:center}.t-attachments__files[data-v-9b0917fa]{box-sizing:border-box;margin-left:%?16?%}.t-attachments__files[data-v-9b0917fa]:first-of-type{margin-left:0}.t-attachments__file[data-v-9b0917fa]{border-radius:var(--td-radius-extraLarge,12px);display:block;position:relative;background-color:var(--td-bg-color-secondarycontainer,var(--td-gray-color-1,#f3f3f3))}.t-attachments__file--removable[data-v-9b0917fa]{margin-top:%?8?%}.t-attachments__file .t-attachments__remove[data-v-9b0917fa]{background-color:var(--td-text-color-primary,var(--td-font-gray-1,rgba(0,0,0,.9)));color:var(--td-bg-color-container,var(--td-font-white-1,#fff));border-radius:var(--td-radius-circle,50%);position:absolute;right:-4px;top:-4px}.t-attachments__file.file-image[data-v-9b0917fa]{width:%?104?%;height:%?104?%}.t-attachments__file.file-image .image[data-v-9b0917fa]{width:100%;height:100%;border-radius:var(--td-radius-extraLarge,12px)}.t-attachments__file.file[data-v-9b0917fa]{width:%?256?%;height:%?104?%;display:flex;align-items:stretch;justify-content:flex-start;padding:0 %?24?%}.t-attachments__file.file .image[data-v-9b0917fa]{width:%?64?%;height:auto;box-sizing:border-box;overflow:hidden;position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center}.t-attachments__file.file .image uni-image[data-v-9b0917fa]{width:100%;height:100%}.t-attachments__file.file .t-attachments__content[data-v-9b0917fa]{flex:1;overflow:hidden;display:flex;flex-direction:column;align-items:flex-start;justify-content:center;margin-left:%?16?%}.t-attachments__file.file .t-attachments__content .t-attachments__title[data-v-9b0917fa]{width:100%;color:var(--td-text-color-primary,var(--td-font-gray-1,rgba(0,0,0,.9)));font-size:%?28?%;font-style:normal;font-weight:400;line-height:%?44?%;\n  /* 核心：单行溢出隐藏 + 显示省略号（兼容全浏览器） */white-space:nowrap;\n  /* 强制文字在一行显示，不换行 */overflow:hidden;\n  /* 超出容器部分隐藏 */text-overflow:ellipsis;\n  /* 超出部分显示“...” */\n  /* 移除冗余属性：原 -webkit-box 相关属性与 nowrap 冲突，且单行场景无需 */margin-bottom:%?-2?%;padding:0}.t-attachments__file.file .t-attachments__content .t-attachments__desc[data-v-9b0917fa]{width:100%;color:var(--td-text-color-placeholder,var(--td-font-gray-3,rgba(0,0,0,.4)));font-size:%?24?%;font-style:normal;font-weight:400;line-height:%?40?%;margin-top:%?-4?%}.t-attachments--chatting.all_images[data-v-9b0917fa]{width:100%}.t-attachments--chatting.all_images .file-image.t-attachments__file[data-v-9b0917fa]{background-color:initial!important}.t-attachments--chatting.all_images .file-image[data-v-9b0917fa]{width:auto;height:auto}.t-attachments--chatting.all_images .file-image .image[data-v-9b0917fa]{max-width:%?400?%;max-height:%?400?%;border-radius:var(--td-radius-extraLarge,12px)}.t-attachments--chatting.all_files[data-v-9b0917fa]{width:auto}.t-attachments--chatting.all_files .t-attachments__files[data-v-9b0917fa]:not(:last-child){margin-bottom:%?16?%}.t-attachments--chatting.all_files .file-image.t-attachments__file[data-v-9b0917fa]{background-color:initial!important}.t-attachments--chatting.all_files .file-image[data-v-9b0917fa]{width:auto;height:auto}.t-attachments--chatting.all_files .file-image .image[data-v-9b0917fa]{max-width:%?400?%;max-height:%?400?%;border-radius:var(--td-radius-extraLarge,12px)}.t-attachments--chatting.all_files .t-attachments__files[data-v-9b0917fa]{margin-left:0}.t-attachments--chatting.all_files .t-attachments__scrollable[data-v-9b0917fa]{display:contents}.t-attachments--chatting.all_files .file.t-attachments__file[data-v-9b0917fa]{width:%?352?%}.t-chat__inner.right .t-attachments--chatting .file-image.t-attachments__file[data-v-9b0917fa]{text-align:right}",""]),e["default"]=r},57997:function(t,e,a){"use strict";a.r(e);var i=a(22093),l=a.n(i),n=a(12670),s=a.n(n),r=s()(l());r.push([t.id,".t-image[data-v-76af9ffe]{position:relative;display:inline-block}.t-image__mask[data-v-76af9ffe],\n.t-image__img[data-v-76af9ffe]{color:var(--td-image-color,var(--td-text-color-placeholder,var(--td-font-gray-3,rgba(0,0,0,.4))));vertical-align:top;width:inherit;height:inherit}.t-image__mask[data-v-76af9ffe]{display:flex;align-items:center;justify-content:center;background-color:var(--td-image-loading-bg-color,var(--td-bg-color-secondarycontainer,var(--td-gray-color-1,#f3f3f3)));color:var(--td-image-loading-color,var(--td-text-color-placeholder,var(--td-font-gray-3,rgba(0,0,0,.4))))}.t-image--loading-text[data-v-76af9ffe]{width:0;height:0}.t-image__common[data-v-76af9ffe]{width:100%;height:100%}.t-image--lazy[data-v-76af9ffe]{position:absolute;top:0;left:0;z-index:-1}.t-image--shape-circle[data-v-76af9ffe]{border-radius:50%;overflow:hidden}.t-image--shape-round[data-v-76af9ffe]{border-radius:var(--td-image-round-radius,var(--td-radius-default,6px));overflow:hidden}.t-image--shape-square[data-v-76af9ffe]{border-radius:0;overflow:hidden}",""]),e["default"]=r}}]);