(self["webpackChunktdesign_uniapp_vue2_cli"]=self["webpackChunktdesign_uniapp_vue2_cli"]||[]).push([[5932],{22241:function(t,e,a){"use strict";a.r(e);var i=a(22093),l=a.n(i),n=a(12670),s=a.n(n),r=s()(l());r.push([t.id,".t-attachments[data-v-1a408c2b]{display:flex;width:100%;height:auto}.t-attachments__scrollable[data-v-1a408c2b]{height:100%;display:flex;align-items:center;justify-content:flex-start}.t-attachments .scroll-x[data-v-1a408c2b]{white-space:nowrap;overflow-x:auto;overflow-y:hidden;scrollbar-width:none;\n  /* Firefox */-ms-overflow-style:none\n  /* IE and Edge */}.t-attachments .scroll-x[data-v-1a408c2b]::-webkit-scrollbar{display:none\n  /* Chrome, Safari, Opera */}.t-attachments .wrap[data-v-1a408c2b]{flex-wrap:wrap;overflow-x:hidden}.t-attachments__left[data-v-1a408c2b]{flex:1;overflow:hidden}.t-attachments__file--pending[data-v-1a408c2b],\n.t-attachments__file--fail[data-v-1a408c2b],\n.t-attachments__file--error[data-v-1a408c2b],\n.t-attachments__file--success[data-v-1a408c2b]{position:absolute;width:100%;height:100%;top:0;left:0;border-radius:var(--td-radius-extraLarge,12px);display:flex;flex-direction:column;align-items:center;justify-content:center}.t-attachments__files[data-v-1a408c2b]{box-sizing:border-box;margin-left:%?16?%}.t-attachments__files[data-v-1a408c2b]:first-of-type{margin-left:0}.t-attachments__file[data-v-1a408c2b]{border-radius:var(--td-radius-extraLarge,12px);display:block;position:relative;background-color:var(--td-bg-color-secondarycontainer,var(--td-gray-color-1,#f3f3f3))}.t-attachments__file--removable[data-v-1a408c2b]{margin-top:%?8?%}.t-attachments__file .t-attachments__remove[data-v-1a408c2b]{background-color:var(--td-text-color-primary,var(--td-font-gray-1,rgba(0,0,0,.9)));color:var(--td-bg-color-container,var(--td-font-white-1,#fff));border-radius:var(--td-radius-circle,50%);position:absolute;right:-4px;top:-4px}.t-attachments__file.file-image[data-v-1a408c2b]{width:%?104?%;height:%?104?%}.t-attachments__file.file-image .image[data-v-1a408c2b]{width:100%;height:100%;border-radius:var(--td-radius-extraLarge,12px)}.t-attachments__file.file[data-v-1a408c2b]{width:%?256?%;height:%?104?%;display:flex;align-items:stretch;justify-content:flex-start;padding:0 %?24?%}.t-attachments__file.file .image[data-v-1a408c2b]{width:%?64?%;height:auto;box-sizing:border-box;overflow:hidden;position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center}.t-attachments__file.file .image uni-image[data-v-1a408c2b]{width:100%;height:100%}.t-attachments__file.file .t-attachments__content[data-v-1a408c2b]{flex:1;overflow:hidden;display:flex;flex-direction:column;align-items:flex-start;justify-content:center;margin-left:%?16?%}.t-attachments__file.file .t-attachments__content .t-attachments__title[data-v-1a408c2b]{width:100%;color:var(--td-text-color-primary,var(--td-font-gray-1,rgba(0,0,0,.9)));font-size:%?28?%;font-style:normal;font-weight:400;line-height:%?44?%;\n  /* 核心：单行溢出隐藏 + 显示省略号（兼容全浏览器） */white-space:nowrap;\n  /* 强制文字在一行显示，不换行 */overflow:hidden;\n  /* 超出容器部分隐藏 */text-overflow:ellipsis;\n  /* 超出部分显示“...” */\n  /* 移除冗余属性：原 -webkit-box 相关属性与 nowrap 冲突，且单行场景无需 */margin-bottom:%?-2?%;padding:0}.t-attachments__file.file .t-attachments__content .t-attachments__desc[data-v-1a408c2b]{width:100%;color:var(--td-text-color-placeholder,var(--td-font-gray-3,rgba(0,0,0,.4)));font-size:%?24?%;font-style:normal;font-weight:400;line-height:%?40?%;margin-top:%?-4?%}.t-attachments--chatting.all_images[data-v-1a408c2b]{width:100%}.t-attachments--chatting.all_images .file-image.t-attachments__file[data-v-1a408c2b]{background-color:initial!important}.t-attachments--chatting.all_images .file-image[data-v-1a408c2b]{width:auto;height:auto}.t-attachments--chatting.all_images .file-image .image[data-v-1a408c2b]{max-width:%?400?%;max-height:%?400?%;border-radius:var(--td-radius-extraLarge,12px)}.t-attachments--chatting.all_files[data-v-1a408c2b]{width:auto}.t-attachments--chatting.all_files .t-attachments__files[data-v-1a408c2b]:not(:last-child){margin-bottom:%?16?%}.t-attachments--chatting.all_files .file-image.t-attachments__file[data-v-1a408c2b]{background-color:initial!important}.t-attachments--chatting.all_files .file-image[data-v-1a408c2b]{width:auto;height:auto}.t-attachments--chatting.all_files .file-image .image[data-v-1a408c2b]{max-width:%?400?%;max-height:%?400?%;border-radius:var(--td-radius-extraLarge,12px)}.t-attachments--chatting.all_files .t-attachments__files[data-v-1a408c2b]{margin-left:0}.t-attachments--chatting.all_files .t-attachments__scrollable[data-v-1a408c2b]{display:contents}.t-attachments--chatting.all_files .file.t-attachments__file[data-v-1a408c2b]{width:%?352?%}.t-chat__inner.right .t-attachments--chatting .file-image.t-attachments__file[data-v-1a408c2b]{text-align:right}",""]),e["default"]=r},45772:function(t,e,a){var i=a(22241);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var l=a(31997).A;l("79744d39",i,!0,{sourceMap:!1,shadowMode:!1})},45932:function(t,e,a){"use strict";var i;a.d(e,{A:function(){return y}});var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{class:[t.classPrefix,t.inChat?t.classPrefix+"--chatting":"",t.getFileTypeClass(t.inChat,t.files)],style:t._._style([t.customStyle])},[a("v-uni-view",{class:t.classPrefix+"__left"},[a("v-uni-view",{class:t.classPrefix+"__scrollable scroll-x"},[t._l(t.files,function(e,i){return[a("v-uni-view",{key:i+"_0",class:t.classPrefix+"__files",attrs:{"data-index":i},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.onFileWrapTap.apply(void 0,arguments)}}},["image"===e.fileType?[a("v-uni-view",{class:"file-image "+t.classPrefix+"__file "+(t.removable?t.classPrefix+"__file--removable":"")},["pending"===e.status||"fail"===e.status||"error"===e.status?[a("v-uni-view",{class:e.status+" "+t.classPrefix+"__file--"+e.status},[a("t-loading",{attrs:{theme:"circular",size:"48rpx"}})],1)]:[a("v-uni-image",{staticClass:"image",style:t.inChat?t.imageStyle(e):"",attrs:{src:e.url,mode:t.getImageMode(e),"lazy-load":!1}})],t.removable?a("v-uni-view",{class:t.classPrefix+"__remove",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.onRemoveTap(e,{index:i})}}},[a("t-icon",{attrs:{"data-index":i,name:"multiply",size:"16px"}})],1):t._e()],2)]:[a("v-uni-view",{class:"file "+t.classPrefix+"__file "+(t.removable?t.classPrefix+"__file--removable":"")},[a("v-uni-view",{staticClass:"image"},["pending"===e.status?[a("v-uni-view",{class:"loading "+t.classPrefix+"__file--pending"},[a("t-loading",{attrs:{theme:"circular",size:"48rpx"}})],1)]:"fail"===e.status?[a("v-uni-view",{class:"fail "+t.classPrefix+"__file--fail"},[a("t-loading",{attrs:{theme:"circular",size:"48rpx"}})],1)]:"error"===e.status?[a("v-uni-view",{class:"error "+t.classPrefix+"__file--error"},[a("t-loading",{attrs:{theme:"circular",size:"48rpx"}})],1)]:[a("t-icon",{attrs:{name:e.fileIcon.name,color:e.fileIcon.color,size:"48rpx"}})]],2),a("v-uni-view",{class:t.classPrefix+"__content"},[a("v-uni-view",{class:t.classPrefix+"__title"},[t._v(" "+t._s(e.name)+" ")]),"pending"===e.status?a("v-uni-view",{class:t.classPrefix+"__desc"},[t._v(" 上传中..."+t._s(e.progress||"0%")+" ")]):"fail"===e.status?a("v-uni-view",{class:t.classPrefix+"__desc"},[t._v(" 上传失败 ")]):"error"===e.status?a("v-uni-view",{class:t.classPrefix+"__desc"},[t._v(" "+t._s(e.errorMessage)+" ")]):a("v-uni-view",{class:t.classPrefix+"__desc"},[t._v(" "+t._s(e.desc)+" ")])],1),t.removable?a("v-uni-view",{class:t.classPrefix+"__remove",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.onRemoveTap(e,{index:i})}}},[a("t-icon",{attrs:{"data-index":i,name:"multiply",size:"16px"}})],1):t._e()],1)]],2)]})],2)],1)],1)},n=[],s=a(99105),r=a(31931),o=a(29066),c=a(15512),d={addable:{type:Boolean,default:!0},imageViewer:{type:Boolean,default:!0},items:{type:Array,default:function(){return[]},required:!0},removable:{type:Boolean,default:!0},onAdd:{type:Function,default:function(){return{}}},onFileClick:{type:Function,default:function(){return{}}},onRemove:{type:Function,default:function(){return{}}}},f=a(1383),h=a(75070);function m(t){return t&&t.width&&t.height?f.A._style({width:f.A.addUnit(t.width),height:f.A.addUnit(t.height)}):f.A._style({width:"400rpx",height:"400rpx"})}function u(t){return t&&t.width&&t.height?t.width>t.height?"widthFix":"heightFix":t&&t.mode?t.mode:"scaleToFill"}function v(t,e){if(!t)return"";if(!e||0===e.length)return"";let a=!0;for(let i=0;i<e.length;i++)if("image"!==e[i].fileType){a=!1;break}return a?"all_images":"all_files"}const g=`${c.Pl}-attachments`;var _,p=(0,h.o1)({name:g,options:{multipleSlots:!0,styleIsolation:"shared"},components:{tIcon:s.A,tImage:r.A,tLoading:o.A},props:{...d,inChat:{type:Boolean,default:!1}},emits:["fileClick","remove"],data(){return{classPrefix:g,_:f.A,files:[]}},watch:{items:{handler(){this.setFiles()},immediate:!0,deep:!0}},created(){},mounted(){this.setFiles()},methods:{imageStyle:m,getFileTypeClass:v,getImageMode:u,onFileWrapTap(t){const{index:e}=t.currentTarget.dataset||{},a=this.files?.[e];a&&this.handleFileClick(a)},onRemoveTap(t,{index:e}){const a=this.files?.[e];void 0!==a&&this.handleRemove(a,e)},handleFileClick(t){this.imageViewer&&"image"===t.fileType&&wx.previewImage({urls:[t.url]}),this.$emit("fileClick",{item:t})},handleRemove(t,e){this.$emit("remove",{item:t,index:e})},renderDesc(t){const e=t.size||0;let a,i;if(e<1024)a=e,i="B";else if(e<1048576){const t=e/1024;a=t%1===0?t:t.toFixed(2),i="KB"}else{const t=e/1048576;a=t%1===0?t:t.toFixed(2),i="MB"}return`${a} ${i}`},renderIcon(t){const e={file:{name:"file-zip-filled",color:"#E37318"},video:{name:"video-filled",color:"#D54941"},pdf:{name:"file-pdf-filled",color:"#D54941"},doc:{name:"file-word-filled",color:"#0052d9"},excel:{name:"file-excel-filled",color:"#2BA471"},ppt:{name:"file-powerpoint-filled",color:"#E37318"},audio:{name:"video-filled",color:"#D54941"}};return e[t.fileType]||e.file},renderFileType(t){const e=["image","video","audio","pdf","doc","ppt","txt","excel"];if(t.fileType)return t.fileType;if(e.includes(t.type))return t.fileType;const a=t.url||"",i=a.lastIndexOf("."),l=-1!==i?a.substring(i+1).toLowerCase():"",n={jpg:"image",jpeg:"image",png:"image",gif:"image",bmp:"image",webp:"image",mp4:"video",mov:"video",avi:"video",mkv:"video",webm:"video",mp3:"audio",wav:"audio",ogg:"audio",aac:"audio",pdf:"pdf",doc:"doc",docx:"doc",ppt:"ppt",pptx:"ppt",xls:"excel",xlsx:"excel",txt:"txt"};return n[l]||""},renderExtension(t){if(t.extension)return t.extension;const e=t.extension||(t.url?t.url.split(".").pop().toLowerCase():"");return e},setFiles(){this.files=this.items.map(t=>({...t,fileType:this.renderFileType(t),desc:this.renderDesc(t),fileIcon:this.renderIcon(t)}))}}}),x=p,b=(a(45772),a(1391)),w=(0,b.A)(x,l,n,!1,null,"1a408c2b",null,!1,i,_),y=w.exports}}]);