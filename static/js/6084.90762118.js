(self["webpackChunktdesign_uniapp_vue2_cli"]=self["webpackChunktdesign_uniapp_vue2_cli"]||[]).push([[6084],{24344:function(t,e,a){var s=a(28565);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);var i=a(31997).A;i("9b3b0d52",s,!0,{sourceMap:!1,shadowMode:!1})},28565:function(t,e,a){"use strict";a.r(e);var s=a(22093),i=a.n(s),r=a(12670),l=a.n(r),n=l()(i());n.push([t.id,'.t-cascader[data-v-53acd353]{display:flex;flex-direction:column;background-color:var(--td-cascader-bg-color,var(--td-bg-color-container,var(--td-font-white-1,#fff)));color:var(--td-cascader-title-color,var(--td-text-color-primary,var(--td-font-gray-1,rgba(0,0,0,.9))));border-radius:var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px) 0 0;--td-radio-icon-checked-color:var(--td-cascader-active-color,var(--td-brand-color,var(--td-primary-color-7,#0052d9)));--td-tab-item-active-color:var(--td-cascader-active-color,var(--td-brand-color,var(--td-primary-color-7,#0052d9)));--td-tab-track-color:var(--td-cascader-active-color,var(--td-brand-color,var(--td-primary-color-7,#0052d9)))}.t-cascader__close-btn[data-v-53acd353]{right:var(--td-spacer-2,16px);top:var(--td-spacer-2,16px);position:absolute}.t-cascader__title[data-v-53acd353]{position:relative;font:var(--td-cascader-title-font,var(--td-font-title-large,600 18px/26px var(--td-font-family,PingFang SC,Microsoft YaHei,Arial Regular)));text-align:center;padding:var(--td-cascader-title-padding,var(--td-spacer-2,16px))}.t-cascader__content[data-v-53acd353]{width:100%;height:var(--td-cascader-content-height,78vh);display:flex;flex-direction:column}.t-cascader__options[data-v-53acd353]{width:100vw}.t-cascader__options-title[data-v-53acd353]{color:var(--td-cascader-options-title-color,var(--td-text-color-placeholder,var(--td-font-gray-3,rgba(0,0,0,.4))));font:var(--td-font-body-medium,14px/22px var(--td-font-family,PingFang SC,Microsoft YaHei,Arial Regular));padding-top:%?40?%;padding-left:var(--td-spacer-2,16px);box-sizing:border-box}.t-cascader__options-container[data-v-53acd353]{flex:1;display:flex;transition:all ease .3s}.t-cascader__step[data-v-53acd353]{display:flex;align-items:center;height:var(--td-cascader-step-height,44px)}.t-cascader__steps[data-v-53acd353]{padding:0 %?32?% %?10?%;position:relative}.t-cascader__steps[data-v-53acd353]::after{content:"";display:block;position:absolute;top:unset;bottom:0;left:unset;right:unset;background-color:var(--td-cascader-border-color,var(--td-component-stroke,var(--td-gray-color-3,#e7e7e7)))}.t-cascader__steps[data-v-53acd353]::after{height:1px;left:0;right:0;-webkit-transform:scaleY(.5);transform:scaleY(.5)}.t-cascader__step-dot[data-v-53acd353]{position:relative;width:var(--td-cascader-step-dot-size,8px);height:var(--td-cascader-step-dot-size,8px);border-radius:50%;border:%?2?% solid var(--td-cascader-active-color,var(--td-brand-color,var(--td-primary-color-7,#0052d9)));box-sizing:border-box}.t-cascader__step-dot[data-v-53acd353]:not(.t-cascader__step-dot--last)::after{content:"";display:block;position:absolute;left:50%;top:calc(var(--td-cascader-step-dot-size, %?16?%) + %?14?%);height:%?36?%;width:%?2?%;background:var(--td-cascader-active-color,var(--td-brand-color,var(--td-primary-color-7,#0052d9)));-webkit-transform:translateX(-50%);transform:translateX(-50%)}.t-cascader__step-dot--active[data-v-53acd353]{background:var(--td-cascader-active-color,var(--td-brand-color,var(--td-primary-color-7,#0052d9)));border-color:var(--td-cascader-active-color,var(--td-brand-color,var(--td-primary-color-7,#0052d9)))}.t-cascader__step-label[data-v-53acd353]{padding-left:var(--td-spacer-2,16px);font:var(--td-font-body-medium,14px/22px var(--td-font-family,PingFang SC,Microsoft YaHei,Arial Regular))}.t-cascader__step-label--active[data-v-53acd353]{color:var(--td-cascader-active-color,var(--td-brand-color,var(--td-primary-color-7,#0052d9)));font-weight:600}.t-cascader__step-arrow[data-v-53acd353]{color:var(--td-cascader-step-arrow-color,var(--td-text-color-placeholder,var(--td-font-gray-3,rgba(0,0,0,.4))));margin-left:auto}',""]),e["default"]=n},76084:function(t,e,a){"use strict";var s;a.d(e,{A:function(){return T}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("TPopup",{class:t.tClass,attrs:{visible:t.dataVisible,placement:"bottom"},on:{"visible-change":function(e){arguments[0]=e=t.$handleEvent(e),t.onVisibleChange.apply(void 0,arguments)}}},[a("v-uni-view",{class:t.name,style:t.tools._style([t.customStyle])},[a("v-uni-view",{class:t.name+"__title"},[t._t("title"),t._v(" "+t._s(t.title)+" ")],2),a("v-uni-view",{class:t.name+"__close-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClose.apply(void 0,arguments)}}},[t._t("close-btn"),t.closeBtn?a("TIcon",{attrs:{size:"48rpx",name:"close"}}):t._e()],2),t._t("header"),a("v-uni-view",{class:t.name+"__content"},[t.steps&&t.steps.length?["step"==t.theme?a("v-uni-view",{class:t.name+"__steps"},t._l(t.steps,function(e,s){return a("v-uni-view",{key:s,class:t.name+"__step",attrs:{"data-index":s},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),function(){return t.onStepClick(s)}.apply(void 0,arguments)}}},[a("v-uni-view",{class:t.name+"__step-dot "+t.name+"__step-dot--"+(e!==t.placeholder?"active":"")+" "+t.name+"__step-dot--"+(s===t.steps.length-1?"last":"")}),a("v-uni-view",{class:t.name+"__step-label "+t.name+"__step-label--"+(s===t.stepIndex?"active":"")},[t._v(" "+t._s(e)+" ")]),a("TIcon",{staticStyle:{"margin-left":"auto"},attrs:{name:"chevron-right",size:"44rpx","t-class":t.name+"__step-arrow","custom-style":t.stepArrowCustomStyle}})],1)}),1):t._e(),"tab"==t.theme?a("TTabs",{ref:"tabs",attrs:{value:t.stepIndex,"space-evenly":!1},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),function(e){var a=e.value;return t.onTabChange(a)}.apply(void 0,arguments)}}},t._l(t.steps,function(t,e){return a("TTabPanel",{key:e,ref:"tab-"+e,refInFor:!0,attrs:{value:e,label:t}})}),1):t._e()]:t._e(),t._t("middle-content"),t.subTitles&&t.subTitles[t.stepIndex]?a("v-uni-view",{class:t.name+"__options-title"},[t._v(" "+t._s(t.subTitles[t.stepIndex])+" ")]):t._e(),a("v-uni-view",{class:t.name+"__options-container",style:"width: "+(t.items.length+1)+"00vw; transform: translateX(-"+t.stepIndex+"00vw)"},t._l(t.items,function(e,s){return a("v-uni-scroll-view",{key:s,class:t.name+"__options",style:"height: "+t.optionsHeight+"px",attrs:{"scroll-y":!0,"scroll-top":t.scrollTopList[s],type:"list"}},[a("v-uni-view",{class:"cascader-radio-group-"+s},[a("TRadioGroup",{attrs:{value:t.selectedValue[s],keys:t.keys,options:e,"data-level":s,placement:"right",icon:"line",borderless:!0},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),function(a){var i=a.value;return t.handleSelect(e,{level:s,value:i})}.apply(void 0,arguments)}}})],1)],1)}),1)],2)],2)],1)],1)},r=[],l=a(99105),n=a(75803),o=a(13318),c=a(11916),d=a(315),h=a(75070),p=a(15512),u=(a(26128),a(27439),{checkStrictly:Boolean,closeBtn:{type:Boolean,default:!0},keys:{type:Object},options:{type:Array,default:function(){return[]}},placeholder:{type:String,default:"选择选项"},subTitles:{type:Array,default:function(){return[]}},theme:{type:String,default:"step",validator:function(t){return!t||["step","tab"].includes(t)}},title:{type:String},value:{type:[String,Number]},defaultValue:{type:[String,Number]},visible:Boolean,onChange:{type:Function,default:function(){return{}}},onClose:{type:Function,default:function(){return{}}},onPick:{type:Function,default:function(){return{}}}}),v=a(16205),g=a(1383);const b=`${p.Pl}-cascader`;function m(t,e){const a=(0,v.Yc)(e?.label,"label"),s=(0,v.Yc)(e?.value,"value"),i=(0,v.Yc)(e?.disabled,"disabled");return t.map(t=>({[a]:t[a],[s]:t[s],[i]:t[i]}))}const f={contentHeight:0,stepHeight:0,tabsHeight:0,subTitlesHeight:0,stepsInitHeight:0};var _,y=(0,h.o1)({name:b,options:{styleIsolation:"shared"},controlledProps:[{key:"value",event:"change"}],externalClasses:[`${p.Pl}-class`],components:{TIcon:l.A,TPopup:n.A,TTabs:o.A,TTabPanel:c.A,TRadioGroup:d.A},props:{...u},emits:["update:visible"],data(){return{prefix:p.Pl,name:b,stepIndex:0,selectedIndexes:[],selectedValue:[],scrollTopList:[],steps:[],optionsHeight:0,tools:g.A,dataVisible:this.visible,dataValue:(0,v.Yc)(this.value,this.defaultValue),items:[]}},computed:{stepArrowCustomStyle(){return g.A._style({color:"var(--td-cascader-step-arrow-color, var(--td-text-color-placeholder, var(--td-font-gray-3, rgba(0, 0, 0, .4))))",marginLeft:"auto"})}},watch:{visible:{handler(t){this.dataVisible=t},immediate:!0},dataVisible:{handler(t){t?((0,v.dY)().then(()=>{const t=this.$refs.tabs;t?.setTrack(),t?.getTabHeight().then(t=>{this.state.tabsHeight=t.height})}),(0,v.dY)().then(()=>{this.initOptionsHeight(this.steps.length),this.updateScrollTop(),this.initWithValue()})):this.state={...f}},immediate:!0},value:{handler(t){this.dataValue=t},immediate:!0},dataValue:{handler(){this.initWithValue()},immediate:!0,deep:!0},options:{handler(){const{selectedValue:t,steps:e,items:a}=this.genItems();this.steps=e,this.items=a,this.selectedValue=t,this.stepIndex=a.length-1,this.setTabParent()},immediate:!0,deep:!0},selectedIndexes:{handler(){const{visible:t,theme:e}=this,{selectedValue:a,steps:s,items:i}=this.genItems();this.steps=s,this.setTabParent(),this.selectedValue=a,this.stepIndex=i.length-1,JSON.stringify(i)!==JSON.stringify(this.items)&&(this.items=i),t&&"step"===e&&this.updateOptionsHeight(s.length)},immediate:!0,deep:!0},stepIndex:{handler(){const{dataVisible:t}=this;t&&this.updateScrollTop()},immediate:!0,deep:!0}},created(){this.state={...f}},mounted(){},methods:{setTabParent(){},updateOptionsHeight(t){const{contentHeight:e,stepsInitHeight:a,stepHeight:s,subTitlesHeight:i}=this.state;this.optionsHeight=e-a-i-(t-1)*s},async initOptionsHeight(t){const{theme:e,subTitles:a}=this,{height:s}=await(0,v.l)(this,`.${b}__content`);if(this.state.contentHeight=s,"step"===e&&await Promise.all([(0,v.l)(this,`.${b}__steps`),(0,v.l)(this,`.${b}__step`)]).then(([e,a])=>{this.state.stepsInitHeight=e.height-(t-1)*a.height,this.state.stepHeight=a.height}).catch(()=>{}),a.length>0){const{height:t}=await(0,v.l)(this,`.${b}__options-title`);this.state.subTitlesHeight=t}const i=this.state.contentHeight-this.state.subTitlesHeight;this.optionsHeight="step"===e?i-this.state.stepsInitHeight-(t-1)*this.state.stepHeight:i-this.state.tabsHeight},initWithValue(){if(null!=this.dataValue&&""!==this.dataValue){const t=this.getIndexesByValue(this.options,this.dataValue);t&&(this.selectedIndexes=t)}else this.selectedIndexes=[]},getIndexesByValue(t,e){const{keys:a}=this;for(let s=0,i=t.length;s<i;s+=1){const i=t[s];if(i[(0,v.Yc)(a?.value,"value")]===e)return[s];if(i[(0,v.Yc)(a?.children,"children")]){const t=this.getIndexesByValue(i[(0,v.Yc)(a?.children,"children")],e);if(t)return[s,...t]}}},updateScrollTop(){const{dataVisible:t,items:e,selectedIndexes:a,stepIndex:s}=this;t&&(0,v.l)(this,".cascader-radio-group-0").then(t=>{const i=t.height/e[0]?.length;this[`scrollTopList[${s}]`]=i*a[s]}).catch(()=>{})},hide(t){this.dataVisible=!1,this.$emit("close",{trigger:t}),this.$emit("update:visible",!1)},onVisibleChange(){this.hide("overlay")},onClose(){this.checkStrictly&&this.triggerChange(),this.hide("close-btn")},onStepClick(t){this.stepIndex=t},onTabChange(t){this.stepIndex=t},genItems(){const{options:t,selectedIndexes:e,keys:a,placeholder:s}=this,i=[],r=[],l=[m(t,a)];if(t.length>0){let s=t;for(let t=0,n=e.length;t<n;t+=1){const n=e[t],o=s[n];s=o[(0,v.Yc)(a?.children,"children")],i.push(o[(0,v.Yc)(a?.value,"value")]),r.push(o[(0,v.Yc)(a?.label,"label")]),o[(0,v.Yc)(a?.children,"children")]&&l.push(m(o[(0,v.Yc)(a?.children,"children")],a))}}return r.length<l.length&&r.push(s),{selectedValue:i,steps:r,items:l}},handleSelect(t,{level:e,value:a}){const{checkStrictly:s}=this,{selectedIndexes:i,items:r,keys:l,options:n,selectedValue:o}=this,c=r[e].findIndex(t=>t[(0,v.Yc)(l?.value,"value")]===a);let d=i.slice(0,e).reduce((t,e,a)=>0===a?t[e]:t[(0,v.Yc)(l?.children,"children")][e],n);if(d=0===e?d[c]:d[(0,v.Yc)(l?.children,"children")][c],d[(0,v.Yc)(l?.disabled,"disabled")])return;if(this.$emit("pick",{value:d[(0,v.Yc)(l?.value,"value")],label:d[(0,v.Yc)(l?.label,"label")],index:c,level:e}),i[e]=c,s&&o.includes(String(a)))return i.length=e,void(this.selectedIndexes=i);i.length=e+1;const{items:h}=this.genItems();d?.[(0,v.Yc)(l?.children,"children")]?.length>=0?(this.selectedIndexes=i,this[`items[${e+1}]`]=h[e+1]):(this.selectedIndexes=i,setTimeout(this.triggerChange),this.hide("finish")),this.$set(this,"selectedIndexes",JSON.parse(JSON.stringify(i)))},triggerChange(){const{items:t,selectedValue:e,selectedIndexes:a}=this;this._trigger("change",{value:(0,v.Yc)(e[e.length-1],""),selectedOptions:t.map((t,e)=>t[a[e]]).filter(Boolean)})}}}),x=y,I=(a(24344),a(1391)),w=(0,I.A)(x,i,r,!1,null,"53acd353",null,!1,s,_),T=w.exports}}]);