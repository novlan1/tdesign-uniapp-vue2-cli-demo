(self["webpackChunktdesign_uniapp_vue2_cli"]=self["webpackChunktdesign_uniapp_vue2_cli"]||[]).push([[7590],{7590:function(t,a,e){"use strict";e.d(a,{A:function(){return g}});var n,i={tIcon:e(14867).A},o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{class:[t.classPrefix,"longpress"===t.placement?t.classPrefix+"__inner--popover":""],style:t._._style([t.customStyle])},[e("v-uni-view",{class:t.classPrefix+"__inner "+t.classPrefix+"__inner--column"},[e("v-uni-view",{class:t.classPrefix+"__item "+t.classPrefix+"__left"},[t._t("prefix")],2),t._l(t.actions,function(a,n){return["share"===a.name?e("v-uni-button",{key:n+"_0",class:t._.cls(t.classPrefix+"__item",[["active",a.isActive]]),attrs:{"data-name":a.name,"open-type":t.content?"share":"none","data-chat-id":t.chatId},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.handleActionClick.apply(void 0,arguments)}}},[e("t-icon",{attrs:{name:a.isActive?t.iconActiveMap[a.name]:t.iconMap[a.name],size:"40rpx"}})],1):e("v-uni-view",{class:t._.cls(t.classPrefix+"__item",[["active",a.isActive]]),attrs:{"data-name":a.name},on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.handleActionClick.apply(void 0,arguments)}}},[e("t-icon",{attrs:{name:a.isActive?t.iconActiveMap[a.name]:t.iconMap[a.name],size:"40rpx"}})],1)]})],2)],1)},r=[],c=e(70012),s=(e(52093),e(17932),e(19329),e(77332),e(10165),e(47402),e(87311),e(87019),e(25241),e(14867)),d=e(46056),l=(e(26128),{actionBar:{type:Array,default:function(){return["replay","copy","good","bad","share"]}},chatId:{type:String,default:""},comment:{type:String,default:""},content:{type:String,default:""},copyMode:{type:String,default:"markdown",validator:function(t){return!t||["markdown","text"].includes(t)}},disabled:Boolean,placement:{type:String,default:"start",validator:function(t){return!t||["start","end","space-around","space-between"].includes(t)}},onActions:{type:Function,default:function(){return{}}}}),p=e(88070),f=e(10263),u="".concat(d.Pl,"-chat-actionbar"),m=(0,p.o1)({name:u,options:{multipleSlots:!0,styleIsolation:"shared"},components:{tIcon:s.A},props:(0,c.A)({},l),data:function(){return{actions:[],classPrefix:u,pComment:"",iconMap:{good:"thumb-up",bad:"thumb-down",replay:"refresh",copy:"copy",share:"share-1"},iconActiveMap:{good:"thumb-up-filled",bad:"thumb-down-filled"},_:f.A}},watch:{comment:{handler:function(t){this.pComment=t||""},immediate:!0,deep:!0},actionBar:{handler:function(){this.setActions()},immediate:!0,deep:!0},pComment:{handler:function(){this.setActions()},immediate:!0,deep:!0}},mounted:function(){this.pComment=this.comment||"",this.setActions()},methods:{filterSpecialChars:function(t){var a=t,e=/^(\s*\|.*\|.*\n\s*\|[-: ]+\|.*\n(\s*\|.*\|.*\n)*)/gm,n=[];a=a.replace(e,function(t){var a=t.replace(/\[\d+(?:,\d+)*\]\(@ref\)/g,"").replace(/(\*\*|__)(.*?)\1|(\*|_)(.*?)\3/g,"$2$4").replace(/<br\s*\/?>/gi,"\n");return n.push(a),"%%TABLE".concat(n.length-1,"%%")}),a=a.replace(/^(\s*)#{1,6}\s+/gm,"$1"),a=a.replace(/(\*\*|__)(.*?)\1|(\*|_)(.*?)\3/g,"$2$4"),a=a.replace(/!\[.*?\]\(.*?\)/g,""),a=a.replace(/\[\d+(?:,\d+)*\]\(@ref\)/g,"");var i=/(\\|`|\{|\}|\[|\]|\(|\)|\||ÔºÅ|@ref|\([@#]\w+\))/g;return a=a.replace(i,""),a=a.replace(/\[\d+\]/g,""),a=a.replace(/<br\s*\/?>/gi,"\n"),a=a.replace(/%%TABLE(\d+)%%/g,function(t,a){return n[parseInt(a,10)]||""}),a.replace(/\n{3,}/g,"\n\n").trim()},handleActionClick:function(t){var a=t.currentTarget.dataset.name;if("copy"===a&&this.content)this.handleCopy();else if("good"===a){var e="good"===this.pComment;this.pComment=e?void 0:"good",this.$emit("actions",{name:a,active:!e})}else if("bad"===a){var n="bad"===this.pComment;this.pComment=n?void 0:"bad",this.$emit("actions",{name:a,active:!n})}else this.$emit("actions",{name:a})},handleCopy:function(){if(this.content){var t="markdown"===this.copyMode?this.content:this.filterSpecialChars(this.content);this.$emit("actions",{name:"copy",data:t})}},setActions:function(){var t=this,a=[];Array.isArray(this.actionBar)&&this.actionBar.forEach(function(e){"good"===e||"bad"===e?a.push({name:e,isActive:t.pComment===e}):a.push({name:e,isActive:!1})}),this.actions=a}}}),h=m,v=(e(18789),e(1391)),_=(0,v.A)(h,o,r,!1,null,"5aa1f3f9",null,!1,i,n),g=_.exports},18789:function(t,a,e){var n=e(41322);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var i=e(31997).A;i("23847269",n,!0,{sourceMap:!1,shadowMode:!1})},41322:function(t,a,e){"use strict";e.r(a);var n=e(22093),i=e.n(n),o=e(12670),r=e.n(o),c=r()(i());c.push([t.id,".t-chat-actionbar[data-v-5aa1f3f9]{display:flex;padding:var(--chat-actionbar-padding,0)}.t-chat-actionbar.start[data-v-5aa1f3f9]{justify-content:flex-start}.t-chat-actionbar.end[data-v-5aa1f3f9]{justify-content:flex-end}.t-chat-actionbar__inner[data-v-5aa1f3f9]{background-color:var(--td-bg-color-secondarycontainer,var(--td-gray-color-1,#f3f3f3));border:%?2?% solid var(--td-component-border,var(--td-gray-color-4,#dcdcdc));box-sizing:border-box;border-radius:var(--td-radius-default,6px);display:inline-flex;flex-direction:row;flex-wrap:nowrap;align-items:center}.t-chat-actionbar__inner--column[data-v-5aa1f3f9]{display:flex;align-items:center;justify-content:space-between}.t-chat-actionbar__inner--popover[data-v-5aa1f3f9]{padding:%?45?%;background-color:var(--td-mask-active,rgba(0,0,0,.6));border-radius:%?32?%;color:var(--td-font-white-1,#fff)}.t-chat-actionbar__left[data-v-5aa1f3f9]:empty{display:none}.t-chat-actionbar__item[data-v-5aa1f3f9]{color:var(--td-text-color-primary,var(--td-font-gray-1,rgba(0,0,0,.9)));margin:%?12?% 0;padding:%?4?% %?28?%;border-right:%?2?% solid var(--td-component-stroke,var(--td-gray-color-3,#e7e7e7));background-color:unset;outline:none}.t-chat-actionbar__item[data-v-5aa1f3f9]:after{display:none}.t-chat-actionbar__item[data-v-5aa1f3f9]:last-child{border-right:none}.t-chat-actionbar__item--active[data-v-5aa1f3f9]{color:var(--td-brand-color,var(--td-primary-color-7,#0052d9))}",""]),a["default"]=c}}]);