(self["webpackChunktdesign_uniapp_vue2_cli"]=self["webpackChunktdesign_uniapp_vue2_cli"]||[]).push([[2517],{2799:function(t,e,n){"use strict";var a;n.r(e),n.d(e,{default:function(){return Xt}});var s,o,i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("t-demo-navbar",{staticClass:"demo-navbar",attrs:{title:"ChatList"}}),n("v-uni-view",{staticClass:"demo"},[n("t-tabs",{attrs:{"space-evenly":!1,swipeable:!1,value:t.value},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.onTabsChange.apply(void 0,arguments)}}},[n("t-tab-panel",{attrs:{label:"åŸºç¡€ä½¿ç”¨",value:0}},[n("base-demo")],1),n("t-tab-panel",{attrs:{label:"ç»„åˆå¼ç”¨æ³•",value:1}},[n("hook-component",{attrs:{"is-active":1===t.value}})],1),n("t-tab-panel",{attrs:{label:"æ–‡æ¡ˆåŠ©æ‰‹",value:4}},[n("docs-demo",{attrs:{"is-active":4===t.value}})],1),n("t-tab-panel",{attrs:{label:"å›¾åƒç”Ÿæˆ",value:5}},[n("image-demo",{attrs:{"is-active":5===t.value}})],1),n("t-tab-panel",{attrs:{label:"ä»»åŠ¡è§„åˆ’",value:6}},[n("agent-demo",{attrs:{"is-active":6===t.value}})],1)],1)],1)],1)},c=[],r=n(99213),l=n(25386),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"chat-box",style:"height: "+t.contentHeight+";"},[n("t-chat-list",{attrs:{id:"chatList"},on:{scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.onScroll(e,{tagId:"chatList"})}},scopedSlots:t._u([{key:"footer",fn:function(){return[n("t-chat-sender",{attrs:{loading:t.loading,disabled:t.disabled,"auto-rise-with-keyboard":!0,"render-presets":t.renderPresets},on:{send:function(e){arguments[0]=e=t.$handleEvent(e),t.onSend.apply(void 0,arguments)},stop:function(e){arguments[0]=e=t.$handleEvent(e),t.onStop.apply(void 0,arguments)},focus:function(e){arguments[0]=e=t.$handleEvent(e),t.onFocus.apply(void 0,arguments)}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})]},proxy:!0}])},[t._l(t.chatList,function(e,a){return[n("t-chat-message",{key:e.chatId+"_0",attrs:{"chat-id":e.chatId,avatar:e.avatar||"",name:e.name||"",datetime:e.datetime||"",content:e.content,role:e.role,placement:"user"===e.role?"right":"left",status:e.status||""},on:{"message-longpress":function(e){arguments[0]=e=t.$handleEvent(e),t.showPopover.apply(void 0,arguments)}},scopedSlots:t._u([{key:"actionbar",fn:function(){return[a!==t.chatList.length-1&&"complete"===e.status&&"assistant"===e.role?n("t-chat-actionbar",{ref:"actionbar-"+e.chatId,refInFor:!0,attrs:{"chat-id":"actionbar-"+e.chatId,comment:e.comment},on:{actions:function(e){arguments[0]=e=t.$handleEvent(e),t.handleAction.apply(void 0,arguments)}}}):t._e()]},proxy:!0}],null,!0)})]})],2),n("t-chat-actionbar",{ref:"popoverActionbar",staticClass:"popover-actionbar",attrs:{placement:"longpress","long-press-position":t.longPressPosition},on:{actions:function(e){arguments[0]=e=t.$handleEvent(e),t.handlePopoverAction.apply(void 0,arguments)}}})],1),n("t-toast",{ref:"t-toast"})],1)},u=[],h=n(45824),p=n(35927),g=n(38730),v=(n(53439),n(73645),n(17932),n(19329),n(77332),n(41790),n(50123),n(87019),n(25241),n(65800)),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{class:[t.classPrefix,t.classes],style:t._._style([t.customStyle])},[n("v-uni-scroll-view",{class:t._.cls(t.classPrefix+"__content",[["reverse",t.reverse]]),attrs:{"scroll-y":!0,"enable-flex":!0,enhanced:!0,"scroll-with-animation":!0,"scroll-top":t.scrollViewTop,"data-ref":"chatListRef"},on:{scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.onScroll.apply(void 0,arguments)},scrolltoupper:function(e){arguments[0]=e=t.$handleEvent(e),t.handlerScrollToUpper.apply(void 0,arguments)},scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.handlerScrollToLower.apply(void 0,arguments)}}},[t.reverse?[n("v-uni-view",{staticClass:"placeholder"})]:t._e(),t.data&&t.data.length>0?[t._l(t.data,function(e,a){return[!t.virtualList||a>=t.startIndex&&a<=t.endIndex?n("chat-message",{key:a+"_0",attrs:{avatar:e.avatar||"",name:e.name||"",datetime:e.datetime||"",content:e.content,placement:"both"===t.layout&&"user"===e.role?"right":"left",animation:t.animation,status:e.status||""}}):t._e()]})]:t._t("default")],2),n("v-uni-view",{class:t.classPrefix+"__footer"},[t._t("footer")],2)],1)},f=[],y=n(38207),b=(n(26128),{animation:{type:String,default:"skeleton",validator:function(t){return!t||["skeleton","moving","gradient","dot"].includes(t)}},data:{type:Array},layout:{type:String,default:"both",validator:function(t){return!t||["both","single"].includes(t)}},reverse:{type:Boolean,default:!0},onScroll:{type:Function,default:function(){return{}}}}),x=n(78282),A=n(33913);const k=`${y.Pl}-chat-list`;var w,_,P,L,T,C,S,I,M,E,$,H=(0,A.o1)({name:k,options:{multipleSlots:!0,styleIsolation:"shared"},components:{ChatMessage:v.A},props:{...b,virtualList:{type:Boolean,default:!1},fragmentLen:{type:Number,default:8}},data(){return{classPrefix:k,scrollViewTop:0,classes:[],listClasses:[],startIndex:0,endIndex:0,_:x.A}},watch:{data:{handler(){const t=this.data?this.data.length:0;this.virtualList&&this.oldDataLen!==t&&(this.oldDataLen=t,this.resetFragments())},immediate:!0,deep:!0}},methods:{setScrollTop(t=0){t===this.scrollViewTop&&(t-=1),this.scrollViewTop=t},scrollToBottom(){const t=this.reverse?0:999999;this.setScrollTop(t)},onScroll(t){this.$emit("scroll",t)},handlerScrollToUpper(){!this.reverse&&this.virtualList&&this.addFragment()},handlerScrollToLower(){this.reverse&&this.virtualList&&this.addFragment()},resetFragments(){const t=this.data&&this.data.length;if(t){const{fragmentLen:e}=this;this.reverse?(this.startIndex=0,this.endIndex=Math.min(t-1,e-1)):(this.startIndex=Math.max(t-e,0),this.endIndex=Math.max(t-1,0))}},addFragment(t=4){const e=this.data&&this.data.length;e&&(this.reverse?this.endIndex=Math.min(e-1,this.endIndex+t):this.startIndex=Math.max(this.startIndex-t,0))}}}),F=H,z=(n(73158),n(1391)),B=(0,z.A)(F,m,f,!1,null,"0c125fec",null,!1,o,w),D=B.exports,R=n(7106),V=n(67381),q=n(91263),U=n(11071),W=function(){try{var t,e,n=uni.getWindowInfo?uni.getWindowInfo():uni.getSystemInfoSync(),a=n.statusBarHeight||0,s=null===(t=(e=uni).getMenuButtonBoundingClientRect)||void 0===t?void 0:t.call(e);if(s){var o=s.bottom+(s.top-a);return o}var i=a+44;return i}catch(c){return console.error("èŽ·å–å¯¼èˆªæ é«˜åº¦å¤±è´¥:",c),44}},Y=0,j=function(){return Y+=1,"key-".concat(Y)},G="å—æžçš„è‡ªåŠ¨ææ¬¾æœºå¹¶æ²¡æœ‰ä¸€ä¸ªç‰¹å®šçš„ä¸“å±žåç§°ï¼Œä½†åŽ†å²ä¸Šç¡®å®žæœ‰ä¸€å°ATMæœºæ›¾çŸ­æš‚å­˜åœ¨äºŽå—æžçš„**éº¦å…‹é»˜å¤šç«™**ï¼ˆMcMurdo Stationï¼‰ã€‚è¿™å°ATMç”±ç¾Žå›½**å¯Œå…°å…‹æž—å›½å®¶é“¶è¡Œ**ï¼ˆWells Fargoï¼‰äºŽ1998å¹´å®‰è£…ï¼Œä¸»è¦ä¾›é©»æ‰Žåœ¨è¯¥ç«™çš„ç§‘ç ”äººå‘˜ä½¿ç”¨ã€‚ä¸è¿‡ï¼Œç”±äºŽå—æžçš„æžç«¯çŽ¯å¢ƒå’Œæžä½Žçš„äººå£å¯†åº¦ï¼Œè¿™å°ATMæœºå¹¶æœªé•¿æœŸè¿è¡Œï¼Œæœ€ç»ˆè¢«ç§»é™¤ã€‚\n\n**èƒŒæ™¯è¡¥å……ï¼š**\n- **éº¦å…‹é»˜å¤šç«™**æ˜¯ç¾Žå›½åœ¨å—æžæœ€å¤§çš„ç§‘ç ”åŸºåœ°ï¼Œå¤å­£äººå£å¯è¾¾çº¦1,000äººï¼Œå†¬å­£çº¦200äººã€‚\n- è¯¥ATMæœºæ›´å¤šæ˜¯ä½œä¸ºä¸€ç§è±¡å¾æ€§æœåŠ¡å­˜åœ¨ï¼Œå®žé™…ä½¿ç”¨é¢‘çŽ‡æžä½Žï¼Œå› ä¸ºå—æžç§‘è€ƒäººå‘˜é€šå¸¸ä¾é é¢„æ”¯èµ„é‡‘æˆ–ç”µå­æ”¯ä»˜ã€‚\n- ç›®å‰å—æžå·²æ— é•¿æœŸè¿è¡Œçš„ATMæœºï¼ŒçŽ°ä»£ç§‘è€ƒç«™æ›´å¤šä¾èµ–éžçŽ°é‡‘äº¤æ˜“æ–¹å¼ã€‚\n\nå—æžä½œä¸ºéžä¸»æƒé¢†åœŸï¼Œå…¶åŸºç¡€è®¾æ–½ä»¥ç§‘ç ”å’Œç”Ÿæ´»æ”¯æŒä¸ºä¸»ï¼Œå•†ä¸šé‡‘èžæœåŠ¡éžå¸¸æœ‰é™ã€‚è‹¥æœ‰ç±»ä¼¼è®¾æ–½ï¼Œé€šå¸¸æ˜¯ä¸´æ—¶æˆ–å®žéªŒæ€§è´¨çš„ã€‚",N=function(t){return new Promise(function(e){return setTimeout(e,t)})},J=function(){var t=(0,g.A)((0,p.A)().m(function t(e,n){var a,s,o,i,c,r;return(0,p.A)().w(function(t){while(1)switch(t.n){case 0:a=n.success,s=n.complete,o=n.delay,i=void 0===o?100:o,c=e.split(""),r=0;case 1:if(!(r<c.length)){t.n=4;break}return t.n=2,N(i);case 2:a(c[r]);case 3:r+=1,t.n=1;break;case 4:s();case 5:return t.a(2)}},t)}));return function(e,n){return t.apply(this,arguments)}}(),K={components:{TChatMessage:v.A,TChatList:D,TChatSender:R.A,TChatActionbar:V.A,TToast:q.A},data:function(){return{renderPresets:[{name:"send",type:"icon"}],chatList:[{avatar:"https://tdesign.gtimg.com/site/chat-avatar.png",role:"assistant",status:"complete",chatId:j(),comment:"",content:[{type:"text",data:"å®ƒå« McMurdo Station ATMï¼Œæ˜¯ç¾Žå›½å¯Œå›½é“¶è¡Œå®‰è£…åœ¨å—æžæ´²æœ€å¤§ç§‘å­¦ä¸­å¿ƒéº¦å…‹é»˜å¤šç«™çš„ä¸€å°è‡ªåŠ¨ææ¬¾æœºã€‚"}]},{role:"user",chatId:j(),comment:"",content:[{type:"text",data:"ç‰›é¡¿ç¬¬ä¸€å®šå¾‹æ˜¯å¦é€‚ç”¨äºŽæ‰€æœ‰å‚è€ƒç³»ï¼Ÿ"}]}],value:"",loading:!1,disabled:!1,inputStyle:"",contentHeight:"100vh",animation:"dots",chatIndex:"",activePopoverId:"",longPressPosition:null}},options:{styleIsolation:"shared"},mounted:function(){this.attached()},created:function(){},methods:{attached:function(){try{var t=W()||0,e="calc(100vh - 96rpx - ".concat(t,"px)");this.contentHeight=e,console.log("å†…å®¹åŒºåŸŸé«˜åº¦CSSè¡¨è¾¾å¼:",e)}catch(n){console.log("CatchClause",n),console.log("CatchClause",n),console.error("ç”Ÿæˆå†…å®¹é«˜åº¦è¡¨è¾¾å¼å¤±è´¥:",n),this.contentHeight="calc(100vh - 96rpx)"}},scrollToBottom:function(){var t=this.zpSelectComponent("#chatList");t&&"function"===typeof t.scrollToBottom&&t.scrollToBottom()},onScroll:function(t){console.log("ç›‘å¬æ»šåŠ¨",t)},onSend:function(t){var e=t.value;if(e&&""!==e.trim()){var n={role:"user",chatId:j(),content:[{type:"text",data:e.trim()}]};this.chatList=[n].concat((0,h.A)(this.chatList)),this.value="",this.simulateAssistantReply(e.trim())}},onStop:function(){this.loading=!1},onFocus:function(){console.log("è¾“å…¥æ¡†èšç„¦")},getCurrentTime:function(){var t=new Date,e=t.getHours().toString().padStart(2,"0"),n=t.getMinutes().toString().padStart(2,"0");return"".concat(e,":").concat(n)},simulateAssistantReply:function(){this.loading=!0;var t={role:"assistant",chatId:j(),comment:"",content:[{type:"markdown",data:""}],avatar:"https://tdesign.gtimg.com/site/chat-avatar.png",status:"pending"};this.chatList=[t].concat((0,h.A)(this.chatList));var e=this;this.$nextTick(function(){J(G,{success:function(t){e.chatList[0].status="streaming",e.loading&&(e.chatList[0].content[0].data+=t)},complete:function(){e.chatList[0].status="complete",e.loading=!1}})})},handleAction:function(t){var e=t.name,n=t.active,a=t.data,s=t.chatId,o="";switch(e){case"replay":o="é‡æ–°ç”Ÿæˆ";break;case"copy":console.log(a),o="å¤åˆ¶æˆåŠŸ";break;case"good":o=n?"ç‚¹èµžæˆåŠŸ":"å–æ¶ˆç‚¹èµž";break;case"bad":o=n?"ç‚¹è¸©æˆåŠŸ":"å–æ¶ˆç‚¹è¸©";break;case"share":o="åˆ†äº«åŠŸèƒ½";break;default:o="æ‰§è¡Œäº†".concat(e,"æ“ä½œ")}(0,U.Ay)({context:this,selector:"#t-toast",message:o,theme:"success"}),"good"!==e&&"bad"!==e||this.chatList.forEach(function(t){t.chatId===s&&(t.comment=n?e:"")})},showPopover:function(t){var e=t.id,n=t.longPressPosition,a="";this.chatList.forEach(function(t){t.chatId===e&&(a=t.role)}),"user"===a&&(this.activePopoverId=e,this.longPressPosition=n)},handlePopoverAction:function(t){t.chatId=this.activePopoverId,this.handleAction(t)}}},O=K,Q=(n(57094),(0,z.A)(O,d,u,!1,null,"7bb2d45c",null,!1,s,_)),X=Q.exports,Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"chat-box",style:"height: "+t.contentHeight+";"},[n("t-chat-list",{scopedSlots:t._u([{key:"footer",fn:function(){return[n("t-chat-sender",{attrs:{value:t.value,loading:t.loading,disabled:t.disabled,"render-presets":t.renderPresets,"auto-rise-with-keyboard":!0},on:{send:function(e){arguments[0]=e=t.$handleEvent(e),t.onSend.apply(void 0,arguments)},stop:function(e){arguments[0]=e=t.$handleEvent(e),t.onStop.apply(void 0,arguments)},focus:function(e){arguments[0]=e=t.$handleEvent(e),t.onFocus.apply(void 0,arguments)}}})]},proxy:!0}])},[t._l(t.chatList,function(e){return[n("t-chat-message",{key:e.key+"_0",attrs:{"chat-id":e.key,avatar:e.avatar||"",name:e.name||"",datetime:e.datetime||"",content:e.message.content,role:e.message.role,placement:"user"===e.message.role?"right":"left"},on:{"message-longpress":function(e){arguments[0]=e=t.$handleEvent(e),t.showPopover.apply(void 0,arguments)}},scopedSlots:t._u([{key:"actionbar",fn:function(){return[t.chatIndex!==t.chatList.length-1&&"complete"===e.message.status&&"assistant"===e.message.role?n("t-chat-actionbar",{attrs:{placement:"end"},on:{actions:function(e){arguments[0]=e=t.$handleEvent(e),t.handleAction.apply(void 0,arguments)}}}):t._e()]},proxy:!0}],null,!0)})]})],2),n("t-chat-actionbar",{ref:"popoverActionbar",staticClass:"popover-actionbar",attrs:{placement:"longpress","long-press-position":t.longPressPosition},on:{actions:function(e){arguments[0]=e=t.$handleEvent(e),t.handlePopoverAction.apply(void 0,arguments)}}})],1),n("t-toast",{ref:"t-toast"})],1)},tt=[],et=(n(52093),0),nt=function(){return et+=1,"key-".concat(et)},at={avatar:"https://tdesign.gtimg.com/site/chat-avatar.png",key:nt(),message:{role:"assistant",content:[{type:"thinking",status:"complete",data:{title:"æ€è€ƒä¸­",text:""}}]}},st="å—¯ï¼Œç”¨æˆ·é—®çš„æ˜¯å—æžçš„è‡ªåŠ¨ææ¬¾æœºå«ä»€ä¹ˆåå­—ã€‚è¿™ä¸ªé—®é¢˜æœ‰ç‚¹æœ‰è¶£ï¼Œå› ä¸ºå—æžæ˜¯ä¸€ä¸ªæžç«¯å¯’å†·çš„åœ°æ–¹ï¼Œè€Œä¸”å¤§éƒ¨åˆ†åœ°åŒºéƒ½æ˜¯æ— äººå±…ä½çš„ç§‘ç ”ç«™ã€‚\n",ot="\n\nå—æžçš„è‡ªåŠ¨ææ¬¾æœºå¹¶æ²¡æœ‰ä¸€ä¸ªç‰¹å®šçš„ä¸“å±žåç§°ï¼Œä½†åŽ†å²ä¸Šç¡®å®žæœ‰ä¸€å°ATMæœºæ›¾çŸ­æš‚å­˜åœ¨äºŽå—æžçš„**éº¦å…‹é»˜å¤šç«™**ï¼ˆMcMurdo Stationï¼‰ã€‚è¿™å°ATMç”±ç¾Žå›½**å¯Œå…°å…‹æž—å›½å®¶é“¶è¡Œ**ï¼ˆWells Fargoï¼‰äºŽ1998å¹´å®‰è£…ï¼Œä¸»è¦ä¾›é©»æ‰Žåœ¨è¯¥ç«™çš„ç§‘ç ”äººå‘˜ä½¿ç”¨ã€‚ä¸è¿‡ï¼Œç”±äºŽå—æžçš„æžç«¯çŽ¯å¢ƒå’Œæžä½Žçš„äººå£å¯†åº¦ï¼Œè¿™å°ATMæœºå¹¶æœªé•¿æœŸè¿è¡Œï¼Œæœ€ç»ˆè¢«ç§»é™¤ã€‚\n\n**èƒŒæ™¯è¡¥å……ï¼š**\n- **éº¦å…‹é»˜å¤šç«™**æ˜¯ç¾Žå›½åœ¨å—æžæœ€å¤§çš„ç§‘ç ”åŸºåœ°ï¼Œå¤å­£äººå£å¯è¾¾çº¦1,000äººï¼Œå†¬å­£çº¦200äººã€‚\n- è¯¥ATMæœºæ›´å¤šæ˜¯ä½œä¸ºä¸€ç§è±¡å¾æ€§æœåŠ¡å­˜åœ¨ï¼Œå®žé™…ä½¿ç”¨é¢‘çŽ‡æžä½Žï¼Œå› ä¸ºå—æžç§‘è€ƒäººå‘˜é€šå¸¸ä¾é é¢„æ”¯èµ„é‡‘æˆ–ç”µå­æ”¯ä»˜ã€‚\n- ç›®å‰å—æžå·²æ— é•¿æœŸè¿è¡Œçš„ATMæœºï¼ŒçŽ°ä»£ç§‘è€ƒç«™æ›´å¤šä¾èµ–éžçŽ°é‡‘äº¤æ˜“æ–¹å¼ã€‚\n\nå—æžä½œä¸ºéžä¸»æƒé¢†åœŸï¼Œå…¶åŸºç¡€è®¾æ–½ä»¥ç§‘ç ”å’Œç”Ÿæ´»æ”¯æŒä¸ºä¸»ï¼Œå•†ä¸šé‡‘èžæœåŠ¡éžå¸¸æœ‰é™ã€‚è‹¥æœ‰ç±»ä¼¼è®¾æ–½ï¼Œé€šå¸¸æ˜¯ä¸´æ—¶æˆ–å®žéªŒæ€§è´¨çš„ã€‚",it=function(t){return new Promise(function(e){return setTimeout(e,t)})},ct=function(){var t=(0,g.A)((0,p.A)().m(function t(e,n){var a,s,o,i,c,r;return(0,p.A)().w(function(t){while(1)switch(t.n){case 0:a=n.success,s=n.complete,o=n.delay,i=void 0===o?100:o,c=e.split(""),r=0;case 1:if(!(r<c.length)){t.n=4;break}return t.n=2,it(i);case 2:a(c[r]);case 3:r+=1,t.n=1;break;case 4:s();case 5:return t.a(2)}},t)}));return function(e,n){return t.apply(this,arguments)}}(),rt={components:{TChatMessage:v.A,TChatList:D,TChatSender:R.A,TChatActionbar:V.A,TToast:q.A},props:{isActive:{type:Boolean,default:!1}},data:function(){return{renderPresets:[{name:"send",type:"icon"}],chatList:[{avatar:"https://tdesign.gtimg.com/site/chat-avatar.png",key:nt(),message:{status:"complete",role:"assistant",content:[{type:"text",data:"å®ƒå« McMurdo Station ATMï¼Œæ˜¯ç¾Žå›½å¯Œå›½é“¶è¡Œå®‰è£…åœ¨å—æžæ´²æœ€å¤§ç§‘å­¦ä¸­å¿ƒéº¦å…‹é»˜å¤šç«™çš„ä¸€å°è‡ªåŠ¨ææ¬¾æœºã€‚"}]}},{message:{role:"user",content:[{type:"text",data:"ç‰›é¡¿ç¬¬ä¸€å®šå¾‹æ˜¯å¦é€‚ç”¨äºŽæ‰€æœ‰å‚è€ƒç³»ï¼Ÿ"}]},key:nt()}],value:"",loading:!1,disabled:!1,inputStyle:"",contentHeight:"100vh",chatIndex:"",activePopoverId:"",longPressPosition:null}},watch:{isActive:{handler:function(t){this.value=t?"å—æžçš„è‡ªåŠ¨ææ¬¾æœºå«ä»€ä¹ˆåå­—":""},immediate:!0}},mounted:function(){this.attached()},created:function(){},methods:{attached:function(){try{var t=W()||0,e="calc(100vh - 96rpx - ".concat(t,"px)");this.contentHeight=e,console.log("å†…å®¹åŒºåŸŸé«˜åº¦CSSè¡¨è¾¾å¼:",e)}catch(n){console.log("CatchClause",n),console.log("CatchClause",n),console.error("ç”Ÿæˆå†…å®¹é«˜åº¦è¡¨è¾¾å¼å¤±è´¥:",n),this.contentHeight="calc(100vh - 96rpx)"}},onSend:function(t){var e=t.value;if(e&&""!==e.trim()){var n={key:nt(),message:{role:"user",content:[{type:"text",data:e.trim()}]}};this.chatList=[n].concat((0,h.A)(this.chatList)),this.value="",this.simulateAssistantReply(e.trim())}},onStop:function(){console.log("åœæ­¢å‘é€"),this.loading=!1},onFocus:function(){console.log("è¾“å…¥æ¡†èšç„¦")},getCurrentTime:function(){var t=new Date,e=t.getHours().toString().padStart(2,"0"),n=t.getMinutes().toString().padStart(2,"0");return"".concat(e,":").concat(n)},simulateAssistantReply:function(){this.loading=!0;var t=at;this.chatList=[t].concat((0,h.A)(this.chatList));var e=this;this.$nextTick((0,g.A)((0,p.A)().m(function t(){return(0,p.A)().w(function(t){while(1)switch(t.n){case 0:return t.n=1,ct(st,{success:function(t){e.loading&&(e.chatList[0].message.content[0].data.text+=t)},complete:function(){e.chatList[0].message.content[0].data.title="æ€è€ƒå®Œæˆ"}});case 1:if(e.loading){t.n=2;break}return t.a(2);case 2:return e.chatList[0].message.content.push({type:"markdown",data:""}),t.n=3,ct(ot,{success:function(t){e.loading&&(e.chatList[0].message.content[1].data+=t)},complete:function(){e.chatList[0].message.status="complete",e.loading=!1}});case 3:return t.a(2)}},t)})))},handleAction:function(t){var e=t.name,n=t.active,a=t.data,s="";switch(e){case"replay":s="é‡æ–°ç”Ÿæˆ";break;case"copy":console.log(a),s="å¤åˆ¶æˆåŠŸ";break;case"good":s=n?"ç‚¹èµžæˆåŠŸ":"å–æ¶ˆç‚¹èµž";break;case"bad":s=n?"ç‚¹è¸©æˆåŠŸ":"å–æ¶ˆç‚¹è¸©";break;case"share":s="åˆ†äº«åŠŸèƒ½";break;default:s="æ‰§è¡Œäº†".concat(e,"æ“ä½œ")}(0,U.Ay)({context:this,selector:"#t-toast",message:s,theme:"success"})},showPopover:function(t){var e=t.id,n=t.longPressPosition,a="";this.chatList.forEach(function(t){t.key===e&&(a=t.message.role)}),"user"===a&&(this.activePopoverId=e,this.longPressPosition=n)},handlePopoverAction:function(t){t.chatId=this.activePopoverId,this.handleAction(t)}}},lt=rt,dt=(n(59931),(0,z.A)(lt,Z,tt,!1,null,"6a44b14b",null,!1,P,L)),ut=dt.exports,ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"chat-box",style:"height: "+t.contentHeight+";"},[n("t-chat-list",{scopedSlots:t._u([{key:"footer",fn:function(){return[n("t-chat-sender",{attrs:{value:t.value,loading:t.loading,disabled:t.disabled,"file-list":t.fileList,"attachments-props":t.attachmentsProps,"render-presets":t.renderPresets,"auto-rise-with-keyboard":!0},on:{send:function(e){arguments[0]=e=t.$handleEvent(e),t.onSend.apply(void 0,arguments)},stop:function(e){arguments[0]=e=t.$handleEvent(e),t.onStop.apply(void 0,arguments)},focus:function(e){arguments[0]=e=t.$handleEvent(e),t.onFocus.apply(void 0,arguments)},keyboardheightchange:function(e){arguments[0]=e=t.$handleEvent(e),t.onkeyboardheightchange.apply(void 0,arguments)},updateVisible:function(e){arguments[0]=e=t.$handleEvent(e),t.onUpdateVisible.apply(void 0,arguments)},fileDelete:function(e){arguments[0]=e=t.$handleEvent(e),t.onFileDelete.apply(void 0,arguments)},fileChange:function(e){arguments[0]=e=t.$handleEvent(e),t.onFileChange.apply(void 0,arguments)}},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}})]},proxy:!0}])},[t._l(t.chatList,function(e,a){return[n("t-chat-message",{key:e.key+"_0",attrs:{"chat-id":e.key,avatar:e.avatar||"",name:e.name||"",datetime:e.datetime||"",content:e.message.content,role:e.message.role,"chat-content-props":t.chatContentProps,placement:"user"===e.message.role?"right":"left"},on:{"message-longpress":function(e){arguments[0]=e=t.$handleEvent(e),t.showPopover.apply(void 0,arguments)}},scopedSlots:t._u([{key:"actionbar",fn:function(){return[a!==t.chatList.length-1&&"complete"===e.message.status&&"assistant"===e.message.role?n("t-chat-actionbar",{attrs:{"action-bar":t.customActionBar},on:{actions:function(e){arguments[0]=e=t.$handleEvent(e),t.handleAction.apply(void 0,arguments)}}}):t._e()]},proxy:!0}],null,!0)})]})],2),n("t-chat-actionbar",{ref:"popoverActionbar",staticClass:"popover-actionbar",attrs:{placement:"longpress","long-press-position":t.longPressPosition},on:{actions:function(e){arguments[0]=e=t.$handleEvent(e),t.handlePopoverAction.apply(void 0,arguments)}}})],1),n("t-toast",{ref:"t-toast"})],1)},pt=[],gt=n(70012),vt=(n(88803),n(81240),n(96466),0),mt=function(){return vt+=1,"key-".concat(vt)},ft="ðŸŒ¼å®å­ä»¬ï¼Œæ˜¥å¤©æ¥å•¦ï¼Œè¿™äº›æˆ·å¤–éƒŠæ¸¸æ‰“å¡åœ°ä½ å¿…é¡»çŸ¥é“ðŸ‘\n\nðŸŒŸéƒŠé‡Žå…¬å›­\nè¿™é‡Œæœ‰å¤§ç‰‡çš„è‰åœ°å’Œå„ç§èŠ±å‰ï¼Œéšä¾¿ä¸€æ‹éƒ½æ˜¯å¤§ç‰‡æ—¢è§†æ„ŸðŸ“·ã€‚è¿˜èƒ½æ”¾é£Žç­ã€é‡Žé¤ï¼Œäº«å—æƒ¬æ„çš„æ˜¥æ—¥æ—¶å…‰ã€‚\n\nðŸŒ³æ¤ç‰©å›­\nå„ç§çç¨€æ¤ç‰©æ±‡èšäºŽæ­¤ï¼Œä»¿ä½›ç½®èº«äºŽç»¿è‰²çš„æµ·æ´‹ã€‚æ¼«æ­¥å…¶ä¸­ï¼Œæ„Ÿå—å¤§è‡ªç„¶çš„ç¥žå¥‡ä¸Žç¾Žä¸½ã€‚\n\nðŸ’§æ¹–è¾¹æ¹¿åœ°\næ¹–æ°´æ¸…æ¾ˆï¼Œå‘¨å›´ç”Ÿæ€çŽ¯å¢ƒä¼˜è¶Šã€‚èƒ½çœ‹åˆ°å¾ˆå¤šå€™é¸Ÿå’Œæ°´ç”Ÿæ¤ç‰©ï¼Œæ˜¯äº²è¿‘è‡ªç„¶çš„å¥½åŽ»å¤„ã€‚\n\nå®å­ä»¬ï¼Œèµ¶ç´§æ”¶æ‹¾è¡Œå›Šï¼ŒåŽ»è¿™äº›åœ°æ–¹æ‰“å¡å§ðŸ˜œã€‚\n\n#æ˜¥å¤©éƒŠæ¸¸ #æ‰“å¡ç›®çš„åœ° #æˆ·å¤–ä¹‹æ—… #æ˜¥æ—¥ç¾Žæ™¯",yt=function(t){return new Promise(function(e){return setTimeout(e,t)})},bt=function(){var t=(0,g.A)((0,p.A)().m(function t(e,n){var a,s,o,i,c,r;return(0,p.A)().w(function(t){while(1)switch(t.n){case 0:a=n.success,s=n.complete,o=n.delay,i=void 0===o?100:o,c=e.split(""),r=0;case 1:if(!(r<c.length)){t.n=4;break}return t.n=2,yt(i);case 2:a(c[r]);case 3:r+=1,t.n=1;break;case 4:s();case 5:return t.a(2)}},t)}));return function(e,n){return t.apply(this,arguments)}}(),xt={components:{TChatMessage:v.A,TChatList:D,TChatSender:R.A,TChatActionbar:V.A,TToast:q.A},props:{isActive:{type:Boolean,default:!1}},data:function(){return{customActionBar:["copy","good","bad"],chatList:[{avatar:"https://tdesign.gtimg.com/site/chat-avatar.png",key:mt(),message:{role:"assistant",content:[{type:"text",data:"æ¬¢è¿Žä½¿ç”¨TDesignæ–‡æ¡ˆå†™ä½œåŠ©æ‰‹ï¼Œå¯ä»¥å…ˆä¸Šä¼ ä½ éœ€è¦å‚è€ƒçš„æ–‡ä»¶ï¼Œè¾“å…¥ä½ è¦æ’°å†™çš„ä¸»é¢˜~"}]}}],value:"",loading:!1,disabled:!1,inputStyle:"",attachmentsProps:{items:[],removable:!0,imageViewer:!0,addable:!1},renderPresets:[{name:"upload",presets:["uploadCamera","uploadImage","uploadAttachment"],status:""},{name:"send",type:"icon"}],fileList:[],visible:!1,chatContentProps:{thinking:{maxHeight:100,collapsed:!0}},contentHeight:"100vh",chatIndex:0,activePopoverId:"",longPressPosition:null}},watch:{isActive:{handler:function(t){var e=this;setTimeout(function(){e.value=t?"æ ¹æ®æ‰€æä¾›çš„ææ–™æ€»ç»“ä¸€ç¯‡æ–‡ç« ï¼ŒæŽ¨èæ˜¥å¤©æˆ·å¤–éƒŠæ¸¸æ‰“å¡ç›®çš„åœ°ï¼Œéœ€è¦ç¬¦åˆå°çº¢ä¹¦å¹³å°å†™ä½œé£Žæ ¼":""},30)},immediate:!0}},mounted:function(){this.attached()},created:function(){},methods:{attached:function(){try{var t=W()||0,e="calc(100vh - 96rpx - ".concat(t,"px)");this.contentHeight=e,console.log("å†…å®¹åŒºåŸŸé«˜åº¦CSSè¡¨è¾¾å¼:",e)}catch(n){console.log("CatchClause",n),console.log("CatchClause",n),console.error("ç”Ÿæˆå†…å®¹é«˜åº¦è¡¨è¾¾å¼å¤±è´¥:",n),this.contentHeight="calc(100vh - 96rpx)"}},onSend:function(t){var e=t.value;if(e&&""!==e.trim()){var n=[{type:"text",data:e.trim()}],a=this.attachmentsProps.items.map(function(t){return(0,gt.A)((0,gt.A)({},t),{},{status:"success"})});n.unshift({type:"attachment",data:a}),this.attachmentsProps=(0,gt.A)((0,gt.A)({},this.attachmentsProps),{},{items:[]}),this.fileList=[];var s={key:mt(),message:{role:"user",content:n}};this.chatList=[s].concat((0,h.A)(this.chatList)),this.value="",this.simulateAssistantReply(e.trim())}},onStop:function(){console.log("åœæ­¢å‘é€"),this.loading=!1},onFocus:function(){console.log("è¾“å…¥æ¡†èšç„¦")},onUpdateVisible:function(t){var e=t;console.log("ä¸Šä¼ é¢æ¿æ˜¾ç¤ºçŠ¶æ€:",e),this.visible=e},onFileDelete:function(){this.attachmentsProps=(0,gt.A)((0,gt.A)({},this.attachmentsProps),{},{items:[]})},onFileChange:function(t){var e=t.files;this.attachmentsProps=(0,gt.A)((0,gt.A)({},this.attachmentsProps),{},{items:e}),this.fileList=e},simulateAssistantReply:function(){this.loading=!0;var t={avatar:"https://tdesign.gtimg.com/site/chat-avatar.png",key:mt(),message:{role:"assistant",content:[{type:"markdown",data:""}]}};this.chatList=[t].concat((0,h.A)(this.chatList));var e=this;this.$nextTick(function(){bt(ft,{success:function(t){e.loading&&(e.chatList[0].message.content[0].data+=t)},complete:function(){e.chatList[0].message.status="complete",e.loading=!1}})})},handleAction:function(t){var e=t.name,n=t.active,a=t.data,s="";switch(e){case"replay":s="é‡æ–°ç”Ÿæˆ";break;case"copy":console.log(a),s="å¤åˆ¶æˆåŠŸ";break;case"good":s=n?"ç‚¹èµžæˆåŠŸ":"å–æ¶ˆç‚¹èµž";break;case"bad":s=n?"ç‚¹è¸©æˆåŠŸ":"å–æ¶ˆç‚¹è¸©";break;case"share":s="åˆ†äº«åŠŸèƒ½";break;default:s="æ‰§è¡Œäº†".concat(e,"æ“ä½œ")}(0,U.Ay)({context:this,selector:"#t-toast",message:s,theme:"success"})},showPopover:function(t){var e=t.id,n=t.longPressPosition,a="";this.chatList.forEach(function(t){t.key===e&&(a=t.message.role)}),"user"===a&&(this.activePopoverId=e,this.longPressPosition=n)},handlePopoverAction:function(t){t.chatId=this.activePopoverId,this.handleAction(t)},onkeyboardheightchange:function(){console.log("å ä½ï¼šå‡½æ•° onkeyboardheightchange æœªå£°æ˜Ž")}}},At=xt,kt=(n(41736),(0,z.A)(At,ht,pt,!1,null,"180dd0d4",null,!1,T,C)),wt=kt.exports,_t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"chat-box image-chat",style:"height: "+t.contentHeight+";"},[n("t-chat-list",{scopedSlots:t._u([{key:"footer",fn:function(){return[n("t-chat-sender",{attrs:{value:t.value,loading:t.loading,disabled:t.disabled,"render-presets":t.renderPresets,"auto-rise-with-keyboard":!0},on:{send:function(e){arguments[0]=e=t.$handleEvent(e),t.onSend.apply(void 0,arguments)},stop:function(e){arguments[0]=e=t.$handleEvent(e),t.onStop.apply(void 0,arguments)},focus:function(e){arguments[0]=e=t.$handleEvent(e),t.onFocus.apply(void 0,arguments)}}})]},proxy:!0}])},[t._l(t.chatList,function(e,a){return[n("t-chat-message",{key:e.key+"_0",attrs:{"chat-id":e.key,avatar:e.avatar||"",name:e.name||"",datetime:e.datetime||"",role:e.message.role,placement:"user"===e.message.role?"right":"left"},on:{"message-longpress":function(e){arguments[0]=e=t.$handleEvent(e),t.showPopover.apply(void 0,arguments)}},scopedSlots:t._u([{key:"content",fn:function(){return["user"===e.message.role?n("v-uni-view",[t._l(e.message.content,function(e,a){return["text"===e.type||"markdown"===e.type?n("t-chat-content",{key:a+"_0",attrs:{content:e}}):t._e()]})],2):n("v-uni-view",{staticStyle:{width:"100%"}},[t._l(e.message.content,function(t,e){return["text"===t.type||"markdown"===t.type?n("t-chat-content",{key:e+"_0",attrs:{content:t}}):n("v-uni-view",{staticClass:"attachment-slide"},[n("t-attachments",{attrs:{items:t.data,"in-chat":!0,removable:!1}})],1)]})],2)]},proxy:!0},{key:"actionbar",fn:function(){return[a!==t.chatList.length-1&&"complete"===e.message.status&&"assistant"===e.message.role?n("t-chat-actionbar",{attrs:{placement:"end"},on:{actions:function(e){arguments[0]=e=t.$handleEvent(e),t.handleAction.apply(void 0,arguments)}}}):t._e()]},proxy:!0}],null,!0)})]})],2),n("t-chat-actionbar",{ref:"popoverActionbar",staticClass:"popover-actionbar",attrs:{placement:"longpress","long-press-position":t.longPressPosition},on:{actions:function(e){arguments[0]=e=t.$handleEvent(e),t.handlePopoverAction.apply(void 0,arguments)}}})],1),n("t-toast",{ref:"t-toast"})],1)},Pt=[],Lt=n(15690),Tt=n(45932),Ct=0,St=function(){return Ct+=1,"key-".concat(Ct)},It=function(t){return new Promise(function(e){return setTimeout(e,t)})},Mt=function(){var t=(0,g.A)((0,p.A)().m(function t(e,n){var a,s,o,i,c,r;return(0,p.A)().w(function(t){while(1)switch(t.n){case 0:a=n.success,s=n.complete,o=n.delay,i=void 0===o?100:o,c=e.split(""),r=0;case 1:if(!(r<c.length)){t.n=4;break}return t.n=2,It(i);case 2:a(c[r]);case 3:r+=1,t.n=1;break;case 4:s();case 5:return t.a(2)}},t)}));return function(e,n){return t.apply(this,arguments)}}(),Et={components:{TChatMessage:v.A,TChatContent:Lt.A,TChatList:D,TChatSender:R.A,TChatActionbar:V.A,TToast:q.A,TAttachments:Tt.A},props:{isActive:{type:Boolean,default:!1}},data:function(){return{renderPresets:[{name:"send",type:"icon"}],customActionBar:["good","bad"],chatList:[{avatar:"https://tdesign.gtimg.com/site/chat-avatar.png",key:St(),message:{role:"assistant",content:[{type:"text",data:"æ¬¢è¿Žä½¿ç”¨TDesignæ™ºèƒ½ç”Ÿå›¾åŠ©æ‰‹ï¼Œè¯·å…ˆå†™ä¸‹ä½ çš„åˆ›æ„ï¼Œå¯ä»¥è¯•è¯•ä¸Šä¼ å‚è€ƒå›¾å“¦ï½ž"}]}}],value:"",loading:!1,disabled:!1,inputStyle:"",attachmentsProps:{items:[],removable:!0,imageViewer:!0,addable:!1},contentHeight:"100vh",chatIndex:0,contentIndex:0,contentItem:{type:"",data:""},activePopoverId:"",longPressPosition:null}},options:{styleIsolation:"shared"},watch:{isActive:{handler:function(t){this.value=t?"è¯·ä¸ºTdesignè®¾è®¡ä¸‰å¼ å“ç‰Œå®£ä¼ å›¾":""},immediate:!0}},mounted:function(){this.attached()},created:function(){},methods:{attached:function(){try{var t=W()||0,e="calc(100vh - 96rpx - ".concat(t,"px)");this.contentHeight=e,console.log("å†…å®¹åŒºåŸŸé«˜åº¦CSSè¡¨è¾¾å¼:",e)}catch(n){console.log("CatchClause",n),console.log("CatchClause",n),console.error("ç”Ÿæˆå†…å®¹é«˜åº¦è¡¨è¾¾å¼å¤±è´¥:",n),this.contentHeight="calc(100vh - 96rpx)"}},onSend:function(t){var e=t.value;if(e&&""!==e.trim()){var n={key:St(),message:{role:"user",content:[{type:"text",data:e.trim()}]}};this.chatList=[n].concat((0,h.A)(this.chatList)),this.value="",this.simulateAssistantReply(e.trim())}},onStop:function(){console.log("åœæ­¢å‘é€"),this.loading=!1},onFocus:function(){console.log("è¾“å…¥æ¡†èšç„¦")},onUpdateVisible:function(){var t=this;uni.chooseMessageFile({count:1,type:"file",success:function(e){var n=e.tempFiles[0];console.log("é€‰æ‹©çš„æ–‡ä»¶ä¿¡æ¯ï¼š",n);var a={fileType:"doc",name:n.name,url:n.path,size:n.size,status:"success"};this.attachmentsProps=(0,gt.A)((0,gt.A)({},t.attachmentsProps),{},{items:[a]})},fail:function(t){console.error("é€‰æ‹©æ–‡ä»¶å¤±è´¥ï¼š",t)}})},simulateAssistantReply:function(){this.loading=!0;var t={avatar:"https://tdesign.gtimg.com/site/chat-avatar.png",key:St(),message:{role:"assistant",content:[{type:"markdown",data:""}]}};this.chatList=[t].concat((0,h.A)(this.chatList));var e=this;this.$nextTick((0,g.A)((0,p.A)().m(function t(){return(0,p.A)().w(function(t){while(1)switch(t.n){case 0:return t.n=1,Mt("æŽ¥ä¸‹æ¥æˆ‘å°†ç”Ÿæˆç¬¦åˆè¦æ±‚çš„å›¾ç‰‡",{success:function(t){e.loading&&(e.chatList[0].message.content[0].data+=t)},complete:function(){}});case 1:if(e.loading){t.n=2;break}return t.a(2);case 2:e.chatList[0].message.content.push({type:"imageview",status:"complete",data:[{name:"sample1.png",url:"https://tdesign.gtimg.com/site/square.png",fileType:"image",status:"success",size:1032,width:128,height:128},{name:"sample2.png",url:"https://tdesign.gtimg.com/site/square.png",fileType:"image",status:"success",size:1032,width:128,height:128},{name:"sample3.png",url:"https://tdesign.gtimg.com/site/square.png",fileType:"image",status:"success",size:1032,width:128,height:128},{name:"sample4.png",url:"https://tdesign.gtimg.com/site/square.png",fileType:"image",status:"success",size:1032,width:128,height:128},{name:"sample5.png",url:"https://tdesign.gtimg.com/site/square.png",fileType:"image",status:"success",size:1032,width:128,height:128}]}),e.chatList[0].message.status="complete",e.loading=!1;case 3:return t.a(2)}},t)})))},handleAction:function(t){var e=t.name,n=t.active,a=t.data;console.log("[handleAction]",e);var s="";switch(e){case"replay":s="é‡æ–°ç”Ÿæˆ";break;case"copy":console.log(a),s="å¤åˆ¶æˆåŠŸ";break;case"good":s=n?"ç‚¹èµžæˆåŠŸ":"å–æ¶ˆç‚¹èµž";break;case"bad":s=n?"ç‚¹è¸©æˆåŠŸ":"å–æ¶ˆç‚¹è¸©";break;case"share":s="åˆ†äº«åŠŸèƒ½";break;default:s="æ‰§è¡Œäº†".concat(e,"æ“ä½œ")}(0,U.Ay)({context:this,selector:"#t-toast",message:s,theme:"success"})},showPopover:function(t){var e=t.id,n=t.longPressPosition,a="";this.chatList.forEach(function(t){t.key===e&&(a=t.message.role)}),"user"===a&&(this.activePopoverId=e,this.longPressPosition=n)},handlePopoverAction:function(t){t.chatId=this.activePopoverId,this.handleAction(t)}}},$t=Et,Ht=(n(32615),(0,z.A)($t,_t,Pt,!1,null,"7f0e3566",null,!1,S,I)),Ft=Ht.exports,zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"chat-box",style:"height: "+t.contentHeightClone+";"},[n("t-chat-list",{scopedSlots:t._u([{key:"footer",fn:function(){return[n("t-chat-sender",{attrs:{value:t.value,loading:t.loading,disabled:t.disabled,"render-presets":t.renderPresets,"auto-rise-with-keyboard":!0},on:{send:function(e){arguments[0]=e=t.$handleEvent(e),t.onSend.apply(void 0,arguments)},stop:function(e){arguments[0]=e=t.$handleEvent(e),t.onStop.apply(void 0,arguments)},focus:function(e){arguments[0]=e=t.$handleEvent(e),t.onFocus.apply(void 0,arguments)}}})]},proxy:!0}])},[t._l(t.chatList,function(e,a){return[n("t-chat-message",{key:e.key+"_0",attrs:{"chat-id":e.key,avatar:e.avatar||"",name:e.name||"",datetime:e.datetime||"",role:e.message.role,placement:"user"===e.message.role?"right":"left"},on:{"message-longpress":function(e){arguments[0]=e=t.$handleEvent(e),t.showPopover.apply(void 0,arguments)}},scopedSlots:t._u([{key:"content",fn:function(){return[t._l(e.message.content,function(a,s){return["text"===a.type||"markdown"===a.type?n("t-chat-content",{key:s+"_0",attrs:{content:a,role:e.message.role}}):t._e(),"agent"===a.type?n("v-uni-view",{key:s+"_1",staticClass:"step"},[n("t-steps",{attrs:{layout:"vertical",current:a.content.steps.length}},t._l(a.content.steps,function(e,a){return n("t-step-item",{key:a,attrs:{title:e.step},scopedSlots:t._u([{key:"content",fn:function(){return[n("v-uni-view",{staticClass:"step-text-list"},t._l(e.tasks,function(e,a){return n("v-uni-view",{key:a,class:"step-text "+e.type},["command"===e.type?n("t-icon",{attrs:{name:"control-platform",size:"32rpx","t-class":"step-icon"}}):t._e(),t._v(" "+t._s(e.text)+" ")],1)}),1)]},proxy:!0}],null,!0)})}),1)],1):t._e()]})]},proxy:!0},{key:"actionbar",fn:function(){return[a!==t.chatList.length-1&&"complete"===e.message.status&&"assistant"===e.message.role?n("t-chat-actionbar",{attrs:{placement:"end"},on:{actions:function(e){arguments[0]=e=t.$handleEvent(e),t.handleAction.apply(void 0,arguments)}}}):t._e()]},proxy:!0}],null,!0)})]})],2),n("t-chat-actionbar",{ref:"popoverActionbar",staticClass:"popover-actionbar",attrs:{placement:"longpress","long-press-position":t.longPressPosition},on:{actions:function(e){arguments[0]=e=t.$handleEvent(e),t.handlePopoverAction.apply(void 0,arguments)}}})],1),n("t-toast",{ref:"t-toast"})],1)},Bt=[],Dt=n(44647),Rt=n(70930),Vt=n(4993),qt=0,Ut=function(){return qt+=1,"key-".concat(qt)},Wt=function(t){return new Promise(function(e){return setTimeout(e,t)})},Yt=function(){var t=(0,g.A)((0,p.A)().m(function t(e,n){var a,s,o,i,c,r;return(0,p.A)().w(function(t){while(1)switch(t.n){case 0:a=n.success,s=n.complete,o=n.delay,i=void 0===o?100:o,c=e.split(""),r=0;case 1:if(!(r<c.length)){t.n=4;break}return t.n=2,Wt(i);case 2:a(c[r]);case 3:r+=1,t.n=1;break;case 4:s();case 5:return t.a(2)}},t)}));return function(e,n){return t.apply(this,arguments)}}(),jt={components:{TChatMessage:v.A,TChatContent:Lt.A,TChatList:D,TChatSender:R.A,TChatActionbar:V.A,TSteps:Dt.A,TStepItem:Rt.A,TIcon:Vt.A,TToast:q.A},props:{contentHeight:{type:String,default:"100vh"},isActive:{type:Boolean,default:!1}},data:function(){return{renderPresets:[{name:"send",type:"icon"}],chatList:[{avatar:"https://tdesign.gtimg.com/site/chat-avatar.png",key:Ut(),message:{role:"assistant",content:[{type:"text",data:"æ¬¢è¿Žä½¿ç”¨TDesign Agentå®¶åº­æ´»åŠ¨ç­–åˆ’åŠ©æ‰‹ï¼Œè¯·ç»™æˆ‘å¸ƒç½®ä»»åŠ¡å§ï½ž"}]}}],value:"",loading:!1,disabled:!1,inputStyle:"",chatIndex:0,contentIndex:0,contentItem:{type:"",content:{steps:[]}},taskItem:{type:""},contentHeightClone:"",activePopoverId:"",longPressPosition:null}},options:{styleIsolation:"shared"},watch:{isActive:{handler:function(t){this.value=t?"è¯·å¸®æˆ‘åšä¸€ä¸ª5å²å„¿ç«¥ç”Ÿæ—¥èšä¼šçš„è§„åˆ’":""},immediate:!0},contentHeight:{handler:function(t){this.contentHeightClone=t},immediate:!0}},mounted:function(){this.attached()},created:function(){},methods:{attached:function(){try{var t=W()||0,e="calc(100vh - 96rpx - ".concat(t,"px)");this.contentHeightClone=e,console.log("å†…å®¹åŒºåŸŸé«˜åº¦CSSè¡¨è¾¾å¼:",e)}catch(n){console.log("CatchClause",n),console.log("CatchClause",n),console.error("ç”Ÿæˆå†…å®¹é«˜åº¦è¡¨è¾¾å¼å¤±è´¥:",n),this.contentHeightClone="calc(100vh - 96rpx)"}},onSend:function(t){var e=t.value;if(e&&""!==e.trim()){var n={key:Ut(),message:{role:"user",content:[{type:"text",data:e.trim()}]}};this.chatList=[n].concat((0,h.A)(this.chatList)),this.value="",this.simulateAssistantReply(e.trim())}},onStop:function(){console.log("åœæ­¢å‘é€"),this.loading=!1},onFocus:function(){console.log("è¾“å…¥æ¡†èšç„¦")},simulateAssistantReply:function(){this.loading=!0;var t={avatar:"https://tdesign.gtimg.com/site/chat-avatar.png",key:Ut(),message:{role:"assistant",content:[{type:"markdown",data:""}]}};this.chatList=[t].concat((0,h.A)(this.chatList));var e=this;this.$nextTick((0,g.A)((0,p.A)().m(function t(){return(0,p.A)().w(function(t){while(1)switch(t.n){case 0:return t.n=1,Yt("ä¸º5å²å°æœ‹å‹å‡†å¤‡ä¸€åœºç”Ÿæ—¥æ´¾å¯¹ï¼Œæˆ‘ä¼šæ ¹æ®è¦æ±‚å‡†å¤‡åˆé€‚æ–¹æ¡ˆï¼Œè®¡åˆ’ä»Žä»¥ä¸‹å‡ ä¸ªæ­¥éª¤è¿›è¡Œå‡†å¤‡ï¼š",{success:function(t){e.loading&&(e.chatList[0].message.content[0].data+=t)},complete:function(){}});case 1:if(e.loading){t.n=2;break}return t.a(2);case 2:return e.chatList[0].message.content.push({type:"agent",id:"task1",content:{text:"",steps:[]}}),t.n=3,Yt("ç”Ÿæ—¥èšä¼šè§„åˆ’ä»»åŠ¡å·²åˆ†è§£ä¸º3ä¸ªæ‰§è¡Œé˜¶æ®µ",{success:function(t){e.loading&&(e.chatList[0].message.content[1].content.text+=t)},complete:function(){}});case 3:if(e.loading){t.n=4;break}return t.a(2);case 4:return e.chatList[0].message.content[1].content.steps.push({step:"ç¡®å®šæ´¾å¯¹é¤é¥®æ–¹æ¡ˆ",agent_id:"a1",tasks:[{type:"command",text:""}],status:"finish"}),t.n=5,Yt("è°ƒç”¨æ™ºèƒ½æœç´¢å·¥å…·",{success:function(t){e.loading&&(e.chatList[0].message.content[1].content.steps[0].tasks[0].text+=t)},complete:function(){}});case 5:if(e.loading){t.n=6;break}return t.a(2);case 6:return e.chatList[0].message.content[1].content.steps[0].tasks.push({type:"command",text:""}),t.n=7,Yt("å·²ç­›é€‰å‡º3ç§é«˜æ€§ä»·æ¯”èœå•æ–¹æ¡ˆï¼Œå¼€å§‹è¿›è¡Œè¥å…»åŒ¹é…",{success:function(t){e.loading&&(e.chatList[0].message.content[1].content.steps[0].tasks[1].text+=t)},complete:function(){}});case 7:if(e.loading){t.n=8;break}return t.a(2);case 8:return e.chatList[0].message.content[1].content.steps[0].tasks.push({type:"result",text:""}),t.n=9,Yt("ä¸»èœæ˜¯é¦™è‰çƒ¤é¸¡ï¼ˆæ— éº¸è´¨ï¼‰ï¼Œå‡†å¤‡è€—æ—¶45åˆ†é’Ÿï¼›",{success:function(t){e.loading&&(e.chatList[0].message.content[1].content.steps[0].tasks[2].text+=t)},complete:function(){}});case 9:if(e.loading){t.n=10;break}return t.a(2);case 10:return e.chatList[0].message.content[1].content.steps.push({step:"å‡†å¤‡æ´¾å¯¹çŽ°åœºå¸ƒç½®",agent_id:"a2",tasks:[{type:"command",text:""}],status:"finish"}),t.n=11,Yt("è°ƒç”¨æ™ºèƒ½æœç´¢å·¥å…·ï¼Œæœç´¢å„¿ç«¥æ´¾å¯¹ç”¨å“æ¸…å•",{success:function(t){e.loading&&(e.chatList[0].message.content[1].content.steps[1].tasks[0].text+=t)},complete:function(){}});case 11:if(e.loading){t.n=12;break}return t.a(2);case 12:return e.chatList[0].message.content[1].content.steps[1].tasks.push({type:"result",text:""}),t.n=13,Yt("æŽ¨èçŽ°åœºå¸ƒç½®æ–¹æ¡ˆï¼šé¤å…·ï¼ˆä¸€æ¬¡æ€§çº¸ç›˜ã€åˆ€å‰å¥—è£…ï¼‰ã€æ¯å­ã€çº¸å·¾ã€ä¸€æ¬¡æ€§æ¡Œå¸ƒï¼Œè£…é¥°æ°”çƒã€æ¨ªå¹…ã€ç¤¼å¸½ç­‰",{success:function(t){e.loading&&(e.chatList[0].message.content[1].content.steps[1].tasks[1].text+=t)},complete:function(){}});case 13:if(e.loading){t.n=14;break}return t.a(2);case 14:return e.chatList[0].message.content[1].content.steps.push({step:"ç­–åˆ’æ´¾å¯¹æ´»åŠ¨",agent_id:"a1",tasks:[{type:"command",text:""}],status:"finish"}),t.n=15,Yt("æœç´¢å„¿ç«¥æ´¾å¯¹æ¸¸æˆ",{success:function(t){e.loading&&(e.chatList[0].message.content[1].content.steps[2].tasks[0].text+=t)},complete:function(){}});case 15:if(e.loading){t.n=16;break}return t.a(2);case 16:return e.chatList[0].message.content[1].content.steps[2].tasks.push({type:"command",text:""}),t.n=17,Yt("æ•´ç†ä¿¡æ¯å¹¶è¿›è¡Œåˆç†æ€§åˆ†æžï¼Œå®‰å…¨æ€§è¯„ä¼°",{success:function(t){e.loading&&(e.chatList[0].message.content[1].content.steps[2].tasks[1].text+=t)},complete:function(){}});case 17:if(e.loading){t.n=18;break}return t.a(2);case 18:return e.chatList[0].message.content[1].content.steps[2].tasks.push({type:"result",text:""}),t.n=19,Yt("æ´¾å¯¹æ€»æ—¶é•¿å»ºè®®æŽ§åˆ¶åœ¨1.5å°æ—¶ï¼Œç¬¦åˆ5å²å„¿ç«¥æ³¨æ„åŠ›æŒç»­æ—¶é—´ï¼Œæ¯ä½å°æœ‹å‹åˆ°è¾¾æ—¶å¯ä»¥åœ¨æ‹ç…§åŒºç•™å½±ï¼Œå¯è®¾ç½®ä¸€ä¸ªç­¾åˆ°",{success:function(t){e.loading&&(e.chatList[0].message.content[1].content.steps[2].tasks[2].text+=t)},complete:function(){}});case 19:e.chatList[0].message.status="complete",e.loading=!1;case 20:return t.a(2)}},t)})))},handleAction:function(t){var e=t.name,n=t.active,a=t.data,s="";switch(e){case"replay":s="é‡æ–°ç”Ÿæˆ";break;case"copy":console.log(a),s="å¤åˆ¶æˆåŠŸ";break;case"good":s=n?"ç‚¹èµžæˆåŠŸ":"å–æ¶ˆç‚¹èµž";break;case"bad":s=n?"ç‚¹è¸©æˆåŠŸ":"å–æ¶ˆç‚¹è¸©";break;case"share":s="åˆ†äº«åŠŸèƒ½";break;default:s="æ‰§è¡Œäº†".concat(e,"æ“ä½œ")}(0,U.Ay)({context:this,selector:"#t-toast",message:s,theme:"success"})},showPopover:function(t){var e=t.id,n=t.longPressPosition,a="";this.chatList.forEach(function(t){t.key===e&&(a=t.message.role)}),"user"===a&&(this.activePopoverId=e,this.longPressPosition=n)},handlePopoverAction:function(t){t.chatId=this.activePopoverId,this.handleAction(t)}}},Gt=jt,Nt=(n(86924),(0,z.A)(Gt,zt,Bt,!1,null,"4972766b",null,!1,M,E)),Jt=Nt.exports,Kt={components:{tTabs:r.A,tTabPanel:l.A,BaseDemo:X,HookComponent:ut,DocsDemo:wt,ImageDemo:Ft,AgentDemo:Jt},data:function(){return{value:0}},options:{styleIsolation:"shared"},methods:{onTabsChange:function(t){this.value=t.value}}},Ot=Kt,Qt=(n(51441),(0,z.A)(Ot,i,c,!1,null,"57f8077e",null,!1,a,$)),Xt=Qt.exports},11361:function(t,e,n){"use strict";n.r(e);var a=n(22093),s=n.n(a),o=n(12670),i=n.n(o),c=i()(s());c.push([t.id,".chat-box[data-v-4972766b]{padding-top:%?32?%;box-sizing:border-box}.t-chat__list[data-v-4972766b]{padding:0 0 0 %?32?%;box-sizing:border-box}.t-chat-message[data-v-4972766b]{padding:0 %?32?%}.preview[data-v-4972766b]{padding:%?16?%;display:flex;justify-content:space-between;border:1px solid var(--td-component-border)}.step[data-v-4972766b]{padding-top:%?24?%}.step-text-list[data-v-4972766b]{display:flex;flex-direction:column;gap:%?16?%}.step-text[data-v-4972766b]{text-align:start}.step-text.command[data-v-4972766b]{padding:%?16?%;border-radius:%?16?%;background-color:var(--td-bg-color-secondarycontainer);display:flex;font-size:%?28?%;line-height:%?44?%;color:var(--td-text-color-secondary)}.step-text.result[data-v-4972766b]{font-size:%?28?%;line-height:%?44?%;color:var(--td-text-color-primary)}.chat-box[data-v-4972766b]  .step-icon{margin-right:%?12?%;margin-top:%?6?%}.chat-box[data-v-4972766b]  .t-steps-item__circle--finish{background-color:initial;color:var(--td-text-color-primary);border:1px solid var(--td-text-color-primary);width:16px;height:16px}.chat-box[data-v-4972766b]  .t-steps-item__circle--finish .t-icon{font-size:12px}.chat-box[data-v-4972766b]  .t-steps-item__line--finish{background-color:var(--td-component-border)}.chat-box[data-v-4972766b]  .t-steps-item__title--finish{color:var(--td-text-color-primary);font-weight:600}",""]),e["default"]=c},13336:function(t,e,n){"use strict";var a=n(58638);t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(a)},16336:function(t,e,n){"use strict";var a=n(7463),s=n(34277),o=n(95428),i=n(34862),c=n(90011),r=a(i),l=a("".slice),d=Math.ceil,u=function(t){return function(e,n,a){var i,u,h=o(c(e)),p=s(n),g=h.length,v=void 0===a?" ":o(a);return p<=g||""===v?h:(i=p-g,u=r(v,d(i/v.length)),u.length>i&&(u=l(u,0,i)),t?h+u:u+h)}};t.exports={start:u(!1),end:u(!0)}},18713:function(t,e,n){"use strict";n.r(e);var a=n(22093),s=n.n(a),o=n(12670),i=n.n(o),c=i()(s());c.push([t.id,".chat-box[data-v-7bb2d45c]{padding-top:%?32?%;box-sizing:border-box}.t-chat__list[data-v-7bb2d45c]{padding:0 0 0 %?32?%;box-sizing:border-box}.t-chat-message[data-v-7bb2d45c]{padding:0 %?32?%}",""]),e["default"]=c},27780:function(t,e,n){"use strict";n.r(e);var a=n(22093),s=n.n(a),o=n(12670),i=n.n(o),c=i()(s());c.push([t.id,".chat-box[data-v-6a44b14b]{padding-top:%?32?%;box-sizing:border-box}.t-chat__list[data-v-6a44b14b]{padding:0 0 0 %?32?%;box-sizing:border-box}.t-chat-message[data-v-6a44b14b]{padding:0 %?32?%}",""]),e["default"]=c},32615:function(t,e,n){var a=n(47177);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);var s=n(31997).A;s("8a92d50c",a,!0,{sourceMap:!1,shadowMode:!1})},34862:function(t,e,n){"use strict";var a=n(62782),s=n(95428),o=n(90011),i=RangeError;t.exports=function(t){var e=s(o(this)),n="",c=a(t);if(c<0||c===1/0)throw new i("Wrong number of repetitions");for(;c>0;(c>>>=1)&&(e+=e))1&c&&(n+=e);return n}},41736:function(t,e,n){var a=n(97759);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);var s=n(31997).A;s("ba2767ba",a,!0,{sourceMap:!1,shadowMode:!1})},47177:function(t,e,n){"use strict";n.r(e);var a=n(22093),s=n.n(a),o=n(12670),i=n.n(o),c=i()(s());c.push([t.id,".chat-box[data-v-7f0e3566]{padding-top:%?32?%;box-sizing:border-box}.image-chat .t-chat__list[data-v-7f0e3566]{padding:0 0 0 0;box-sizing:border-box}.t-chat-message[data-v-7f0e3566]{padding:0 %?32?%}.image-chat .assistant[data-v-7f0e3566],\n.image-chat .assistant .t-chat__detail[data-v-7f0e3566]{width:100%}.image-chat .assistant .t-chat-content[data-v-7f0e3566]{padding-right:%?64?%!important}.attachment-slide[data-v-7f0e3566]{height:calc(128px + %?24?%);width:100%}.attachment-slide .t-attachments[data-v-7f0e3566]{padding-top:%?24?%;box-sizing:border-box;position:fixed;z-index:2;left:0;right:0}[data-v-7f0e3566] .attachment-slide .t-attachments .t-attachments__files:first-child{padding-left:%?120?%}[data-v-7f0e3566] .attachment-slide .t-attachments .t-attachments__files:last-child{padding-right:%?96?%}.image-chat .t-chat-message__actionbar[data-v-7f0e3566]{--chat-actionbar-padding:%?16?% 0 0 0!important}",""]),e["default"]=c},50123:function(t,e,n){"use strict";var a=n(52439),s=n(16336).start,o=n(13336);a({target:"String",proto:!0,forced:o},{padStart:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},51352:function(t,e,n){"use strict";n.r(e);var a=n(22093),s=n.n(a),o=n(12670),i=n.n(o),c=i()(s());c.push([t.id,"uni-page-body[data-v-57f8077e]{background-color:var(--td-bg-color-container)}body.?%PAGE?%[data-v-57f8077e]{background-color:var(--td-bg-color-container)}.demo[data-v-57f8077e]{padding-bottom:0}",""]),e["default"]=c},51441:function(t,e,n){var a=n(51352);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);var s=n(31997).A;s("5bec8ad4",a,!0,{sourceMap:!1,shadowMode:!1})},57094:function(t,e,n){var a=n(18713);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);var s=n(31997).A;s("8eaeb20a",a,!0,{sourceMap:!1,shadowMode:!1})},59931:function(t,e,n){var a=n(27780);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);var s=n(31997).A;s("46a3c5ec",a,!0,{sourceMap:!1,shadowMode:!1})},66559:function(t,e,n){"use strict";n.r(e);var a=n(22093),s=n.n(a),o=n(12670),i=n.n(o),c=i()(s());c.push([t.id,".t-chat-list[data-v-0c125fec]{display:flex;flex-direction:column;height:100%;width:100%;color:var(--td-text-color-primary,var(--td-font-gray-1,rgba(0,0,0,.9)))}.t-chat-list__content[data-v-0c125fec]{flex:1;overflow-y:auto;overflow-x:hidden;width:100%}.t-chat-list__content--reverse[data-v-0c125fec]{display:flex;flex-direction:column;-webkit-transform:scaleY(-1);transform:scaleY(-1)}.t-chat-list__content--reverse[data-v-0c125fec]::-webkit-scrollbar{-webkit-transform:scaleY(-1);transform:scaleY(-1)}.t-chat-list__content .placeholder[data-v-0c125fec]{flex-grow:1;flex-shrink:1}\n.t-chat-list__content[data-v-0c125fec]  .uni-scroll-view-content{display:flex;flex-direction:column}\n",""]),e["default"]=c},73158:function(t,e,n){var a=n(66559);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);var s=n(31997).A;s("47b13cf8",a,!0,{sourceMap:!1,shadowMode:!1})},86924:function(t,e,n){var a=n(11361);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);var s=n(31997).A;s("10c29a02",a,!0,{sourceMap:!1,shadowMode:!1})},97759:function(t,e,n){"use strict";n.r(e);var a=n(22093),s=n.n(a),o=n(12670),i=n.n(o),c=i()(s());c.push([t.id,".chat-box[data-v-180dd0d4]{padding-top:%?32?%;box-sizing:border-box}.t-chat__list[data-v-180dd0d4]{padding:0 0 0 %?32?%;box-sizing:border-box}.t-chat-message[data-v-180dd0d4]{padding:0 %?32?%}.preview[data-v-180dd0d4]{padding:%?16?%;display:flex;justify-content:space-between;border:1px solid #000}",""]),e["default"]=c}}]);