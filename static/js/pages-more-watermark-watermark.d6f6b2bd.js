(self["webpackChunktdesign_uniapp_vue2_cli"]=self["webpackChunktdesign_uniapp_vue2_cli"]||[]).push([[5073],{8206:function(t,e,r){"use strict";r.d(e,{A:function(){return n}});r(8248),r(50928),r(51470),r(6761),r(53439),r(77332),r(39221),r(57100);var a=r(28737);function n(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=(0,a.A)(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){l=!0,i=t},f:function(){try{c||null==r["return"]||r["return"]()}finally{if(l)throw i}}}}},24393:function(t,e,r){var a=r(34588);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);var n=r(31997).A;n("35bab4ad",a,!0,{sourceMap:!1,shadowMode:!1})},34588:function(t,e,r){"use strict";r.r(e);var a=r(22093),n=r.n(a),o=r(12670),i=r.n(o),c=i()(n());c.push([t.id,".t-watermark[data-v-f85d6208]{position:relative;overflow:hidden;width:100%}@-webkit-keyframes watermark-data-v-f85d6208{0%{left:var(--watermark-left-0);top:var(--watermark-top-0)}25%{left:var(--watermark-left-25);top:var(--watermark-top-25)}50%{left:var(--watermark-left-50);top:var(--watermark-top-50);-webkit-transform:translateX(-100%);transform:translateX(-100%)}75%{left:var(--watermark-left-75);top:var(--watermark-top-75)}100%{left:var(--watermark-left-0);top:var(--watermark-top-0)}}@keyframes watermark-data-v-f85d6208{0%{left:var(--watermark-left-0);top:var(--watermark-top-0)}25%{left:var(--watermark-left-25);top:var(--watermark-top-25)}50%{left:var(--watermark-left-50);top:var(--watermark-top-50);-webkit-transform:translateX(-100%);transform:translateX(-100%)}75%{left:var(--watermark-left-75);top:var(--watermark-top-75)}100%{left:var(--watermark-left-0);top:var(--watermark-top-0)}}\n/* diff with td-mini */.watermark-move[data-v-f85d6208]{-webkit-animation:watermark-data-v-f85d6208 var(--watermark-animation-duration,100s) linear infinite;animation:watermark-data-v-f85d6208 var(--watermark-animation-duration,100s) linear infinite}",""]),e["default"]=c},35927:function(t,e,r){"use strict";r.d(e,{A:function(){return n}});r(8248),r(50928),r(6761),r(53439),r(91802),r(67054),r(77332),r(578);function a(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}a=function(t,e,r,n){function i(e,r){a(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},a(t,e,r,n)}function n(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */
var t,e,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function c(r,n,o,i){var c=n&&n.prototype instanceof u?n:u,s=Object.create(c.prototype);return a(s,"_invoke",function(r,a,n){var o,i,c,u=0,s=n||[],m=!1,f={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,r){return o=e,i=0,c=t,f.n=r,l}};function d(r,a){for(i=r,c=a,e=0;!m&&u&&!n&&e<s.length;e++){var n,o=s[e],d=f.p,h=o[2];r>3?(n=h===a)&&(c=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=d&&((n=r<2&&d<o[1])?(i=0,f.v=a,f.n=o[1]):d<h&&(n=r<3||o[0]>a||a>h)&&(o[4]=r,o[5]=a,f.n=h,i=0))}if(n||r>1)return l;throw m=!0,a}return function(n,s,h){if(u>1)throw TypeError("Generator is already running");for(m&&1===s&&d(s,h),i=s,c=h;(e=i<2?t:c)||!m;){o||(i?i<3?(i>1&&(f.n=-1),d(i,c)):f.n=c:f.v=c);try{if(u=2,o){if(i||(n="next"),e=o[n]){if(!(e=e.call(o,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,i<2&&(i=0)}else 1===i&&(e=o["return"])&&e.call(o),i<2&&(c=TypeError("The iterator does not provide a '"+n+"' method"),i=1);o=t}else if((e=(m=f.n<0)?c:r.call(a,f))!==l)break}catch(e){o=t,i=1,c=e}finally{u=1}}return{value:e,done:m}}}(r,o,i),!0),s}var l={};function u(){}function s(){}function m(){}e=Object.getPrototypeOf;var f=[][o]?e(e([][o]())):(a(e={},o,function(){return this}),e),d=m.prototype=u.prototype=Object.create(f);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,a(t,i,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=m,a(d,"constructor",m),a(m,"constructor",s),s.displayName="GeneratorFunction",a(m,i,"GeneratorFunction"),a(d),a(d,i,"Generator"),a(d,o,function(){return this}),a(d,"toString",function(){return"[object Generator]"}),(n=function(){return{w:c,m:h}})()}},38730:function(t,e,r){"use strict";r.d(e,{A:function(){return n}});r(77332);function a(t,e,r,a,n,o,i){try{var c=t[o](i),l=c.value}catch(t){return void r(t)}c.done?e(l):Promise.resolve(l).then(a,n)}function n(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function c(t){a(i,n,o,c,l,"next",t)}function l(t){a(i,n,o,c,l,"throw",t)}c(void 0)})}}},57784:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return xt}});var a,n,o,i,c,l,u,s,m,f={tDemoNavbar:r(98383).A,tDemoHeader:r(5635).A,tDemo:r(23765).A},d=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-uni-view",[r("t-demo-navbar",{attrs:{title:"Watermark"}}),r("v-uni-view",{staticClass:"demo"},[r("t-demo-header",{attrs:{title:"Watermark 水印",desc:"给页面的某个区域加上水印。"}}),r("t-demo",{attrs:{title:"01 组件类型",desc:"文字水印"}},[r("base-watermark")],1),r("t-demo",{attrs:{desc:"图片水印"}},[r("image-watermark")],1),r("t-demo",{attrs:{desc:"图片灰阶水印"}},[r("gray-watermark")],1),r("t-demo",{attrs:{desc:"多行图文水印"}},[r("multi-line-watermark")],1),r("t-demo",{attrs:{desc:"多行图文灰阶水印"}},[r("multi-line-gray-watermark")],1),r("t-demo",{attrs:{desc:"运动文字水印"}},[r("move-text-watermark")],1),r("t-demo",{attrs:{desc:"运动图片水印"}},[r("move-image-watermark")],1),r("t-demo",{attrs:{title:"02 组件样式"}},[r("layout-demo")],1)],1)],1)},h=[],v={tWatermark:r(88104).A},w=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-uni-view",[r("t-watermark",{attrs:{"watermark-content":t.watermark,y:56,x:56,width:68,height:52}},[r("v-uni-view",{staticStyle:{width:"100%",height:"340px"}})],1)],1)},p=[],k=r(88104),y={components:{TWatermark:k.A},data:function(){return{watermark:{text:"文字水印"}}}},g=y,b=r(1391),x=(0,b.A)(g,w,p,!1,null,"20f1123e",null,!1,v,a),A=x.exports,W={tWatermark:r(88104).A},_=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-uni-view",[r("t-watermark",{attrs:{"watermark-content":t.watermark,width:120,height:20,x:56,y:76}},[r("v-uni-view",{staticStyle:{width:"100%",height:"300px"}})],1)],1)},S=[],I={components:{TWatermark:k.A},data:function(){return{watermark:{url:"https://tdesign.gtimg.com/starter/brand-logo-light.png"}}}},C=I,T=(0,b.A)(C,_,S,!1,null,"3b3f4995",null,!1,W,n),P=T.exports,E={tWatermark:r(88104).A},G=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-uni-view",[r("t-watermark",{attrs:{"watermark-content":t.watermark,width:120,height:20,x:56,y:76,alpha:.3}},[r("v-uni-view",{staticStyle:{width:"100%",height:"300px"}})],1)],1)},M=[],j={components:{TWatermark:k.A},data:function(){return{watermark:{url:"https://tdesign.gtimg.com/starter/brand-logo-light.png",isGrayscale:!0}}}},N=j,O=(0,b.A)(N,G,M,!1,null,"2c80a4e8",null,!1,E,o),$=O.exports,D={tWatermark:r(88104).A},z=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-uni-view",[r("t-watermark",{attrs:{"watermark-content":t.watermark,"line-space":24,x:56,y:76,width:120,height:20,alpha:.3}},[r("v-uni-view",{staticStyle:{width:"100%",height:"300px"}})],1)],1)},R=[],F={components:{TWatermark:k.A},data:function(){return{watermark:[{text:"水印文本",fontColor:"black"},{url:"https://tdesign.gtimg.com/starter/brand-logo-light.png"}]}}},L=F,X=(0,b.A)(L,z,R,!1,null,"75ce9147",null,!1,D,i),B=X.exports,Y={tWatermark:r(88104).A},q=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-uni-view",[r("t-watermark",{attrs:{"watermark-content":t.watermark,"line-space":24,x:56,y:76,width:120,height:20,alpha:.3}},[r("v-uni-view",{staticStyle:{width:"100%",height:"300px"}})],1)],1)},H=[],Q={components:{TWatermark:k.A},data:function(){return{watermark:[{text:"水印文本",fontColor:"black"},{url:"https://tdesign.gtimg.com/starter/brand-logo-light.png",isGrayscale:!0}]}}},U=Q,J=(0,b.A)(U,q,H,!1,null,"28d33560",null,!1,Y,c),K=J.exports,V={tWatermark:r(88104).A},Z=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-uni-view",[r("t-watermark",{attrs:{"watermark-content":t.watermark,width:120,height:60,y:200,x:210,movable:!0}},[r("v-uni-view",{staticStyle:{width:"100%",height:"300px"}})],1)],1)},tt=[],et={components:{TWatermark:k.A},data:function(){return{watermark:{text:"文字水印"}}}},rt=et,at=(0,b.A)(rt,Z,tt,!1,null,"4cf77758",null,!1,V,l),nt=at.exports,ot={tWatermark:r(88104).A},it=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-uni-view",[r("t-watermark",{attrs:{"watermark-content":t.watermark,x:100,y:140,width:120,height:30,movable:!0}},[r("v-uni-view",{staticStyle:{width:"100%",height:"300px"}})],1)],1)},ct=[],lt={components:{TWatermark:k.A},data:function(){return{watermark:{url:"https://tdesign.gtimg.com/site/baseLogo-light.png"}}}},ut=lt,st=(0,b.A)(ut,it,ct,!1,null,"eaed5d7e",null,!1,ot,u),mt=st.exports,ft={tWatermark:r(88104).A},dt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-uni-view",[r("v-uni-view",{staticClass:"demo-desc",staticStyle:{"margin-bottom":"32rpx"}},[t._v(" Rectangular Grid 矩形布局 ")]),r("t-watermark",{attrs:{"watermark-content":t.watermark,width:56,height:56,x:68,y:52}},[r("v-uni-view",{staticStyle:{width:"100%",height:"340px"}})],1),r("v-uni-view",{staticClass:"demo-desc",staticStyle:{"margin-bottom":"32rpx"}},[t._v(" Hexagonal Grid 六边形网格 ")]),r("t-watermark",{attrs:{"watermark-content":t.watermark,width:68,height:52,x:56,y:56,layout:"hexagonal"}},[r("v-uni-view",{staticStyle:{width:"100%",height:"340px"}})],1)],1)},ht=[],vt={components:{TWatermark:k.A},data:function(){return{watermark:{text:"文字水印"}}}},wt=vt,pt=(0,b.A)(wt,dt,ht,!1,null,"027e03f6",null,!1,ft,s),kt=pt.exports,yt={components:{BaseWatermark:A,ImageWatermark:P,GrayWatermark:$,MultiLineWatermark:B,MultiLineGrayWatermark:K,MoveTextWatermark:nt,MoveImageWatermark:mt,LayoutDemo:kt},data:function(){return{}},methods:{}},gt=yt,bt=(0,b.A)(gt,d,h,!1,null,"fd5be770",null,!1,f,m),xt=bt.exports},88104:function(t,e,r){"use strict";var a;r.d(e,{A:function(){return M}});var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-uni-view",{class:t.classPrefix+" "+t.tClass,style:t.tools._style([t.customStyle])},[t.content?[t._v(" "+t._s(t.content)+" ")]:t._e(),t._t("content"),t._t("default"),r("v-uni-canvas",{style:t.canvasStyle,attrs:{id:t.canvasId,"canvas-id":t.canvasId,type:"2d"}}),r("v-uni-view",{class:t.movable?"watermark-move":"",style:t.tools._style(t.watermarkStyle)})],2)},o=[],i=r(35927),c=r(38730),l=r(70012),u=(r(53439),r(14255),r(77332),r(47402),r(41790),r(10263)),s=(r(26128),r(27439),{alpha:{type:Number,default:1},content:{type:String},height:{type:Number},isRepeat:{type:Boolean,default:!0},layout:{type:String,default:"rectangular",validator:function(t){return!t||["rectangular","hexagonal"].includes(t)}},lineSpace:{type:Number,default:16},movable:Boolean,moveInterval:{type:Number,default:3e3},offset:{type:Array},removable:{type:Boolean,default:!0},rotate:{type:Number,default:-22},watermarkContent:{type:[Object,Array]},width:{type:Number},x:{type:Number},y:{type:Number},zIndex:{type:Number}}),m=r(46056),f=r(88070),d=r(11005),h=r(8206),v=(r(73645),r(98304),r(69870),r(26972),r(74133),r(41469),r(17932),r(19329),r(67103),r(54211),r(4731),r(90231),r(38659),r(47552),r(54185),r(58012),r(83630),r(73923),r(39557),r(40303),r(46644),r(27608),r(35870),r(2945),r(1974),r(35824),r(76135),r(48914),r(5316),r(31958),r(97238),r(78070),r(25710),r(73926),r(83137),r(5829),r(14318),r(25241),r(97245)),w=(0,d.jq)().pixelRatio||1,p=function(t,e,r,a){t.translate(e,r),t.rotate(Math.PI/180*Number(a)),t.translate(-e,-r)},k=function(t,e,r,a,n,o,i,c,l){t.font="normal normal ".concat(o," ").concat(i*w,"px/").concat(a,"px ").concat(c),t.fillStyle=l,t.textAlign="start",t.textBaseline="top",t.fillText(n,e,r)};function y(t,e,r,a,n){return g.apply(this,arguments)}function g(){return g=(0,c.A)((0,i.A)().m(function t(e,r,a,n,o){var u,s,m,f,d,y,g,A,_,S,I,C,T,P,E,G,M,j,N,O,$,D,z,R,F,L,X,B,Y,q,H,Q,U,J,K;return(0,i.A)().w(function(t){while(1)switch(t.p=t.n){case 0:if(u=a.width,s=a.height,m=a.gapX,f=a.gapY,d=a.offsetLeft,y=a.offsetTop,g=a.rotate,A=a.alpha,_=a.watermarkContent,S=a.lineSpace,I=a.watermarkColor,C=a.layout,T="hexagonal"===C,P=e.getContext("2d",{willReadFrequently:!0}),P||(P=uni.createCanvasContext(r,this)),P){t.n=1;break}return console.warn("当前环境不支持Canvas, 无法绘制水印"),n(""),t.a(2);case 1:E={width:m+u},G=(m+u)*w,M=(f+s)*w,j=u*w,N=s*w,O=G,$=M,D=(m+u)*w,z=(f+s)*w,e.width=G,e.height=M,T&&(e.width=2*G,e.height=2*M,E={width:m+2*u+u/2}),P.globalAlpha=A,P.scale(1/w,1/w),P.fillStyle="transparent",P.fillRect(0,0,j,N),P.translate(d*w,y*w),R=Array.isArray(_)?_:[(0,l.A)({},_)],F=0,R.forEach(function(t){t.top=F,t.url?F+=s:t.text&&(F+=S)}),L=function(){var t=(0,c.A)((0,i.A)().m(function t(r){var a,n,o,c,l,m,f,d,h,y,b,A,_,S,C,T,E,G,M,j,O,$,D,z,R,F,L,X,B=arguments;return(0,i.A)().w(function(t){while(1)switch(t.n){case 0:if(a=B.length>1&&void 0!==B[1]?B[1]:0,n=B.length>2&&void 0!==B[2]?B[2]:0,o=B.length>3&&void 0!==B[3]?B[3]:0,c=B.length>4&&void 0!==B[4]?B[4]:0,!r.url){t.n=6;break}return h=r.url,y=r.isGrayscale,b=void 0!==y&&y,t.n=1,(0,v.y)({canvas:e,src:h});case 1:if(A=t.v,null===(l=(m=P).save)||void 0===l||l.call(m),p(P,o,c,g),!b){t.n=4;break}return P.drawImage(A,a,n+r.top*w,u*w,s*w),t.n=2,x(P,{x:0,y:0,width:u,height:s});case 2:for(_=t.v,S=_.data,C=0;C<S.length;C+=4)T=(S[C]+S[C+1]+S[C+2])/3,S[C]=T,S[C+1]=T,S[C+2]=T;return t.n=3,W(P,_,{x:0,y:0});case 3:t.n=5;break;case 4:P.drawImage(A,a,n+r.top*w,u*w,s*w);case 5:return null===(f=(d=P).restore)||void 0===f||f.call(d),t.a(2);case 6:r.text&&(O=r.text,$=r.fontSize,D=void 0===$?16:$,z=r.fontFamily,R=void 0===z?"normal":z,F=r.fontWeight,L=void 0===F?"normal":F,X=(null===r||void 0===r?void 0:r.fontColor)||I,null===(E=(G=P).save)||void 0===E||E.call(G),p(P,o,c,g),k(P,a,n+r.top*w,N,O,L,D,R,X),null===(M=(j=P).restore)||void 0===M||M.call(j));case 7:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}(),X=(0,h.A)(R),t.p=2,X.s();case 3:if((B=X.n()).done){t.n=5;break}return Y=B.value,t.n=4,L(Y,0,0,0,0);case 4:t.n=3;break;case 5:t.n=7;break;case 6:t.p=6,J=t.v,X.e(J);case 7:return t.p=7,X.f(),t.f(7);case 8:if(!T){t.n=15;break}q=(0,h.A)(R),t.p=9,q.s();case 10:if((H=q.n()).done){t.n=12;break}return Q=H.value,t.n=11,L(Q,D,z,O,$);case 11:t.n=10;break;case 12:t.n=14;break;case 13:t.p=13,K=t.v,q.e(K);case 14:return t.p=14,q.f(),t.f(14);case 15:return t.n=16,b.call(this,e,r);case 16:U=t.v,n(U,E,w),null===o||void 0===o||o();case 17:return t.a(2)}},t,this,[[9,13,14,15],[2,6,7,8]])})),g.apply(this,arguments)}function b(t,e){var r=this;return new Promise(function(a,n){var o=!1;if(a(t.toDataURL("image/png")),o=!0,!o){var l=uni.createSelectorQuery().in(r);l.select("#".concat(e)).fields({node:!0,size:!0}).exec(function(){var t=(0,c.A)((0,i.A)().m(function t(r){var o;return(0,i.A)().w(function(t){while(1)switch(t.n){case 0:if(null!==(o=r[0])&&void 0!==o&&o.node){t.n=1;break}return console.error("Canvas node not found"),t.a(2);case 1:uni.canvasToTempFilePath({canvasId:e,success:function(t){return a(t.tempFilePath)},fail:n});case 2:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}())}})}function x(t,e){return A.apply(this,arguments)}function A(){return A=(0,c.A)((0,i.A)().m(function t(e,r){var a,n=this;return(0,i.A)().w(function(t){while(1)switch(t.n){case 0:return a=e.getImageData(r.x,r.y,r.width,r.height),a||(a=new Promise(function(t){uni.canvasGetImageData({canvasId:r.canvasId,x:r.x,y:r.y,width:r.width,height:r.height,success:function(e){t({data:new Uint8ClampedArray(e.data),width:e.width,height:e.height})}},n)})),t.a(2,a)}},t)})),A.apply(this,arguments)}function W(t,e,r){return _.apply(this,arguments)}function _(){return _=(0,c.A)((0,i.A)().m(function t(e,r,a){var n,o=this;return(0,i.A)().w(function(t){while(1)switch(t.n){case 0:return e.putImageData(r,a.x,a.y),n=Promise.resolve(),n||(n=new Promise(function(t,e){uni.canvasPutImageData({canvasId:a.canvasId,x:a.x,y:a.y,width:r.width,height:r.height,data:r.data,success:t,fail:e},o)})),t.a(2,n)}},t)})),_.apply(this,arguments)}function S(){var t=Math.floor(4*Math.random()),e=Math.floor(70*Math.random())+30,r=0,a=95,n=90,o=1===t?n:3===t?r:e,i=0===t?n:2===t?r:100-e,c=1===t?r:3===t?n:100-e,l=0===t?r:2===t?n:e,u=0===t?r:2===t?a:e,s=1===t?a:3===t?r:e,m=0===t?a:2===t?r:100-e,f=1===t?r:3===t?a:100-e;return{left0:"".concat(o,"%"),left25:"".concat(i,"%"),left50:"".concat(c,"%"),left75:"".concat(l,"%"),top0:"".concat(u,"%"),top25:"".concat(s,"%"),top50:"".concat(m,"%"),top75:"".concat(f,"%")}}var I,C="".concat(m.Pl,"-watermark"),T=(0,f.o1)({name:C,options:{styleIsolation:"shared"},externalClasses:["".concat(m.Pl,"-class")],props:(0,l.A)({},s),data:function(){return{classPrefix:C,tools:u.A,watermarkStyle:{},initialed:!1,canvasId:"watermark-canvas-".concat(Math.random().toString(36).slice(2,11))}},computed:{canvasStyle:function(){var t="width: 100px; height: 100px;",e=!0;return e&&(t+="display: none;"),t}},watch:{watermarkContent:"renderWatermark",movable:"renderWatermark",rotate:"renderWatermark",x:"renderWatermark",y:"renderWatermark",width:"renderWatermark",height:"renderWatermark",alpha:"renderWatermark",lineSpace:"renderWatermark",moveInterval:"renderWatermark",zIndex:"renderWatermark",offset:"renderWatermark",removable:"renderWatermark",isRepeat:"renderWatermark",layout:"renderWatermark"},mounted:function(){var t=this;return(0,c.A)((0,i.A)().m(function e(){return(0,i.A)().w(function(e){while(1)switch(e.n){case 0:return e.n=1,(0,d.dY)();case 1:t.renderWatermark();case 2:return e.a(2)}},e)}))()},methods:{watermarkColor:function(){return"dark"===d.TX.theme?"rgba(238, 238, 238, 0.1)":"rgba(0, 0, 0, 0.1)"},renderWatermark:function(){var t=this,e=uni.createSelectorQuery().in(this);e.select("#".concat(this.canvasId)).fields({node:!0,size:!0}).exec(function(){var e=(0,c.A)((0,i.A)().m(function e(r){var a,n,o,c,u,s,m,f;return(0,i.A)().w(function(e){while(1)switch(e.n){case 0:if(null!==(a=r[0])&&void 0!==a&&a.node){e.n=1;break}return console.error("Canvas node not found"),e.a(2);case 1:n=r[0].node,o=t.movable?0:t.x,c=t.movable?0:t.y,u=t.offset||[],s=u[0]||o/2,m=u[1]||c/2,f={width:t.width,height:t.height,rotate:t.movable?0:t.rotate,lineSpace:t.lineSpace,alpha:t.alpha,gapX:o,gapY:c,watermarkContent:t.watermarkContent,offsetLeft:s,offsetTop:m,watermarkColor:t.watermarkColor(),layout:t.layout},y.call(t,n,t.canvasId,f,function(e,r){var a={};if(t.movable){var n=S(),i=n.left0,c=n.left25,u=n.left50,s=n.left75,m=n.top0,f=n.top25,d=n.top50,h=n.top75;a={"--watermark-left-0":i,"--watermark-left-25":c,"--watermark-left-50":u,"--watermark-left-75":s,"--watermark-top-0":m,"--watermark-top-25":f,"--watermark-top-50":d,"--watermark-top-75":h,"--watermark-animation-duration":"".concat(4*t.moveInterval/60,"s")}}t.watermarkStyle=(0,l.A)({zIndex:t.zIndex,position:"absolute",left:0,right:0,top:0,bottom:0,width:"100%",height:"100%",backgroundSize:"".concat((null===r||void 0===r?void 0:r.width)||o+t.width,"px"),pointerEvents:"none",backgroundRepeat:t.movable?"no-repeat":"repeat",backgroundImage:"url('".concat(e,"')")},a)},function(){t.initialed=!0}).catch(function(t){console.log("e",t)});case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}())}}}),P=T,E=(r(24393),r(1391)),G=(0,E.A)(P,n,o,!1,null,"f85d6208",null,!1,a,I),M=G.exports},97245:function(t,e,r){"use strict";r.d(e,{y:function(){return o}});var a=r(35927),n=r(38730);r(77332);function o(t){return i.apply(this,arguments)}function i(){return i=(0,n.A)((0,a.A)().m(function t(e){var r,n,o;return(0,a.A)().w(function(t){while(1)switch(t.n){case 0:if(r=e.canvas,n=e.src,o=null,n&&r){t.n=1;break}return t.a(2,o);case 1:return o=new Promise(function(t,e){var r=new Image;r.crossOrigin="anonymous",r.onload=function(){return t(r)},r.onerror=function(t){console.error("图标加载失败:",t),e(t)},r.src=n}),t.a(2,o)}},t)})),i.apply(this,arguments)}}}]);