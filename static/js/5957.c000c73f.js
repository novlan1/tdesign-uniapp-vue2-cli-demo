(self["webpackChunktdesign_uniapp_vue2_cli"]=self["webpackChunktdesign_uniapp_vue2_cli"]||[]).push([[5957],{17027:function(t,e,a){var i=a(93086);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var r=a(31997).A;r("4b2af6f8",i,!0,{sourceMap:!1,shadowMode:!1})},20924:function(t,e,a){"use strict";var i=a(52439),r=a(56620);i({target:"Array",proto:!0,forced:r!==[].lastIndexOf},{lastIndexOf:r})},25957:function(t,e,a){"use strict";a.d(e,{A:function(){return X}});var i={tGrid:a(86163).A,tGridItem:a(57636).A,tImage:a(49188).A,tIcon:a(14867).A},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{class:t.classPrefix+" "+t.tClass,style:t.tools._style([t.customStyle])},[a("t-grid",{attrs:{gutter:t.gutter,border:!1,align:"center",column:t.column,"custom-style":t.draggable?"overflow: visible":""}},[t.dragLayout?[a("v-uni-view",{class:t.classPrefix+"__drag",style:t.dragWrapStyle+";",attrs:{list:t.dragList,"drag-base-data":t.dragBaseData}},[t._l(t.customFiles,function(e,i){return a("v-uni-view",{key:i,ref:t.classPrefix+"__drag-item",refInFor:!0,class:t.getDragItemClass(i),style:t.getDragItemStyle(i),attrs:{"data-index":i},on:{longpress:function(e){arguments[0]=e=t.$handleEvent(e),t.parseEventDynamicCode(e,"longPress",i)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.parseEventDynamicCode(e,t.dragging?"touchMove":"",i)},touchend:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.parseEventDynamicCode(e,t.dragging?"touchEnd":"",i)}}},[a("t-grid-item",{attrs:{"t-class":t.classPrefix+"__grid "+t.classPrefix+"__grid-file","t-class-content":t.classPrefix+"__grid-content","aria-role":"presentation","custom-style":"width: 100%"}},[a("v-uni-view",{class:t.classPrefix+"__wrapper "+(t.disabled?t.classPrefix+"__wrapper--disabled":""),style:t.gridItemStyle+";",attrs:{"aria-role":t.ariaRole||t.getWrapperAriaRole(e),"aria-label":t.ariaLabel||t.getWrapperAriaLabel(e)}},["video"!==e.type?a("t-image",{attrs:{"data-file":e,"data-index":i,"t-class":t.classPrefix+"__thumbnail","custom-style":t.imageProps&&t.imageProps.style||"",src:e.thumb||e.url,mode:t.imageProps&&t.imageProps.mode||"aspectFill",error:t.imageProps&&t.imageProps.error||"default",lazy:t.imageProps&&t.imageProps.lazy||!1,loading:t.imageProps&&t.imageProps.loading||"default",shape:t.imageProps&&t.imageProps.shape||"round",webp:t.imageProps&&t.imageProps.webp||!1,"show-menu-by-longpress":t.imageProps&&t.imageProps.showMenuByLongpress||!1},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.onPreview(a,{file:e,index:i})}}}):t._e(),"video"===e.type?a("v-uni-video",{class:t.classPrefix+"__thumbnail",attrs:{src:e.url,poster:e.thumb,controls:!0,autoplay:!1,objectFit:"contain","data-file":e},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.onFileClick.apply(void 0,arguments)}}}):t._e(),e.status&&"done"!=e.status?a("v-uni-view",{class:t.classPrefix+"__progress-mask",attrs:{"data-index":i,"data-file":e},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.onFileClick.apply(void 0,arguments)}}},["loading"==e.status?[a("t-icon",{attrs:{"t-class":t.classPrefix+"__progress-loading",name:"loading",size:"48rpx","aria-hidden":!0}}),a("v-uni-view",{class:t.classPrefix+"__progress-text"},[t._v(" "+t._s(e.percent?e.percent+"%":"上传中...")+" ")])]:a("t-icon",{attrs:{name:"reload"==e.status?"refresh":"close-circle",size:"48rpx","aria-hidden":!0}}),"reload"==e.status||"failed"==e.status?a("v-uni-view",{class:t.classPrefix+"__progress-text"},[t._v(" "+t._s("reload"==e.status?"重新上传":"上传失败")+" ")]):t._e()],2):t._e(),(t.tools.isBoolean(e.removeBtn)?e.removeBtn:t.removeBtn)?a("v-uni-view",{class:t.classPrefix+"__close-btn hotspot-expanded",attrs:{"data-index":i,"data-url":e.url,"aria-role":"button","aria-label":"删除"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.onDelete.apply(void 0,arguments)}}},[a("t-icon",{attrs:{name:"close",size:"32rpx",color:"#fff"}})],1):t._e()],1)],1)],1)}),t.addBtn&&t.customLimit>0?a("v-uni-view",{ref:t.classPrefix+"__drag-item",class:t.getDragItemClass(t.customFiles.length),style:t.getDragItemStyle(t.customFiles.length)},[a("t-grid-item",{attrs:{"t-class":t.classPrefix+"__grid","t-class-content":t.classPrefix+"__grid-content","aria-label":"上传","custom-style":"width: 100%"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onAddTap.apply(void 0,arguments)}}},[a("v-uni-view",{class:t.classPrefix+"__wrapper",style:t.gridItemStyle},[t._t("add-content"),t.addContent?[t._v(" "+t._s(t.addContent)+" ")]:a("v-uni-view",{class:t.classPrefix+"__add-icon "+(t.disabled?t.classPrefix+"__add-icon--disabled":"")},[a("t-icon",{attrs:{name:"add"}})],1)],2)],1)],1):t._e()],2)]:[t._l(t.customFiles,function(e,i){return a("t-grid-item",{key:i,attrs:{"t-class":t.classPrefix+"__grid "+t.classPrefix+"__grid-file","t-class-content":t.classPrefix+"__grid-content","aria-role":"presentation"}},[a("v-uni-view",{class:t.classPrefix+"__wrapper "+(t.disabled?t.classPrefix+"__wrapper--disabled":""),style:t.gridItemStyle,attrs:{"aria-role":t.ariaRole||t.getWrapperAriaRole(e),"aria-label":t.ariaLabel||t.getWrapperAriaLabel(e)}},["video"!==e.type?a("t-image",{attrs:{"data-file":e,"data-index":i,"t-class":t.classPrefix+"__thumbnail","custom-style":t.imageProps&&t.imageProps.style||"",src:e.thumb||e.url,mode:t.imageProps&&t.imageProps.mode||"aspectFill",error:t.imageProps&&t.imageProps.error||"default",lazy:t.imageProps&&t.imageProps.lazy||!1,loading:t.imageProps&&t.imageProps.loading||"default",shape:t.imageProps&&t.imageProps.shape||"round",webp:t.imageProps&&t.imageProps.webp||!1,"show-menu-by-longpress":t.imageProps&&t.imageProps.showMenuByLongpress||!1},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.onPreview(a,{file:e,index:i})}}}):t._e(),"video"===e.type?a("v-uni-video",{class:t.classPrefix+"__thumbnail",attrs:{src:e.url,poster:e.thumb,controls:!0,autoplay:!1,objectFit:"contain","data-file":e},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.onFileClick.apply(void 0,arguments)}}}):t._e(),e.status&&"done"!=e.status?a("v-uni-view",{class:t.classPrefix+"__progress-mask",attrs:{"data-index":i,"data-file":e},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.onFileClick.apply(void 0,arguments)}}},["loading"==e.status?[a("t-icon",{attrs:{"t-class":t.classPrefix+"__progress-loading",name:"loading",size:"48rpx","aria-hidden":!0}}),a("v-uni-view",{class:t.classPrefix+"__progress-text"},[t._v(" "+t._s(e.percent?e.percent+"%":"上传中...")+" ")])]:a("t-icon",{attrs:{name:"reload"==e.status?"refresh":"close-circle",size:"48rpx","aria-hidden":!0}}),"reload"==e.status||"failed"==e.status?a("v-uni-view",{class:t.classPrefix+"__progress-text"},[t._v(" "+t._s("reload"==e.status?"重新上传":"上传失败")+" ")]):t._e()],2):t._e(),(t.tools.isBoolean(e.removeBtn)?e.removeBtn:t.removeBtn)?a("v-uni-view",{class:t.classPrefix+"__close-btn hotspot-expanded",attrs:{"data-index":i,"aria-role":"button","aria-label":"删除"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.onDelete.apply(void 0,arguments)}}},[a("t-icon",{attrs:{name:"close",size:"32rpx",color:"#fff"}})],1):t._e()],1)],1)}),t.addBtn&&t.customLimit>0?a("t-grid-item",{attrs:{"t-class":t.classPrefix+"__grid","t-class-content":t.classPrefix+"__grid-content","aria-label":"上传"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onAddTap.apply(void 0,arguments)}}},[a("v-uni-view",{class:t.classPrefix+"__wrapper",style:t.gridItemStyle},[t._t("add-content"),t.addContent?[t._v(" "+t._s(t.addContent)+" ")]:a("v-uni-view",{class:t.classPrefix+"__add-icon "+(t.disabled?t.classPrefix+"__add-icon--disabled":"")},[a("t-icon",{attrs:{name:"add"}})],1)],2)],1):t._e()]],2)],1)},n=[];a(6761),a(53439);var s=a(97023),o=a(80256),l=a(45824),d=a(57274),c=a(70012),u=(a(73645),a(60963),a(26128),a(20924),a(88803),a(52093),a(56631),a(14255),a(17932),a(86204),a(19329),a(96466),a(39452),a(11546),a(49500),a(77332),a(10165),a(47402),a(41790),a(10102),a(87311),a(25241),a(86163)),g=a(57636),p=a(14867),f=a(49188),h=a(88070),m=(a(27439),{addBtn:{type:Boolean,default:!0},addContent:{type:String},allowUploadDuplicateFile:Boolean,config:{type:Object},disabled:{type:Boolean,default:void 0},draggable:{type:[Boolean,Object]},files:{type:Array},defaultFiles:{type:Array},gridConfig:{type:Object},gutter:{type:Number,default:16},imageProps:{type:Object},max:{type:Number,default:0},mediaType:{type:Array,default:["image","video"]},preview:{type:Boolean,default:!0},removeBtn:{type:Boolean,default:!0},requestMethod:{type:Function},sizeLimit:{type:[Number,Object]},source:{type:String,default:"media",validator:function(t){return!t||["media","messageFile"].includes(t)}},transition:{type:Object,default:function(){return{backTransition:!0,duration:300,timingFunction:"ease"}}},onAdd:{type:Function,default:function(){return{}}},onClick:{type:Function,default:function(){return{}}},onComplete:{type:Function,default:function(){return{}}},onDrop:{type:Function,default:function(){return{}}},onFail:{type:Function,default:function(){return{}}},onRemove:{type:Function,default:function(){return{}}},onSelectChange:{type:Function,default:function(){return{}}},onSuccess:{type:Function,default:function(){return{}}}}),v=a(46056),y=a(11005),b=a(50142),_=a(10263);function x(t){return t.status&&"done"!=t.status?"text":"button"}function P(t){return t.status&&"done"!=t.status?"loading"==t.status?t.percent?"上传中:".concat(t.percent,"%"):"上传中":"reload"==t.status?"重新上传":"上传失败":"video"===t.type?"视频":"图像"}var w="",F=0,S=0,A=[],I=function(t,e,a,i,r,n){return t<0||t>=e||a<0||a>=i||r<0||r>=n},L=function(t,e,a){var i=a.dragBaseData,r=function(t,e){return a.list[t].fixed?(e?--t:++t,r(t,e)):t},n=-1;return a.list.forEach(function(t){t.sortKey===e&&(n=t.realKey)}),a.list.map(function(a){if(a.fixed)return a;var s=a.sortKey,o=a.realKey;return t<e?s>t&&s<=e?(--o,s=r(--s,!0)):s===t&&(o=n,s=e):t>e&&(s>=e&&s<t?(++o,s=r(++s,!1)):s===t&&(o=n,s=e)),a.sortKey!==s&&(a.tranX="".concat(s%i.columns*100,"%"),a.tranY="".concat(100*Math.floor(s/i.columns),"%"),a.sortKey=s,a.realKey=o),a})};function D(t,e,a){var i=[],r=[];t.forEach(function(t){i[t.sortKey]=t}),i.forEach(function(t){t.extraNode||r.push(t.data)}),a.$emit(e,{listData:r})}function C(t,e){var a=this,i=this.getState(),r=i.dragBaseData,n=t.changedTouches[0];if(n){i.cur=e;var s=i.list[i.cur];s&&s.fixed||i.dragging||(i.dragging=!0,this.callMethod("dragStatusChange",{dragging:!0}),i.tranX=1===r.columns?0:n.pageX-(r.itemWidth/2+r.wrapLeft),i.tranY=n.pageY-(r.itemHeight/2+r.wrapTop),i.sId=n.identifier,this.setDragItemStyle(e,"transform: translate3d(".concat(i.tranX,"px, ").concat(i.tranY,"px, 0)")),i.list.forEach(function(t,e){a.setDragItemClass(e,"remove",["".concat(w,"__drag--tran"),"".concat(w,"__drag--cur")]),a.setDragItemClass(e,"add",e===i.cur?"".concat(w,"__drag--cur"):"".concat(w,"__drag--tran"))}),this.callMethod("dragVibrate",{vibrateType:"longPress"}))}}function k(t,e){var a=this,i=this.getState(),r=i.dragBaseData,n=t.changedTouches[0];if(n&&i.dragging&&i.sId===n.identifier){var s=1===r.columns?0:n.pageX-(r.itemWidth/2+r.wrapLeft),o=n.pageY-(r.itemHeight/2+r.wrapTop);n.clientY>r.windowHeight-r.itemHeight-r.realBottomSize?this.callMethod("pageScroll",{scrollTop:n.pageY+r.itemHeight-(r.windowHeight-r.realBottomSize)}):n.clientY<r.itemHeight+r.realTopSize&&this.callMethod("pageScroll",{scrollTop:n.pageY-r.itemHeight-r.realTopSize}),this.setDragItemStyle(e,"transform: translate3d(".concat(s,"px, ").concat(o,"px, 0)"));var l=i.list[i.cur].sortKey,d=Math.round(s/r.itemWidth),c=Math.round(o/r.itemHeight),u=d+r.columns*c,g=i.list[u];g&&g.fixed||I(d,r.columns,c,r.rows,u,i.list.length)||l!==u&&l!==i.preStartKey&&(i.preStartKey=l,A=L(l,u,i),F=l,S=u,i.list.forEach(function(t,e){var r=A[e];e!==i.cur&&a.setDragItemStyle(e,"transform: translate3d(".concat(r.tranX,",").concat(r.tranY,", 0)"))}),this.callMethod("dragVibrate",{vibrateType:"touchMove"}),this.callMethod("dragCollision",{dragCollisionList:A,startIndex:F,endIndex:S}),D(A,"change",this))}}function E(t,e){var a=this.getState();a.dragging&&(D(a.list,"sortend",this),this.setDragItemClass(e,"remove","".concat(w,"__drag--cur")),this.setDragItemClass(e,"add","".concat(w,"__drag--tran")),this.setDragItemStyle(e,"transform: translate3d(".concat(a.list[a.cur].tranX,",").concat(a.list[a.cur].tranY,", 0)")),a.preStartKey=-1,a.dragging=!1,this.callMethod("dragStatusChange",{dragging:!1}),this.callMethod("dragEnd",{dragCollisionList:A,startIndex:F,endIndex:S}),a.cur=-1,a.tranX=0,a.tranY=0)}function T(t){if(void 0!==t){var e=this.getState();e.dragBaseData=t,w=t.classPrefix}}function M(t){var e=this;if(void 0!==t){var a=this.getState();a.list=t||[],a.list.forEach(function(t,a){e.setDragItemClass(a,"remove","".concat(w,"__drag--tran")),e.setDragItemStyle(a,"transform: translate3d(".concat(t.tranX,",").concat(t.tranY,", 0)")),t.fixed&&e.setDragItemClass(a,"add","".concat(w,"__drag--fixed"))}),A=[]}}var z,B=a(55534),$=["size","fileType","tempFilePath","width","height","duration","thumbTempFilePath"],O=["size","type","path"],W="".concat(v.Pl,"-upload"),K=function(){return[[C,"longPress"],[k,"touchMove"],[E,"touchEnd"],[T,"baseDataObserver"],[M,"listObserver"]].reduce(function(t,e){var a=e[0];return(0,c.A)((0,c.A)({},t),{},(0,d.A)({},e[1],function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];a.call.apply(a,[this].concat(e))}))},{})},Y=(0,h.o1)({name:W,options:{styleIsolation:"shared"},controlledProps:[{key:"files",event:"success"}],externalClasses:["".concat(v.Pl,"-class")],components:{TGrid:u.A,TGridItem:g.A,TIcon:p.A,TImage:f.A},props:(0,c.A)({},m),data:function(){return{classPrefix:W,prefix:v.Pl,current:!1,proofs:[],customFiles:[],customLimit:0,column:4,dragBaseData:{},rows:0,dragWrapStyle:"",dragList:[],dragging:!0,dragLayout:!1,tools:_.A,gridItemStyle:"",fakeState:{},dragItemClassList:[],dragItemStyleList:[]}},watch:{files:{handler:function(){this.onWatchFilesLimit()},deep:!0},max:"onWatchFilesLimit",draggable:{handler:function(){this.onWatchFilesLimit()},deep:!0},gridConfig:{handler:function(){this.updateGrid()},deep:!0},dragList:{handler:function(t){var e=this;setTimeout(function(){e.listObserver(t)},33)},deep:!0,immediate:!0},dragBaseData:{handler:function(t){this.baseDataObserver(t)},deep:!0,immediate:!0}},mounted:function(){this.handleLimit(this.files,this.max),this.updateGrid()},methods:(0,c.A)((0,c.A)({getWrapperAriaRole:x,getWrapperAriaLabel:P},K()),{},{handleLimit:function(t,e){0===e&&(e=Number.MAX_SAFE_INTEGER),this.customFiles=t.length>e?t.slice(0,e):t,this.customLimit=e-t.length,this.dragging=!0,this.initDragLayout()},triggerSuccessEvent:function(t){this._trigger("success",{files:[].concat((0,l.A)(this.customFiles),(0,l.A)(t))})},triggerFailEvent:function(t){this.$emit("fail",t)},onFileClick:function(t){var e=t.currentTarget.dataset,a=e.file,i=e.index;this.$emit("click",{index:i,file:a})},getFileType:function(t,e,a){if(a)return a;if(1===t.length)return t[0];var i=["avi","wmv","mkv","mp4","mov","rm","3gp","flv","mpg","rmvb"],r=e.split("."),n=r[r.length-1];return i.includes(n.toLocaleLowerCase())?"video":"image"},getRandFileName:function(t){var e=t.lastIndexOf("."),a=-1===e?"":t.substr(e);return parseInt("".concat(Date.now()).concat(Math.floor(900*Math.random()+100)),10).toString(36)+a},checkFileSize:function(t,e,a){if((0,y.wQ)(t,e)){var i="".concat("video"===a?"视频":"图片","大小超过限制");if((0,b.Gv)(e)){var r=e.size,n=e.message;i=null===n||void 0===n?void 0:n.replace("{sizeLimit}",String(r))}return uni.showToast({icon:"none",title:i}),!0}return!1},onDelete:function(t){var e=t.currentTarget.dataset.index;this.deleteHandle(e)},deleteHandle:function(t){var e=this.customFiles,a=e[t];this.$emit("remove",{index:t,file:a})},updateGrid:function(){var t=this.gridConfig,e=void 0===t?{}:t;(0,b.Gv)(e)||(e={});var a=e,i=a.column,r=void 0===i?4:i,n=a.width,s=void 0===n?160:n,o=a.height,l=void 0===o?160:o;this.gridItemStyle="width:".concat(s,"rpx;height:").concat(l,"rpx"),this.column=r},resetDragLayout:function(){this.dragBaseData={},this.dragWrapStyle="",this.dragLayout=!1},initDragLayout:function(){var t=this,e=this.draggable,a=this.disabled,i=this.customFiles;e&&!a&&0!==i.length?(this.initDragList(),setTimeout(function(){t.initDragBaseData()},33)):this.resetDragLayout()},initDragList:function(){var t=0,e=this.column,a=this.customFiles,i=this.customLimit,r=[];if(a.forEach(function(a,i){r.push({realKey:t,sortKey:i,tranX:"".concat(i%e*100,"%"),tranY:"".concat(100*Math.floor(i/e),"%"),data:(0,c.A)({},a)}),t+=1}),i>0){var n=r.length;r.push({realKey:n,sortKey:n,tranX:"".concat(n%e*100,"%"),tranY:"".concat(100*Math.floor(n/e),"%"),fixed:!0})}this.rows=Math.ceil(r.length/e),this.dragList=r},initDragBaseData:function(){var t,e,a,i=this,r=this.classPrefix,n=this.rows,s=this.column;t=uni.createSelectorQuery().in(this),t||(t=this.createSelectorQuery()),e=".t-grid-item",a=".t-grid",e||(e=".".concat(r," >>> .t-grid-item"),a=".".concat(r," >>> .t-grid")),t.select(e).boundingClientRect(),t.select(a).boundingClientRect(),t.selectViewport().scrollOffset(),t.exec(function(t){var e=(0,o.A)(t,3),a=e[0],l=a.width,d=a.height,c=e[1],u=c.left,g=c.top,p=e[2].scrollTop,f={rows:n,classPrefix:r,itemWidth:l,itemHeight:d,wrapLeft:u,wrapTop:g+p,columns:s},h="height: ".concat(n*d,"px");i.dragBaseData=f,i.dragWrapStyle=h,i.dragLayout=!0;var m=setTimeout(function(){i.dragging=!1,clearTimeout(m)},0)})},getPreviewMediaSources:function(){var t=[];return this.customFiles.forEach(function(e){var a={url:e.url,type:e.type,poster:e.thumb||void 0};t.push(a)}),t},onPreview:function(t){this.onFileClick(t);var e=this.preview;if(e){var a=this.customFiles.some(function(t){return"video"===t.type});a?this.onPreviewMedia(t):this.onPreviewImage(t)}},onPreviewImage:function(t){var e,a=t.currentTarget.dataset.index,i=this.customFiles.filter(function(t){return-1!==t.percent}).map(function(t){return t.url}),r=null===(e=this.customFiles[a])||void 0===e?void 0:e.url;uni.previewImage({urls:i,current:r,fail:function(){uni.showToast({title:"预览图片失败",icon:"none"})}})},onPreviewMedia:function(t){var e=t.currentTarget.dataset.index,a=this.getPreviewMediaSources();uni.previewMedia({sources:a,current:e,fail:function(){uni.showToast({title:"预览视频失败",icon:"none"})}})},uploadFiles:function(t){var e=this;return Promise.resolve().then(function(){var a=e.data.requestMethod(t);return a instanceof Promise?a:Promise.resolve({})})},startUpload:function(t){var e=this;return"function"===typeof this.requestMethod?this.uploadFiles(t).then(function(){t.forEach(function(t){t.percent=100}),e.triggerSuccessEvent(t)}).catch(function(t){e.triggerFailEvent(t)}):(this.triggerSuccessEvent(t),this.handleLimit(this.customFiles,this.max),Promise.resolve())},onWatchFilesLimit:function(){this.handleLimit(this.files,this.max)},onAddTap:function(){var t=this.disabled,e=this.mediaType,a=this.source;t||("media"===a?this.chooseMedia(e):this.chooseMessageFile(e))},chooseMedia:function(t){var e=this,a=this.customLimit,i=this.config,r=this.sizeLimit,n="chooseMedia";n="chooseImage",uni[n]((0,c.A)((0,c.A)({count:Math.min(20,a),mediaType:t},i),{},{success:function(a){var i=[];a.tempFiles.forEach(function(a){var n=a.size,o=a.fileType,l=a.tempFilePath,d=a.width,u=a.height,g=a.duration,p=a.thumbTempFilePath,f=(0,s.A)(a,$);if(!e.checkFileSize(n,r,o)){var h=a.name||e.getRandFileName(l);i.push((0,c.A)({name:h,type:e.getFileType(t,a.name||l,o),url:l,size:n,width:d,height:u,duration:g,thumb:p,percent:0},f))}}),e.afterSelect(i)},fail:function(t){e.triggerFailEvent(t)},complete:function(t){e.$emit("complete",t)}}))},chooseMessageFile:function(t){var e=this,a=this.customLimit,i=this.config,r=this.sizeLimit;uni.chooseMessageFile((0,c.A)((0,c.A)({count:Math.min(100,a),type:Array.isArray(t)?"all":t},i),{},{success:function(a){var i=[];a.tempFiles.forEach(function(a){var n=a.size,o=a.type,l=a.path,d=(0,s.A)(a,O);if(!e.checkFileSize(n,r,o)){var u=e.getRandFileName(l);i.push((0,c.A)({name:u,type:e.getFileType(t,l,o),url:l,size:n,percent:0},d))}}),e.afterSelect(i)},fail:function(t){return e.triggerFailEvent(t)},complete:function(t){return e.$emit("complete",t)}}))},afterSelect:function(t){this._trigger("select-change",{files:(0,l.A)(this.customFiles),currentSelectedFiles:[t]}),this._trigger("add",{files:t}),this.startUpload(t)},dragVibrate:function(t){var e=t.vibrateType,a=this.draggable,i=(0,y.Yc)(null===a||void 0===a?void 0:a.vibrate,!0),r=null===a||void 0===a?void 0:a.collisionVibrate;(i&&"longPress"===e||r&&"touchMove"===e)&&uni.vibrateShort({type:"light"})},dragStatusChange:function(t){var e=t.dragging;this.dragging=e},dragEnd:function(t){var e=t.dragCollisionList,a=[];a=0===e.length?this.customFiles:e.reduce(function(t,e){var a=e.realKey,i=e.data,r=e.fixed;return r||(t[a]=(0,c.A)({},i)),t},[]),this.triggerDropEvent(a)},triggerDropEvent:function(t){var e=this,a=this.transition;if(a.backTransition)var i=setTimeout(function(){e.$emit("drop",{files:t}),clearTimeout(i)},a.duration);else this.$emit("drop",{files:t})},getState:function(){return this.fakeState||{}},callMethod:function(){for(var t,e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return null===(t=this[a[0]])||void 0===t?void 0:t.call.apply(t,[this].concat((0,l.A)(a.slice(1))))},parseEventDynamicCode:B.s,setDragItemClass:function(t,e,a){this.dragItemClassList[t]||(this.dragItemClassList[t]=[]);var i,r=Array.isArray(a)?a:[a];"add"!==e?"remove"===e&&(this.dragItemClassList[t]=this.dragItemClassList[t].filter(function(t){return!r.includes(t)})):(i=this.dragItemClassList[t]).push.apply(i,(0,l.A)(r))},getDragItemClass:function(t){var e=this.classPrefix,a=["".concat(e,"__drag-item")];return[].concat(a,(0,l.A)(this.dragItemClassList[t]||[])).join(" ")},setDragItemStyle:function(t,e){this.dragItemStyleList[t]||(this.dragItemStyleList[t]=[]),this.dragItemStyleList[t].push(e)},getDragItemStyle:function(t){var e=this.column,a=this.transition,i=["width: ".concat(100/e,"%"),"--td-upload-drag-transition-duration: ".concat(a.duration,"ms"),"--td-upload-drag-transition-timing-function: ".concat(a.timingFunction)];return[].concat(i,(0,l.A)(this.dragItemStyleList[t]||[])).join(";")}})}),j=Y,H=(a(17027),a(1391)),R=(0,H.A)(j,r,n,!1,null,"3b2d2b19",null,!1,i,z),X=R.exports},55534:function(t,e,a){"use strict";a.d(e,{s:function(){return i}});a(73645);function i(t,e){if("function"===typeof this[e]){for(var a=arguments.length,i=new Array(a>2?a-2:0),r=2;r<a;r++)i[r-2]=arguments[r];this[e].apply(this,[t].concat(i))}}},93086:function(t,e,a){"use strict";a.r(e);var i=a(22093),r=a.n(i),n=a(12670),s=a.n(n),o=s()(r());o.push([t.id,'.t-upload[data-v-3b2d2b19]{position:relative}:deep(.t-upload__grid)-content[data-v-3b2d2b19]{padding:0}:deep(.t-upload__grid)-file[data-v-3b2d2b19]{position:relative}.t-upload__add-icon[data-v-3b2d2b19]{width:100%;height:100%;display:none;align-items:center;justify-content:center;font-size:var(--td-upload-add-icon-size,28px);background-color:var(--td-upload-add-bg-color,var(--td-bg-color-secondarycontainer,var(--td-gray-color-1,#f3f3f3)));color:var(--td-upload-add-color,var(--td-text-color-placeholder,var(--td-font-gray-3,rgba(0,0,0,.4))));border-radius:var(--td-upload-radius,var(--td-radius-default,6px))}.t-upload__add-icon--disabled[data-v-3b2d2b19]{background-color:var(--td-upload-add-disabled-bg-color,var(--td-bg-color-component-disabled,var(--td-gray-color-2,#eee)));color:var(--td-upload-add-icon-disabled-color,var(--td-text-color-disabled,var(--td-font-gray-4,rgba(0,0,0,.26))))}.t-upload__add-icon[data-v-3b2d2b19]:only-child{display:flex}[data-v-3b2d2b19]:deep(.t-upload__thumbnail){width:100%;height:100%;max-height:100%;overflow:hidden}.t-upload__wrapper[data-v-3b2d2b19]{position:relative;border-radius:var(--td-upload-radius,var(--td-radius-default,6px));overflow:hidden}.t-upload__wrapper--disabled[data-v-3b2d2b19]::before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-color:var(--td-upload-disabled-mask,rgba(0,.6));z-index:1}.t-upload__close-btn[data-v-3b2d2b19]{position:absolute;top:0;right:0;display:flex;align-items:center;justify-content:center;width:%?40?%;height:%?40?%;border-top-right-radius:var(--td-upload-radius,var(--td-radius-default,6px));border-bottom-left-radius:var(--td-upload-radius,var(--td-radius-default,6px));background-color:var(--td-font-gray-3,rgba(0,0,0,.4))}.t-upload__progress-mask[data-v-3b2d2b19]{position:absolute;left:0;top:0;width:100%;height:100%;background-color:var(--td-font-gray-2,rgba(0,0,0,.6));display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--td-upload-radius,var(--td-radius-default,6px));color:var(--td-text-color-anti,var(--td-font-white-1,#fff));padding:%?32?% 0;box-sizing:border-box}.t-upload__progress-text[data-v-3b2d2b19]{font:var(--td-font-body-small,12px/20px var(--td-font-family,PingFang SC,Microsoft YaHei,Arial Regular));margin-top:%?8?%}[data-v-3b2d2b19]:deep(.t-upload__progress-loading){-webkit-animation:spin-data-v-3b2d2b19 infinite linear .6s;animation:spin-data-v-3b2d2b19 infinite linear .6s}.t-upload__drag[data-v-3b2d2b19]{position:relative;width:100%;--td-grid-item-bg-color:transparent}.t-upload__drag-item[data-v-3b2d2b19]{position:absolute;z-index:1;top:0;left:0;height:auto;width:100%}.t-upload__drag--fixed[data-v-3b2d2b19]{z-index:0}.t-upload__drag--tran[data-v-3b2d2b19]{transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform;transition-duration:var(--td-upload-drag-transition-duration);transition-timing-function:var(--td-upload-drag-transition-timing-function)}.t-upload__drag--cur[data-v-3b2d2b19]{z-index:var(--td-upload-drag-z-index,999)}@-webkit-keyframes spin-data-v-3b2d2b19{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes spin-data-v-3b2d2b19{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}',""]),e["default"]=o},97023:function(t,e,a){"use strict";a.d(e,{A:function(){return r}});a(8248),a(33755);function i(t,e){if(null==t)return{};var a={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;a[i]=t[i]}return a}function r(t,e){if(null==t)return{};var a,r,n=i(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)a=s[r],-1===e.indexOf(a)&&{}.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}}}]);