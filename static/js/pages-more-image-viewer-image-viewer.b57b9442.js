(self["webpackChunktdesign_uniapp_vue2_cli"]=self["webpackChunktdesign_uniapp_vue2_cli"]||[]).push([[6195],{9805:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return D}});var n,a,o,s={tDemoNavbar:i(98383).A,tDemoHeader:i(5635).A,tDemo:i(23765).A},l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("t-demo-navbar",{attrs:{"custom-class":"demo-navbar",title:"ImageViewer"}}),i("v-uni-view",{staticClass:"demo"},[i("t-demo-header",{attrs:{title:"ImageViewer 图片预览",desc:"用于图片内容的缩略展示与查看。",notice:"渲染框架支持情况：Skyline、WebView"}}),i("t-demo",{attrs:{title:"01 组件类型",description:"基础图片预览",padding:!0}},[i("base-comp")],1),i("t-demo",{attrs:{title:"带操作图片预览",padding:!0}},[i("delete-demo")],1)],1)],1)},r=[],c={tButton:i(45023).A,tToast:i(74688).A,tImageViewer:i(13828).A},d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("t-button",{attrs:{theme:"primary",size:"large",variant:"outline",block:!0},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onClick.apply(void 0,arguments)}}},[e._v(" 基础图片预览 ")]),i("t-toast",{ref:"t-toast"}),i("t-image-viewer",{attrs:{"using-custom-navbar":!e.isMPAlipay,"custom-navbar-height":e.gCustomNavbarHeight,"delete-btn":e.deleteBtn,"close-btn":e.closeBtn,"show-index":e.showIndex,visible:e.visible,images:e.images},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.onChange.apply(void 0,arguments)},delete:function(t){arguments[0]=t=e.$handleEvent(t),e.onDelete.apply(void 0,arguments)},close:function(t){arguments[0]=t=e.$handleEvent(t),e.onClose.apply(void 0,arguments)}}})],1)},u=[],v=i(45023),g=i(74688),m=i(13828),h=i(43376),p={components:{TButton:v.A,TToast:g.A,TImageViewer:m.A},data:function(){return{visible:!1,showIndex:!1,closeBtn:!1,deleteBtn:!1,images:[]}},created:function(){},methods:{onClick:function(){this.images=["https://tdesign.gtimg.com/mobile/demos/swiper1.png","https://tdesign.gtimg.com/mobile/demos/swiper2.png"],this.showIndex=!0,this.visible=!0},onChange:function(e){var t=e.index;console.log("change",t)},onDelete:function(e){var t=e.index;(0,h.Ay)({context:this,selector:"#t-toast",message:"删除第".concat(t+1,"个")})},onClose:function(e){var t=e.trigger;console.log(t),this.visible=!1}}},f=p,w=i(1391),b=(0,w.A)(f,d,u,!1,null,"5a8da6a4",null,!1,c,n),_=b.exports,x={tButton:i(45023).A,tActionSheet:i(81182).A,tImageViewer:i(13828).A},y=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("t-button",{attrs:{theme:"primary",size:"large",variant:"outline",block:!0},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onClick.apply(void 0,arguments)}}},[e._v(" 带操作图片预览 ")]),i("t-action-sheet",{ref:"t-action-sheet"}),i("t-image-viewer",{attrs:{"using-custom-navbar":!e.isMPAlipay,"delete-btn":e.deleteBtn,"close-btn":e.closeBtn,"show-index":e.showIndex,visible:e.visible,images:e.images,"custom-navbar-height":e.gCustomNavbarHeight},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.onChange.apply(void 0,arguments)},delete:function(t){arguments[0]=t=e.$handleEvent(t),e.onDelete.apply(void 0,arguments)},close:function(t){arguments[0]=t=e.$handleEvent(t),e.onClose.apply(void 0,arguments)}}})],1)},B=[],I=i(81182),A=i(89145),k={components:{TButton:v.A,TActionSheet:I.A,TImageViewer:m.A},data:function(){return{visible:!1,showIndex:!1,closeBtn:!1,deleteBtn:!1,images:[]}},created:function(){},methods:{onClick:function(){this.images=["https://tdesign.gtimg.com/mobile/demos/swiper1.png","https://tdesign.gtimg.com/mobile/demos/swiper2.png"],this.showIndex=!0,this.visible=!0,this.closeBtn=!0,this.deleteBtn=!0},onChange:function(e){var t=e.index;console.log(t)},onDelete:function(e){var t=e.index;console.log(t),A.Ay.show({context:this,selector:"#t-action-sheet",description:"要删除这张照片吗？",items:[{label:"删除",color:"#d54941"}]})},onClose:function(e){var t=e.trigger;console.log(t),this.visible=!1}}},C=k,S=(0,w.A)(C,y,B,!1,null,"3138c452",null,!1,x,a),P=S.exports,z={components:{BaseComp:_,DeleteDemo:P},data:function(){return{}},methods:{}},E=z,$=(i(52580),(0,w.A)(E,l,r,!1,null,"a0326db8",null,!1,s,o)),D=$.exports},13828:function(e,t,i){"use strict";i.d(t,{A:function(){return I}});var n={tImage:i(49188).A,tIcon:i(14867).A},a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.dataVisible?i("v-uni-view",{class:e.classPrefix+" "+e.tClass,style:e.tools._style([e.customStyle,"--td-image-viewer-top: "+e.distanceTop+"px"]),attrs:{id:e.classPrefix,"aria-modal":!0,"aria-role":"dialog","aria-label":"图片查看器"},on:{touchmove:function(t){t.stopPropagation(),t.preventDefault(),arguments[0]=t=e.$handleEvent(t),(!0).apply(void 0,arguments)}}},[i("v-uni-view",{class:e.classPrefix+"__mask",style:e.tools._style([e.backgroundColor&&"--td-image-viewer-mask-bg-color: "+e.backgroundColor]),attrs:{"data-source":"overlay","aria-role":"button","aria-label":"关闭"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),function(t){return e.onClose(t,"overlay")}.apply(void 0,arguments)}}}),e.images&&e.images.length?[i("v-uni-view",{class:e.classPrefix+"__content"},[i("v-uni-swiper",{staticClass:"swiper",style:e.swiperStyle[e.currentSwiperIndex]&&e.swiperStyle[e.currentSwiperIndex].style,attrs:{autoplay:!1,current:e.currentSwiperIndex,tabindex:"0"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.onSwiperChange.apply(void 0,arguments)},click:function(t){arguments[0]=t=e.$handleEvent(t),function(t){return e.onClose(t,"")}.apply(void 0,arguments)}}},e._l(e.images,function(t,n){return i("v-uni-swiper-item",{key:n,class:e.classPrefix+"__preview-image"},[!e.lazy||e.shouldLoadImage(n,e.currentSwiperIndex,e.loadedImageIndexes)?i("t-image",{class:e.classPrefix+"__image",attrs:{"t-class":e.prefix+"-image--external","custom-style":e.imagesStyle[n]&&e.imagesStyle[n].style||"","data-index":n,src:t,mode:e.imageProps&&e.imageProps.mode||"aspectFit",lazy:e.imageProps&&e.imageProps.lazy||!1,loading:e.imageProps&&e.imageProps.loading||"default",shape:e.imageProps&&e.imageProps.shape||"square",webp:e.imageProps&&e.imageProps.webp||!1,"show-menu-by-longpress":e.imageProps&&e.imageProps.showMenuByLongpress||!1},on:{load:function(t){arguments[0]=t=e.$handleEvent(t),e.onImageLoadSuccess(t,{index:n})}}}):e._e()],1)}),1)],1),i("v-uni-view",{class:e.classPrefix+"__nav"},[i("v-uni-view",{class:e.classPrefix+"__nav-close",attrs:{"aria-role":"button","aria-label":"关闭"},on:{click:function(t){t.stopPropagation(),t.preventDefault(),arguments[0]=t=e.$handleEvent(t),function(t){return e.onClose(t,"")}.apply(void 0,arguments)}}},[e._t("close-btn"),e._closeBtn?[i("t-icon",{attrs:{"custom-style":e._closeBtn.style||"","t-class":e._closeBtn.tClass,prefix:e._closeBtn.prefix,name:e._closeBtn.name,size:e._closeBtn.size,color:e._closeBtn.color,"aria-hidden":!!e._closeBtn.ariaHidden,"aria-label":e._closeBtn.ariaLabel,"aria-role":e._closeBtn.ariaRole},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e._closeBtn.click}}})]:e._e()],2),e.showIndex?i("v-uni-view",{class:e.classPrefix+"__nav-index"},[e._v(" "+e._s(e.currentSwiperIndex+1)+"/"+e._s(e.images.length)+" ")]):e._e(),i("v-uni-view",{class:e.classPrefix+"__nav-delete",attrs:{"aria-role":"button","aria-label":"删除"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onDelete.apply(void 0,arguments)}}},[e._t("delete-btn"),e._deleteBtn?i("t-icon",{attrs:{"custom-style":e._deleteBtn.style||"","t-class":e._deleteBtn.tClass,prefix:e._deleteBtn.prefix,name:e._deleteBtn.name,size:e._deleteBtn.size,color:e._deleteBtn.color,"aria-hidden":!!e._deleteBtn.ariaHidden,"aria-label":e._deleteBtn.ariaLabel,"aria-role":e._deleteBtn.ariaRole},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e._deleteBtn.click}}}):e._e()],2)],1)]:e._e()],2):e._e()},o=[],s=i(57274),l=i(45824),r=i(70012),c=(i(73645),i(26128),i(10102),i(49188)),d=i(14867),u=i(88070),v=i(11005),g=i(46056),m=(i(27439),{backgroundColor:{type:String,default:""},closeBtn:{type:[String,Boolean,Object],default:!1},deleteBtn:{type:[String,Boolean,Object],default:!1},imageProps:{type:Object},images:{type:Array,default:function(){return[]}},initialIndex:{type:Number,default:0},lazy:{type:Boolean,default:!0},showIndex:Boolean,usingCustomNavbar:Boolean,visible:{type:Boolean,default:void 0},defaultVisible:Boolean,onChange:{type:Function,default:function(){return{}}},onClose:{type:Function,default:function(){return{}}},onDelete:{type:Function,default:function(){return{}}}}),h=i(10263);i(33755);function p(e,t,i){return Math.abs(e-t)<=1||i&&-1!==i.indexOf(e)}var f,w=i(60906),b="".concat(g.Pl,"-image-viewer"),_=(0,u.o1)({name:b,options:{styleIsolation:"shared"},controlledProps:[{key:"visible",event:"close"}],externalClasses:["".concat(g.Pl,"-class")],mixins:[w.A],components:{TImage:c.A,TIcon:d.A},props:(0,r.A)({},m),data:function(){return{prefix:g.Pl,classPrefix:b,currentSwiperIndex:0,loadedImageIndexes:[],windowHeight:0,windowWidth:0,swiperStyle:{},imagesStyle:{},maskTop:0,tools:h.A,_deleteBtn:null,_closeBtn:null,dataVisible:this.visible}},watch:{visible:{handler:function(e){this.dataVisible=e,this.init()}},initialIndex:"init",images:"init",closeBtn:{handler:function(e){this._closeBtn=(0,v.zP)(e,"close")},immediate:!0},deleteBtn:{handler:function(e){this._deleteBtn=(0,v.zP)(e,"delete")},immediate:!0}},created:function(){this.saveScreenSize()},mounted:function(){this.init()},methods:{shouldLoadImage:p,init:function(){var e=this.visible,t=this.images,i=this.initialIndex;e&&null!==t&&void 0!==t&&t.length&&(this.loadedImageIndexes=[],this.currentSwiperIndex=i>=t.length?t.length-1:i)},calcMaskTop:function(){if(this.usingCustomNavbar){var e,t=(null===(e=wx)||void 0===e?void 0:e.getMenuButtonBoundingClientRect())||null,i=v.c1.statusBarHeight;t&&i&&(this.maskTop=t.top-i+t.bottom)}},saveScreenSize:function(){var e=v.c1.windowHeight,t=v.c1.windowWidth;this.windowHeight=e,this.windowWidth=t},calcImageDisplayStyle:function(e,t){var i=this.windowWidth,n=this.windowHeight,a=e/t;if(e<i&&t<n)return{styleObj:{width:"".concat(e,"px"),height:"".concat(t,"px"),left:"50%",transform:"translate(-50%, -50%)"}};if(a>=1)return{styleObj:{width:"100vw",height:"".concat(i/a,"px")}};var o=a*n*2;return o<i?{styleObj:{width:"".concat(o,"rpx"),height:"100vh",left:"50%",transform:"translate(-50%, -50%)"}}:{styleObj:{width:"100vw",height:"".concat(i/e*t,"px")}}},onImageLoadSuccess:function(e,t){var i=e.e,n=t.index,a=i.detail,o=a.width,c=a.height,d=this.calcImageDisplayStyle(o,c),u=d.mode,g=d.styleObj,m=this.imagesStyle,h=this.swiperStyle;this.loadedImageIndexes.includes(n)||(this.loadedImageIndexes=[].concat((0,l.A)(this.loadedImageIndexes),[n])),this.swiperStyle=(0,r.A)((0,r.A)({},h),{},(0,s.A)({},n,{style:"height: ".concat(g.height)})),this.imagesStyle=(0,r.A)((0,r.A)({},m),{},(0,s.A)({},n,{mode:u,style:(0,v.R7)((0,r.A)({},g))}))},onSwiperChange:function(e){var t=e.detail.current;this.currentSwiperIndex=t,this._trigger("change",{index:t})},onClose:function(e,t){this._trigger("close",{visible:!1,trigger:t||"button",index:this.currentSwiperIndex})},onDelete:function(){this._trigger("delete",{index:this.currentSwiperIndex})}}}),x=_,y=(i(60113),i(1391)),B=(0,y.A)(x,a,o,!1,null,"92261e00",null,!1,n,f),I=B.exports},23612:function(e,t,i){"use strict";i.r(t);var n=i(22093),a=i.n(n),o=i(12670),s=i.n(o),l=s()(a());l.push([e.id,".t-image-viewer[data-v-92261e00]{position:fixed;top:var(--td-image-viewer-top,var(--td-position-fixed-top,0));left:0;bottom:0;right:0;z-index:1001;-webkit-transform:translateZ(0);transform:translateZ(0);overflow:hidden}.t-image-viewer__mask[data-v-92261e00]{position:absolute;z-index:1000;left:0;top:0;width:100%;height:100%;background-color:var(--td-image-viewer-mask-bg-color,var(--td-mask-active,rgba(0,0,0,.6)))}.t-image-viewer__content[data-v-92261e00]{width:100vw;display:inline-block;position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);z-index:1005}.t-image-viewer .swiper[data-v-92261e00]{outline:0}.t-image-viewer__image[data-v-92261e00]{width:100%;display:inline-block;position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.t-image-viewer[data-v-92261e00] :deep(.t-image--external){width:inherit;height:inherit;display:block}.t-image-viewer__nav[data-v-92261e00]{width:100%;position:absolute;display:flex;align-items:center;justify-content:space-between;height:var(--td-image-viewer-nav-height,48px);background-color:var(--td-image-viewer-nav-bg-color,#000);left:0;color:var(--td-image-viewer-nav-color,var(--td-text-color-anti,var(--td-font-white-1,#fff)));z-index:1005}.t-image-viewer__nav-close[data-v-92261e00]{margin-left:var(--td-image-viewer-close-margin-left,var(--td-spacer-1,12px))}.t-image-viewer__nav-close[data-v-92261e00]:empty{display:none}.t-image-viewer__nav-delete[data-v-92261e00]{margin-right:var(--td-image-viewer-delete-margin-right,var(--td-spacer-1,12px))}.t-image-viewer__nav-delete[data-v-92261e00]:empty{display:none}.t-image-viewer__nav-close[data-v-92261e00],\n.t-image-viewer__nav-delete[data-v-92261e00]{font-size:%?48?%}.t-image-viewer__nav-index[data-v-92261e00]{flex:1;font-size:var(--td-image-viewer-nav-index-font-size,var(--td-font-size-base,14px));text-align:center}",""]),t["default"]=l},52580:function(e,t,i){var n=i(61557);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var a=i(31997).A;a("11245644",n,!0,{sourceMap:!1,shadowMode:!1})},60113:function(e,t,i){var n=i(23612);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var a=i(31997).A;a("04d0c399",n,!0,{sourceMap:!1,shadowMode:!1})},61557:function(e,t,i){"use strict";i.r(t);var n=i(22093),a=i.n(n),o=i(12670),s=i.n(o),l=s()(a());l.push([e.id,"uni-page-body[data-v-a0326db8]{background-color:var(--td-bg-color-container)}body.?%PAGE?%[data-v-a0326db8]{background-color:var(--td-bg-color-container)}",""]),t["default"]=l}}]);