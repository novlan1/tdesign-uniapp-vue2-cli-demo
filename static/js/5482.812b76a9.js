(self["webpackChunktdesign_uniapp_vue2_cli"]=self["webpackChunktdesign_uniapp_vue2_cli"]||[]).push([[5482],{11505:function(e,t,a){"use strict";a.d(t,{A:function(){return $}});var n={tIcon:a(14867).A},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",[a("v-uni-view",{class:e.classPrefix,style:e._._style([e.customStyle,e.inputStyle]),on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.handleOutsideClick.apply(void 0,arguments)}}},[a("v-uni-view",{class:e.classPrefix+"__header",style:e.attachmentsProps&&e.attachmentsProps.items&&e.attachmentsProps.items.length>0?"margin-top:-8rpx;":""},[e.attachmentsProps&&e.attachmentsProps.items&&e.attachmentsProps.items.length>0?[a("v-uni-view",{class:e.classPrefix+"__attachments"},[a("attachments",{attrs:{items:e.attachmentsProps.items,removable:e.attachmentsProps.removable,"image-viewer":e.attachmentsProps.imageViewer},on:{fileClick:function(t){arguments[0]=t=e.$handleEvent(t),e.handleFileClick.apply(void 0,arguments)},remove:function(t){arguments[0]=t=e.$handleEvent(t),e.handleFileRemove.apply(void 0,arguments)},add:function(t){arguments[0]=t=e.$handleEvent(t),e.handleFileAdd.apply(void 0,arguments)}}})],1)]:[e._t("header")]],2),a("v-uni-view",{class:e.classPrefix+"__actions"},[a("v-uni-view",{class:e.classPrefix+"__textarea"},[e._t("input-prefix"),a("v-uni-textarea",{class:e.classPrefix+"__textarea--control",style:e.textareaStyle(e.textareaProps.autosize),attrs:{disabled:e.disabled,"auto-height":!!e.textareaProps.autosize,"confirm-type":"send","adjust-position":e.adjustPosition,"disable-default-padding":!1,"cursor-spacing":"30",maxlength:"-1",value:e.innerValue},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.textChange.apply(void 0,arguments)},focus:function(t){arguments[0]=t=e.$handleEvent(t),e.focusFn.apply(void 0,arguments)},blur:function(t){arguments[0]=t=e.$handleEvent(t),e.blurFn.apply(void 0,arguments)},click:function(t){arguments[0]=t=e.$handleEvent(t),e.handlerClick.apply(void 0,arguments)},input:function(t){arguments[0]=t=e.$handleEvent(t),e.textChange.apply(void 0,arguments)},keyboardheightchange:function(t){arguments[0]=t=e.$handleEvent(t),e.onkeyboardheightchange.apply(void 0,arguments)},confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.handleSendClick.apply(void 0,arguments)}}}),a("v-uni-view",{class:e.classPrefix+"__textarea--placeholder "+(e.focusFlag||e.innerValue?"hide":"")},[e._v(" "+e._s(e.placeholder)+" ")])],2),a("v-uni-view",{class:e.classPrefix+"__footer"},[a("v-uni-view",{class:e.classPrefix+"__mode"},[e._t("footer-prefix")],2),a("v-uni-view",{class:e.classPrefix+"__sendbtn"},[e.renderPresets?[a("v-uni-view",{class:e.classPrefix+"__sendbtn--default"},[e._l(e.renderPresets,function(t,n){return[a("v-uni-view",["upload"===t.name?a("v-uni-view",{class:"plus-btn "+("disabled"===t.status?"disabled":"")},[a("v-uni-view",{staticClass:"btn-func",attrs:{"data-status":t.status},on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.handleUploadClick.apply(void 0,arguments)}}},[a("t-icon",{attrs:{name:e.visible?"close":"add",size:"40rpx"}})],1)],1):e._e(),"send"===t.name?["text"===t.type?[a("v-uni-view",{class:"send-btn-"+t.type+" "+(e.innerValue||e.loading?"active":"disabled"),on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.handleSendClick.apply(void 0,arguments)}}},[e._v(" "+e._s(e.loading?"停止":"发送")+" ")])]:[a("v-uni-view",{class:"send-btn-icon send-btn-"+t.type+" "+(e.innerValue||e.loading?"active":"disabled")+" "+(e.loading?"stop":""),on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.handleSendClick.apply(void 0,arguments)}}},[e.loading?[a("v-uni-view",{staticStyle:{width:"24rpx",height:"24rpx","background-color":"#ffffff"}})]:[a("t-icon",{attrs:{name:"send-filled",size:"32rpx"}})]],2)]]:e._e()],2)]})],2)]:[e._t("suffix")]],2)],1)],1)],1),e.visible?a("v-uni-view",{class:e.classPrefix+"__upload",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.handleUploadClick.apply(void 0,arguments)}}},[e._l(e.uploadNames,function(t,n){return[a("v-uni-view",{key:n+"_0",class:e.classPrefix+"__upload-item",attrs:{"data-name":t},on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.handleUploadEntryClick.apply(void 0,arguments)}}},[a("v-uni-view",{class:e.classPrefix+"__upload-item__icon"},[a("t-icon",{attrs:{name:e.uploadConfig[t].iconClass,size:"56rpx"}})],1),a("v-uni-view",{class:e.classPrefix+"__upload-item__text"},[e._v(" "+e._s(e.uploadConfig[t].text)+" ")])],1)]})],2):e._e()],1)},o=[],l=a(35927),r=a(38730),s=a(45824),d=a(70012),c=(a(73645),a(53006),a(88803),a(22837),a(69308),a(17932),a(76429),a(96466),a(64189),a(2657),a(77332),a(33384),a(14867)),u=a(27812),p=a(46056),f={adjustPosition:Boolean,attachmentsProps:{type:Object},autoRiseWithKeyboard:Boolean,disabled:Boolean,fileList:{type:Array,default:function(){return[]}},loading:Boolean,placeholder:{type:String,default:"请输入消息..."},renderPresets:{type:Array,default:function(){return[{name:"upload",presets:["uploadCamera","uploadImage","uploadAttachment"],status:""},{name:"send",type:"icon"}]}},textareaProps:{type:[Boolean,Object],default:function(){return{autosize:{maxHeight:264,minHeight:48}}}},value:{type:String,default:""},visible:Boolean,onBlur:{type:Function,default:function(){return{}}},onChange:{type:Function,default:function(){return{}}},onFileAdd:{type:Function,default:function(){return{}}},onFileChange:{type:Function,default:function(){return{}}},onFileClick:{type:Function,default:function(){return{}}},onFileDelete:{type:Function,default:function(){return{}}},onFileSelect:{type:Function,default:function(){return{}}},onFocus:{type:Function,default:function(){return{}}},onKeyboardheightchange:{type:Function,default:function(){return{}}},onSend:{type:Function,default:function(){return{}}},onStop:{type:Function,default:function(){return{}}},onUpdateValue:{type:Function,default:function(){return{}}},onUpdateVisible:{type:Function,default:function(){return{}}},onUploadClick:{type:Function,default:function(){return{}}}},h=a(88070),v=a(76281),m=(a(47402),a(29035),a(10263)),g=a(46763);function b(e){return e&&"object"===(0,v.A)(e)?m.A._style({"min-height":y(e.minHeight),"max-height":y(e.maxHeight)}):""}function y(e){var t=(0,g.s)("^-?\\d+(.\\d+)?$");if(null!=e)return t.test("".concat(e))?"".concat(e,"rpx"):e}var _,x=a(11005),w="".concat(p.Pl,"-chat-sender"),k=(0,h.o1)({name:w,options:{multipleSlots:!0,styleIsolation:"shared"},components:{tIcon:c.A,attachments:u.A},props:(0,d.A)({},f),emits:["update:visible","update:value"],data:function(){return{classPrefix:w,scrollViewTop:0,focusFlag:!1,isSending:!1,inputStyle:"",originalMarginBottom:12,files:[],uploadPlacement:"bottom",uploadConfig:{uploadCamera:{iconClass:"camera",text:"拍摄",handler:"handleImageUpload",handlerArg:"camera"},uploadImage:{iconClass:"image",text:"图片",handler:"handleImageUpload",handlerArg:"album"},uploadAttachment:{iconClass:"file-add",text:"文件",handler:"handleWechatFileUpload",handlerArg:"attachment"}},uploadNames:[],_:m.A,innerValue:this.value}},watch:{value:{handler:function(e){var t=this;this.innerValue=e,(0,x.dY)().then(function(){t.innerValue=e})},immediate:!0},fileList:{handler:function(e){this.files=e?JSON.parse(JSON.stringify(e)):[]},immediate:!0,deep:!0},renderPresets:{handler:function(e){var t=e.find(function(e){return Array.isArray(e.presets)});this.uploadNames=t?t.presets:[]},immediate:!0,deep:!0}},methods:{textareaStyle:b,onkeyboardheightchange:function(e){if(this.$emit("keyboardheightchange",e.detail),this.autoRiseWithKeyboard){var t=e.detail.height;if(t>0){var a=t+this.originalMarginBottom;this.inputStyle="margin-bottom: ".concat(a,"px;")}else this.inputStyle=""}},handleSendClick:function(e){this.loading?this.handleStop(e):this.sendClick(e)},handleOutsideClick:function(){this.$emit("update:visible",!1)},sendClick:function(e){this.innerValue&&!this.disabled&&this.$emit("send",{value:this.innerValue,e:e})},handleStop:function(e){this.$emit("stop",{value:this.innerValue,e:e},{bubbles:!1})},handlerClick:function(){this.disabled?this.focusFlag=!1:this.focusFlag=!0},focusFn:function(e){this.focusFlag=!0,this.$emit("focus",{value:e.detail.value,context:e})},blurFn:function(e){this.focusFlag=!1,this.$emit("blur",{value:e.detail.value,context:e})},textChange:function(e){var t=e.detail.value;this.innerValue=t,this.$emit("change",{value:t,context:e}),this.$emit("update:value",t)},handleUploadClick:function(e){var t=e.currentTarget.dataset.status;this.$emit("uploadClick"),this.disabled||"disabled"===t||this.$emit("update:visible",!this.visible)},handleFileClick:function(e){var t=e.detail.item;this.$emit("fileClick",{file:t})},handleFileRemove:function(e){if(Array.isArray(this.files)){var t=e.item,a=e.index;this.$emit("fileDelete",{file:t});var n=(0,s.A)(this.files);n.splice(a,1),this.files=n,this.$emit("fileChange",{files:n})}},handleFileAdd:function(){this.$emit("fileAdd")},handleImageUpload:function(e){var t=this;return(0,r.A)((0,l.A)().m(function a(){var n,i,o,r,d,c;return(0,l.A)().w(function(a){while(1)switch(a.p=a.n){case 0:return n=e.currentTarget.dataset.type,i=[n],a.p=1,a.n=2,wx.chooseImage({count:1,sizeType:["original","compressed"],sourceType:i});case 2:o=a.v,o.tempFilePaths&&o.tempFilePaths.length>0&&(r=o.tempFilePaths.map(function(e){return{url:e,name:e,size:0,fileType:"image"}}),d="album"===n?"uploadImage":"uploadCamera",t.$emit("fileSelect",{e:e,name:d,files:r}),c=[].concat((0,s.A)(t.files),(0,s.A)(r)),t.files=c,t.$emit("fileChange",{files:c})),a.n=4;break;case 3:a.p=3,a.v,wx.showToast({title:"album"===n?"选择图片失败":"拍照失败",icon:"none"});case 4:return a.p=4,t.$emit("update:visible",!1),a.f(4);case 5:return a.a(2)}},a,null,[[1,3,4,5]])}))()},handleWechatFileUpload:function(e){var t=this;return(0,r.A)((0,l.A)().m(function a(){var n,i,o;return(0,l.A)().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,wx.chooseMessageFile({count:5,type:"all"});case 1:n=a.v,n.tempFiles&&n.tempFiles.length>0&&(i=n.tempFiles.map(function(e){return(0,d.A)((0,d.A)({},e),{},{url:e.path})}),o=[].concat((0,s.A)(t.files),(0,s.A)(i)),t.files=o,t.$emit("fileSelect",{e:e,name:"uploadAttachment",files:i}),t.$emit("fileChange",{files:o})),a.n=3;break;case 2:a.p=2,a.v,wx.showToast({title:"选择微信文件失败",icon:"none"});case 3:return a.p=3,t.$emit("update:visible",!1),a.f(3);case 4:return a.a(2)}},a,null,[[0,2,3,4]])}))()},handleUploadEntryClick:function(e){var t=e.currentTarget.dataset.name,a=this.uploadConfig[t];a&&this[a.handler]&&this[a.handler]({currentTarget:{dataset:{type:a.handlerArg}}})}}}),P=k,F=(a(55810),a(1391)),C=(0,F.A)(P,i,o,!1,null,"c9100314",null,!1,n,_),$=C.exports},14309:function(e,t,a){"use strict";a.r(t);var n=a(22093),i=a.n(n),o=a(12670),l=a.n(o),r=l()(i());r.push([e.id,".t-chat-sender[data-v-c9100314]{position:relative;border-radius:%?32?%;padding:%?22?% 0;border:%?2?% solid var(--td-component-border,var(--td-gray-color-4,#dcdcdc));box-sizing:border-box;margin:%?24?% %?24?% %?80?% %?24?%;box-shadow:var(--td-shadow-3,0 6px 30px 5px rgba(0,0,0,.05),0 16px 24px 2px rgba(0,0,0,.04),0 8px 10px -5px rgba(0,0,0,.08));transition:margin-bottom .3s ease;background-color:var(--td-bg-color-specialcomponent,#fff)}.t-chat-sender__header[data-v-c9100314]{padding-bottom:%?16?%;width:100%;overflow:hidden}.t-chat-sender__header[data-v-c9100314]:empty{display:none}.t-chat-sender__attachments[data-v-c9100314]{padding:0 %?24?%}.t-chat-sender__actions[data-v-c9100314]{position:relative;display:flex;flex-direction:column;padding:0 %?24?%}.t-chat-sender__textarea[data-v-c9100314]{position:relative;flex:1;padding-bottom:%?16?%;max-height:%?280?%}.t-chat-sender__textarea--control[data-v-c9100314]{max-height:%?264?%;display:block;width:100%;color:var(--td-text-color-primary,var(--td-font-gray-1,rgba(0,0,0,.9)));font-size:var(--td-font-size-m,16px);line-height:%?48?%;word-break:break-word;caret-color:var(--td-brand-color,var(--td-primary-color-7,#0052d9));font-family:PingFang SC,Helvetica Neue,Arial,sans-serif;font-weight:400;letter-spacing:5%;padding-bottom:%?16?%}.t-chat-sender__textarea--placeholder[data-v-c9100314]{color:var(--td-text-color-disabled,var(--td-font-gray-4,rgba(0,0,0,.26)));font-size:var(--td-font-size-m,16px);position:absolute;left:0;top:0;-webkit-transform:translateY(1%);transform:translateY(1%);z-index:1;pointer-events:none;opacity:1;transition:opacity .25s linear}.t-chat-sender__textarea--placeholder.hide[data-v-c9100314]{opacity:0}.t-chat-sender__footer[data-v-c9100314]{display:flex;justify-content:space-between;position:relative;z-index:2}.t-chat-sender__upload[data-v-c9100314]{display:flex;margin-top:%?-40?%;margin-bottom:%?24?%;align-items:center;justify-content:flex-start;transition:all .3s ease}.t-chat-sender__upload-item[data-v-c9100314]{display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:%?8?%;flex-shrink:0;flex-grow:1;color:var(--td-text-color-primary,var(--td-font-gray-1,rgba(0,0,0,.9)))}.t-chat-sender__upload-item__icon[data-v-c9100314]{width:%?96?%;height:%?96?%;border-radius:%?12?%;margin-bottom:%?16?%;background-color:var(--td-bg-color-secondarycontainer,var(--td-gray-color-1,#f3f3f3));display:flex;align-items:center;justify-content:center}.t-chat-sender__upload-item__text[data-v-c9100314]{font-size:%?28?%;line-height:%?44?%}.t-chat-sender__sendbtn[data-v-c9100314]{display:flex;align-items:center;justify-content:center}.t-chat-sender__sendbtn--default[data-v-c9100314]{display:flex;align-items:center;justify-content:center}.t-chat-sender__sendbtn--default .plus-btn[data-v-c9100314]{color:var(--td-text-color-primary,var(--td-font-gray-1,rgba(0,0,0,.9)))}.t-chat-sender__sendbtn--default .plus-btn .btn-icon[data-v-c9100314]{display:block}.t-chat-sender__sendbtn--default .plus-btn.disabled[data-v-c9100314]{pointer-events:none;opacity:.24}.t-chat-sender__sendbtn--default .plus-btn.disabled .btn-func[data-v-c9100314]:after{background:#c9ccd2}.t-chat-sender__sendbtn--default .send-btn-text[data-v-c9100314]{color:var(--td-brand-color,var(--td-primary-color-7,#0052d9))}.t-chat-sender__sendbtn--default .send-btn-text.disabled[data-v-c9100314]{color:var(--td-text-color-disabled,var(--td-font-gray-4,rgba(0,0,0,.26)))}.t-chat-sender__sendbtn--default .send-btn-icon[data-v-c9100314]{color:var(--td-bg-color-container,var(--td-font-white-1,#fff));width:%?64?%;height:%?64?%;margin-left:%?16?%;border-radius:%?999?%;background-color:var(--td-brand-color,var(--td-primary-color-7,#0052d9));display:flex;align-items:center;justify-content:center;-webkit-transform:rotate(-90deg);transform:rotate(-90deg);transition:all .3s ease}.t-chat-sender__sendbtn--default .send-btn-icon.active[data-v-c9100314]{color:var(--td-text-color-anti,var(--td-font-white-1,#fff))}.t-chat-sender__sendbtn--default .send-btn-icon.disabled[data-v-c9100314]{background-color:var(--td-bg-color-secondarycomponent,var(--td-gray-color-4,#dcdcdc));color:var(--td-bg-color-container,var(--td-font-white-1,#fff))}.t-chat-sender .btn-func[data-v-c9100314]{width:%?58?%;height:%?58?%;position:relative;z-index:2;background-color:var(--td-bg-color-container,var(--td-font-white-1,#fff));border-radius:%?999?%;border:%?2?% solid var(--td-component-border,var(--td-gray-color-4,#dcdcdc));display:flex;justify-content:center;align-items:center}",""]),t["default"]=r},22538:function(e,t,a){var n=a(53663);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var i=a(31997).A;i("24257012",n,!0,{sourceMap:!1,shadowMode:!1})},53663:function(e,t,a){"use strict";a.r(t);var n=a(22093),i=a.n(n),o=a(12670),l=a.n(o),r=l()(i());r.push([e.id,".t-chat-sender[data-v-908bf440]{position:relative;border-radius:%?32?%;padding:%?22?% 0;border:%?2?% solid var(--td-component-border,var(--td-gray-color-4,#dcdcdc));box-sizing:border-box;margin:%?24?% %?24?% %?80?% %?24?%;box-shadow:var(--td-shadow-3,0 6px 30px 5px rgba(0,0,0,.05),0 16px 24px 2px rgba(0,0,0,.04),0 8px 10px -5px rgba(0,0,0,.08));transition:margin-bottom .3s ease;background-color:var(--td-bg-color-specialcomponent,#fff)}.t-chat-sender__header[data-v-908bf440]{padding-bottom:%?16?%;width:100%;overflow:hidden}.t-chat-sender__header[data-v-908bf440]:empty{display:none}.t-chat-sender__attachments[data-v-908bf440]{padding:0 %?24?%}.t-chat-sender__actions[data-v-908bf440]{position:relative;display:flex;flex-direction:column;padding:0 %?24?%}.t-chat-sender__textarea[data-v-908bf440]{position:relative;flex:1;padding-bottom:%?16?%;max-height:%?280?%}.t-chat-sender__textarea--control[data-v-908bf440]{max-height:%?264?%;display:block;width:100%;color:var(--td-text-color-primary,var(--td-font-gray-1,rgba(0,0,0,.9)));font-size:var(--td-font-size-m,16px);line-height:%?48?%;word-break:break-word;caret-color:var(--td-brand-color,var(--td-primary-color-7,#0052d9));font-family:PingFang SC,Helvetica Neue,Arial,sans-serif;font-weight:400;letter-spacing:5%;padding-bottom:%?16?%}.t-chat-sender__textarea--placeholder[data-v-908bf440]{color:var(--td-text-color-disabled,var(--td-font-gray-4,rgba(0,0,0,.26)));font-size:var(--td-font-size-m,16px);position:absolute;left:0;top:0;-webkit-transform:translateY(1%);transform:translateY(1%);z-index:1;pointer-events:none;opacity:1;transition:opacity .25s linear}.t-chat-sender__textarea--placeholder.hide[data-v-908bf440]{opacity:0}.t-chat-sender__footer[data-v-908bf440]{display:flex;justify-content:space-between;position:relative;z-index:2}.t-chat-sender__upload[data-v-908bf440]{display:flex;margin-top:%?-40?%;margin-bottom:%?24?%;align-items:center;justify-content:flex-start;transition:all .3s ease}.t-chat-sender__upload-item[data-v-908bf440]{display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:%?8?%;flex-shrink:0;flex-grow:1;color:var(--td-text-color-primary,var(--td-font-gray-1,rgba(0,0,0,.9)))}.t-chat-sender__upload-item__icon[data-v-908bf440]{width:%?96?%;height:%?96?%;border-radius:%?12?%;margin-bottom:%?16?%;background-color:var(--td-bg-color-secondarycontainer,var(--td-gray-color-1,#f3f3f3));display:flex;align-items:center;justify-content:center}.t-chat-sender__upload-item__text[data-v-908bf440]{font-size:%?28?%;line-height:%?44?%}.t-chat-sender__sendbtn[data-v-908bf440]{display:flex;align-items:center;justify-content:center}.t-chat-sender__sendbtn--default[data-v-908bf440]{display:flex;align-items:center;justify-content:center}.t-chat-sender__sendbtn--default .plus-btn[data-v-908bf440]{color:var(--td-text-color-primary,var(--td-font-gray-1,rgba(0,0,0,.9)))}.t-chat-sender__sendbtn--default .plus-btn .btn-icon[data-v-908bf440]{display:block}.t-chat-sender__sendbtn--default .plus-btn.disabled[data-v-908bf440]{pointer-events:none;opacity:.24}.t-chat-sender__sendbtn--default .plus-btn.disabled .btn-func[data-v-908bf440]:after{background:#c9ccd2}.t-chat-sender__sendbtn--default .send-btn-text[data-v-908bf440]{color:var(--td-brand-color,var(--td-primary-color-7,#0052d9))}.t-chat-sender__sendbtn--default .send-btn-text.disabled[data-v-908bf440]{color:var(--td-text-color-disabled,var(--td-font-gray-4,rgba(0,0,0,.26)))}.t-chat-sender__sendbtn--default .send-btn-icon[data-v-908bf440]{color:var(--td-bg-color-container,var(--td-font-white-1,#fff));width:%?64?%;height:%?64?%;margin-left:%?16?%;border-radius:%?999?%;background-color:var(--td-brand-color,var(--td-primary-color-7,#0052d9));display:flex;align-items:center;justify-content:center;-webkit-transform:rotate(-90deg);transform:rotate(-90deg);transition:all .3s ease}.t-chat-sender__sendbtn--default .send-btn-icon.active[data-v-908bf440]{color:var(--td-text-color-anti,var(--td-font-white-1,#fff))}.t-chat-sender__sendbtn--default .send-btn-icon.disabled[data-v-908bf440]{background-color:var(--td-bg-color-secondarycomponent,var(--td-gray-color-4,#dcdcdc));color:var(--td-bg-color-container,var(--td-font-white-1,#fff))}.t-chat-sender .btn-func[data-v-908bf440]{width:%?58?%;height:%?58?%;position:relative;z-index:2;background-color:var(--td-bg-color-container,var(--td-font-white-1,#fff));border-radius:%?999?%;border:%?2?% solid var(--td-component-border,var(--td-gray-color-4,#dcdcdc));display:flex;justify-content:center;align-items:center}",""]),t["default"]=r},55810:function(e,t,a){var n=a(14309);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var i=a(31997).A;i("c7bcf1a8",n,!0,{sourceMap:!1,shadowMode:!1})},57118:function(e,t,a){"use strict";a.d(t,{A:function(){return w}});var n={tIcon:a(14867).A},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",[a("v-uni-view",{class:e.classPrefix,style:e._._style([e.customStyle,e.inputStyle]),on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.handleOutsideClick.apply(void 0,arguments)}}},[a("v-uni-view",{class:e.classPrefix+"__header",style:e.attachmentsProps&&e.attachmentsProps.items&&e.attachmentsProps.items.length>0?"margin-top:-8rpx;":""},[e.attachmentsProps&&e.attachmentsProps.items&&e.attachmentsProps.items.length>0?[a("v-uni-view",{class:e.classPrefix+"__attachments"},[a("attachments",{attrs:{items:e.attachmentsProps.items,removable:e.attachmentsProps.removable,"image-viewer":e.attachmentsProps.imageViewer},on:{fileClick:function(t){arguments[0]=t=e.$handleEvent(t),e.handleFileClick.apply(void 0,arguments)},remove:function(t){arguments[0]=t=e.$handleEvent(t),e.handleFileRemove.apply(void 0,arguments)},add:function(t){arguments[0]=t=e.$handleEvent(t),e.handleFileAdd.apply(void 0,arguments)}}})],1)]:[e._t("header")]],2),a("v-uni-view",{class:e.classPrefix+"__actions"},[a("v-uni-view",{class:e.classPrefix+"__textarea"},[e._t("input-prefix"),a("v-uni-textarea",{class:e.classPrefix+"__textarea--control",style:e.textareaStyle(e.textareaProps.autosize),attrs:{disabled:e.disabled,"auto-height":!!e.textareaProps.autosize,"confirm-type":"send","adjust-position":e.adjustPosition,"disable-default-padding":!1,"cursor-spacing":"30",maxlength:"-1",value:e.innerValue},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.textChange.apply(void 0,arguments)},focus:function(t){arguments[0]=t=e.$handleEvent(t),e.focusFn.apply(void 0,arguments)},blur:function(t){arguments[0]=t=e.$handleEvent(t),e.blurFn.apply(void 0,arguments)},click:function(t){arguments[0]=t=e.$handleEvent(t),e.handlerClick.apply(void 0,arguments)},input:function(t){arguments[0]=t=e.$handleEvent(t),e.textChange.apply(void 0,arguments)},keyboardheightchange:function(t){arguments[0]=t=e.$handleEvent(t),e.onkeyboardheightchange.apply(void 0,arguments)},confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.handleSendClick.apply(void 0,arguments)}}}),a("v-uni-view",{class:e.classPrefix+"__textarea--placeholder "+(e.focusFlag||e.innerValue?"hide":"")},[e._v(" "+e._s(e.placeholder)+" ")])],2),a("v-uni-view",{class:e.classPrefix+"__footer"},[a("v-uni-view",{class:e.classPrefix+"__mode"},[e._t("footer-prefix")],2),a("v-uni-view",{class:e.classPrefix+"__sendbtn"},[e.renderPresets?[a("v-uni-view",{class:e.classPrefix+"__sendbtn--default"},[e._l(e.renderPresets,function(t,n){return[a("v-uni-view",["upload"===t.name?a("v-uni-view",{class:"plus-btn "+("disabled"===t.status?"disabled":"")},[a("v-uni-view",{staticClass:"btn-func",attrs:{"data-status":t.status},on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.handleUploadClick.apply(void 0,arguments)}}},[a("t-icon",{attrs:{name:e.visible?"close":"add",size:"40rpx"}})],1)],1):e._e(),"send"===t.name?["text"===t.type?[a("v-uni-view",{class:"send-btn-"+t.type+" "+(e.innerValue||e.loading?"active":"disabled"),on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.handleSendClick.apply(void 0,arguments)}}},[e._v(" "+e._s(e.loading?"停止":"发送")+" ")])]:[a("v-uni-view",{class:"send-btn-icon send-btn-"+t.type+" "+(e.innerValue||e.loading?"active":"disabled")+" "+(e.loading?"stop":""),on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.handleSendClick.apply(void 0,arguments)}}},[e.loading?[a("v-uni-view",{staticStyle:{width:"24rpx",height:"24rpx","background-color":"#ffffff"}})]:[a("t-icon",{attrs:{name:"send-filled",size:"32rpx"}})]],2)]]:e._e()],2)]})],2)]:[e._t("suffix")]],2)],1)],1)],1),e.visible?a("v-uni-view",{class:e.classPrefix+"__upload",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.handleUploadClick.apply(void 0,arguments)}}},[e._l(e.uploadNames,function(t,n){return[a("v-uni-view",{key:n+"_0",class:e.classPrefix+"__upload-item",attrs:{"data-name":t},on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.handleUploadEntryClick.apply(void 0,arguments)}}},[a("v-uni-view",{class:e.classPrefix+"__upload-item__icon"},[a("t-icon",{attrs:{name:e.uploadConfig[t].iconClass,size:"56rpx"}})],1),a("v-uni-view",{class:e.classPrefix+"__upload-item__text"},[e._v(" "+e._s(e.uploadConfig[t].text)+" ")])],1)]})],2):e._e()],1)},o=[],l=a(4993),r=a(40093),s=a(38207),d={adjustPosition:Boolean,attachmentsProps:{type:Object},autoRiseWithKeyboard:Boolean,disabled:Boolean,fileList:{type:Array,default:function(){return[]}},loading:Boolean,placeholder:{type:String,default:"请输入消息..."},renderPresets:{type:Array,default:function(){return[{name:"upload",presets:["uploadCamera","uploadImage","uploadAttachment"],status:""},{name:"send",type:"icon"}]}},textareaProps:{type:[Boolean,Object],default:function(){return{autosize:{maxHeight:264,minHeight:48}}}},value:{type:String,default:""},visible:Boolean,onBlur:{type:Function,default:function(){return{}}},onChange:{type:Function,default:function(){return{}}},onFileAdd:{type:Function,default:function(){return{}}},onFileChange:{type:Function,default:function(){return{}}},onFileClick:{type:Function,default:function(){return{}}},onFileDelete:{type:Function,default:function(){return{}}},onFileSelect:{type:Function,default:function(){return{}}},onFocus:{type:Function,default:function(){return{}}},onKeyboardheightchange:{type:Function,default:function(){return{}}},onSend:{type:Function,default:function(){return{}}},onStop:{type:Function,default:function(){return{}}},onUpdateValue:{type:Function,default:function(){return{}}},onUpdateVisible:{type:Function,default:function(){return{}}},onUploadClick:{type:Function,default:function(){return{}}}},c=a(33913),u=a(78282),p=a(39216);function f(e){return e&&"object"===typeof e?u.A._style({"min-height":h(e.minHeight),"max-height":h(e.maxHeight)}):""}function h(e){const t=(0,p.s)("^-?\\d+(.\\d+)?$");if(null!=e)return t.test(`${e}`)?`${e}rpx`:e}var v=a(56792);const m=`${s.Pl}-chat-sender`;var g,b=(0,c.o1)({name:m,options:{multipleSlots:!0,styleIsolation:"shared"},components:{tIcon:l.A,attachments:r.A},props:{...d},emits:["update:visible","update:value"],data(){return{classPrefix:m,scrollViewTop:0,focusFlag:!1,isSending:!1,inputStyle:"",originalMarginBottom:12,files:[],uploadPlacement:"bottom",uploadConfig:{uploadCamera:{iconClass:"camera",text:"拍摄",handler:"handleImageUpload",handlerArg:"camera"},uploadImage:{iconClass:"image",text:"图片",handler:"handleImageUpload",handlerArg:"album"},uploadAttachment:{iconClass:"file-add",text:"文件",handler:"handleWechatFileUpload",handlerArg:"attachment"}},uploadNames:[],_:u.A,innerValue:this.value}},watch:{value:{handler(e){this.innerValue=e,(0,v.dY)().then(()=>{this.innerValue=e})},immediate:!0},fileList:{handler(e){this.files=e?JSON.parse(JSON.stringify(e)):[]},immediate:!0,deep:!0},renderPresets:{handler(e){const t=e.find(e=>Array.isArray(e.presets));this.uploadNames=t?t.presets:[]},immediate:!0,deep:!0}},methods:{textareaStyle:f,onkeyboardheightchange(e){if(this.$emit("keyboardheightchange",e.detail),!this.autoRiseWithKeyboard)return;const t=e.detail.height;if(t>0){const e=t+this.originalMarginBottom;this.inputStyle=`margin-bottom: ${e}px;`}else this.inputStyle=""},handleSendClick(e){this.loading?this.handleStop(e):this.sendClick(e)},handleOutsideClick(){this.$emit("update:visible",!1)},sendClick(e){this.innerValue&&!this.disabled&&this.$emit("send",{value:this.innerValue,e:e})},handleStop(e){this.$emit("stop",{value:this.innerValue,e:e},{bubbles:!1})},handlerClick(){this.disabled?this.focusFlag=!1:this.focusFlag=!0},focusFn(e){this.focusFlag=!0,this.$emit("focus",{value:e.detail.value,context:e})},blurFn(e){this.focusFlag=!1,this.$emit("blur",{value:e.detail.value,context:e})},textChange(e){const{value:t}=e.detail;this.innerValue=t,this.$emit("change",{value:t,context:e}),this.$emit("update:value",t)},handleUploadClick(e){const{status:t}=e.currentTarget.dataset;this.$emit("uploadClick"),this.disabled||"disabled"===t||this.$emit("update:visible",!this.visible)},handleFileClick(e){const{item:t}=e.detail;this.$emit("fileClick",{file:t})},handleFileRemove(e){if(!Array.isArray(this.files))return;const{item:t,index:a}=e;this.$emit("fileDelete",{file:t});const n=[...this.files];n.splice(a,1),this.files=n,this.$emit("fileChange",{files:n})},handleFileAdd(){this.$emit("fileAdd")},async handleImageUpload(e){const{type:t}=e.currentTarget.dataset,a=[t];try{const n=await wx.chooseImage({count:1,sizeType:["original","compressed"],sourceType:a});if(n.tempFilePaths&&n.tempFilePaths.length>0){const a=n.tempFilePaths.map(e=>({url:e,name:e,size:0,fileType:"image"})),i="album"===t?"uploadImage":"uploadCamera";this.$emit("fileSelect",{e:e,name:i,files:a});const o=[...this.files,...a];this.files=o,this.$emit("fileChange",{files:o})}}catch(n){wx.showToast({title:"album"===t?"选择图片失败":"拍照失败",icon:"none"})}finally{this.$emit("update:visible",!1)}},async handleWechatFileUpload(e){try{const t=await wx.chooseMessageFile({count:5,type:"all"});if(t.tempFiles&&t.tempFiles.length>0){const a=t.tempFiles.map(e=>({...e,url:e.path})),n=[...this.files,...a];this.files=n,this.$emit("fileSelect",{e:e,name:"uploadAttachment",files:a}),this.$emit("fileChange",{files:n})}}catch(t){wx.showToast({title:"选择微信文件失败",icon:"none"})}finally{this.$emit("update:visible",!1)}},handleUploadEntryClick(e){const{name:t}=e.currentTarget.dataset,a=this.uploadConfig[t];a&&this[a.handler]&&this[a.handler]({currentTarget:{dataset:{type:a.handlerArg}}})}}}),y=b,_=(a(22538),a(1391)),x=(0,_.A)(y,i,o,!1,null,"908bf440",null,!1,n,g),w=x.exports}}]);