(self["webpackChunktdesign_uniapp_vue2_cli"]=self["webpackChunktdesign_uniapp_vue2_cli"]||[]).push([[4609],{17482:function(t,e,o){var s=o(66331);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);var a=o(31997).A;a("872e3bb4",s,!0,{sourceMap:!1,shadowMode:!1})},18292:function(t,e,o){var s=o(86651);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);var a=o(31997).A;a("2e08fad9",s,!0,{sourceMap:!1,shadowMode:!1})},20856:function(t,e,o){var s=o(31009);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);var a=o(31997).A;a("1136c945",s,!0,{sourceMap:!1,shadowMode:!1})},31009:function(t,e,o){"use strict";o.r(e);var s=o(22093),a=o.n(s),r=o(12670),i=o.n(r),n=i()(a());n.push([t.id,".t-pull-down-refresh[data-v-301a9f17]{overflow:hidden;height:100%}.t-pull-down-refresh__track[data-v-301a9f17]{position:relative}.t-pull-down-refresh__track--loosing[data-v-301a9f17]{transition:-webkit-transform ease .24s;transition:transform ease .24s;transition:transform ease .24s,-webkit-transform ease .24s}.t-pull-down-refresh__tips[data-v-301a9f17]{position:absolute;color:var(--td-pull-down-refresh-color,var(--td-text-color-placeholder,var(--td-font-gray-3,rgba(0,0,0,.4))));font-size:%?24?%;top:0;width:100%;-webkit-transform:translateY(-100%);transform:translateY(-100%);display:flex;justify-content:center;align-items:center;flex-direction:column;overflow:hidden}.t-pull-down-refresh__tips--loosing[data-v-301a9f17]{transition:height ease .24s}.t-pull-down-refresh__text[data-v-301a9f17]{margin:%?16?% 0 0}",""]),e["default"]=n},66331:function(t,e,o){"use strict";o.r(e);var s=o(22093),a=o.n(s),r=o(12670),i=o.n(r),n=i()(a());n.push([t.id,"uni-page-body[data-v-afe09926]{background-color:var(--td-bg-color-container)}body.?%PAGE?%[data-v-afe09926]{background-color:var(--td-bg-color-container)}",""]),e["default"]=n},67826:function(t,e,o){"use strict";var s;o.r(e),o.d(e,{default:function(){return G}});var a,r,i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",[o("t-demo-navbar",{attrs:{"custom-class":"demo-navbar",title:"PullDownRefresh"}}),o("base-demo")],1)},n=[],l=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",[o("t-pull-down-refresh",{attrs:{value:t.enable,"loading-texts":["下拉刷新","松手刷新","正在刷新","刷新完成"],"using-custom-navbar":!t.isMPAlipay,"success-duration":600},on:{refresh:function(e){arguments[0]=e=t.$handleEvent(e),t.onRefresh.apply(void 0,arguments)},scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.onScroll.apply(void 0,arguments)},dragstart:function(e){arguments[0]=e=t.$handleEvent(e),t.onDragstart.apply(void 0,arguments)},dragging:function(e){arguments[0]=e=t.$handleEvent(e),t.onDragging.apply(void 0,arguments)},dragend:function(e){arguments[0]=e=t.$handleEvent(e),t.onDragend.apply(void 0,arguments)},scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.onScrolltolower.apply(void 0,arguments)},timeout:function(e){arguments[0]=e=t.$handleEvent(e),t.onTimeout.apply(void 0,arguments)}}},[o("v-uni-view",{staticClass:"demo"},[o("t-demo-header",{attrs:{title:"PullDownRefresh 下拉刷新",desc:"用于快速刷新页面信息，刷新可以是整页刷新也可以是页面的局部刷新。",notice:"渲染框架支持情况：WebView"}}),o("v-uni-view",{staticClass:"pulldown-refresh__content"},[o("t-skeleton",{attrs:{"row-col":t.rowCol1,loading:!0}}),o("v-uni-view",{staticClass:"row"},[o("t-skeleton",{attrs:{"row-col":t.rowCol2,loading:!0}}),o("t-skeleton",{attrs:{"row-col":t.rowCol2,loading:!0}})],1),o("v-uni-view",{staticClass:"row"},[o("t-skeleton",{attrs:{"row-col":t.rowCol2,loading:!0}}),o("t-skeleton",{attrs:{"row-col":t.rowCol2,loading:!0}})],1),o("v-uni-view",{staticClass:"row"},[o("t-skeleton",{attrs:{"row-col":t.rowCol2,loading:!0}}),o("t-skeleton",{attrs:{"row-col":t.rowCol2,loading:!0}})],1),o("v-uni-view",{staticClass:"text"},[t._v(" 拖拽该区域演示 顶部下拉刷新 ")])],1),o("t-back-top",{attrs:{text:"顶部","scroll-top":t.scrollTop,"visibility-height":100}})],1)],1)],1)},c=[],h=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-scroll-view",{class:t.classPrefix+" "+t.tClass,style:t.tools._style([t.customStyle,"max-height: calc(100vh - "+t.distanceTop+"px)"]),attrs:{type:"list","scroll-top":t.scrollTop,"scroll-y":!0,"enable-back-to-top":t.enableBackToTop,"enable-passive":t.enablePassive,"lower-threshold":t.lowerThreshold,"upper-threshold":t.upperThreshold,"scroll-into-view":t.scrollIntoView,"show-scrollbar":t.showScrollbar,enhanced:!0,"scroll-with-animation":!0,bounces:!1,throttle:!1},on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.onTouchStart.apply(void 0,arguments)},touchmove:function(e){arguments[0]=e=t.$handleEvent(e),t.onTouchMove.apply(void 0,arguments)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.onTouchEnd.apply(void 0,arguments)},scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.onScroll.apply(void 0,arguments)},scrolltoupper:function(e){arguments[0]=e=t.$handleEvent(e),t.onScrollToTop.apply(void 0,arguments)},scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.onScrollToBottom.apply(void 0,arguments)}}},[t._t("header"),o("v-uni-view",{class:t.classPrefix+"__track "+t.classPrefix+"__track--"+(t.loosing?"loosing":""),style:t.barHeight>0?"transform: translate3d(0, "+t.barHeight+"px, 0);":""},[o("v-uni-view",{class:t.classPrefix+"__tips "+t.classPrefix+"__tips--"+(t.loosing?"loosing":""),style:"height: "+t.tipsHeight+"px",attrs:{"aria-live":"polite"}},[t.refreshStatus===t.REFRESH_STATUS_MAP.LOADING?o("t-loading",{attrs:{delay:t.loadingProps.delay||0,duration:t.loadingProps.duration||800,indicator:t.loadingProps.indicator||!0,layout:t.loadingProps.layout||"horizontal",loading:t.loadingProps.loading||!0,pause:t.loadingProps.pause||!1,progress:t.loadingProps.progress||0,reverse:t.loadingProps.reverse||!1,size:t.loadingProps.size||"50rpx",text:t.loadingProps.text||t.dataLoadingTexts[t.refreshStatus],theme:t.loadingProps.theme||"circular","t-class-indicator":t.tClassIndicator,"t-class":t.tClassLoading}}):t.refreshStatus>t.REFRESH_STATUS_MAP.INITIAL?o("v-uni-view",{class:t.classPrefix+"__text "+t.tClassText},[t._v(" "+t._s(t.dataLoadingTexts[t.refreshStatus])+" ")]):t._e()],1),t._t("default")],2)],2)},u=[],d=o(35211),f=o(33913),g=o(38207),p=(o(27439),{disabled:Boolean,enableBackToTop:{type:Boolean,default:!0},enablePassive:Boolean,loadingBarHeight:{type:[String,Number],default:50},loadingProps:{type:Object,default:function(){return{}}},loadingTexts:{type:Array,default:function(){return[]}},lowerThreshold:{type:[String,Number],default:50},maxBarHeight:{type:[String,Number],default:80},refreshTimeout:{type:Number,default:3e3},scrollIntoView:{type:String,default:""},showScrollbar:{type:Boolean,default:!0},successDuration:{type:[String,Number],default:500},upperThreshold:{type:[String,Number],default:50},usingCustomNavbar:Boolean,value:{type:Boolean,default:void 0},defaultValue:Boolean,onChange:{type:Function,default:function(){return{}}},onDragend:{type:Function,default:function(){return{}}},onDragging:{type:Function,default:function(){return{}}},onDragstart:{type:Function,default:function(){return{}}},onRefresh:{type:Function,default:function(){return{}}},onScrolltolower:{type:Function,default:function(){return{}}},onTimeout:{type:Function,default:function(){return{}}}}),m=o(56792),v=o(78282),T=o(85019),b=o(33819);const w=`${g.Pl}-pull-down-refresh`,_=["下拉刷新","松手刷新","正在刷新","刷新完成"],S={INITIAL:-1,PULLING:0,LOSING:1,LOADING:2,SUCCESS:3};var x,y,P,A=(0,f.o1)({name:w,options:{styleIsolation:"shared"},externalClasses:[`${g.Pl}-class`,`${g.Pl}-class-loading`,`${g.Pl}-class-text`,`${g.Pl}-class-indicator`],mixins:[(0,b.GT)(b._S.BackTop)],components:{TLoading:d.A},props:{...p},emits:["scrolltolower","scroll","change","refresh","dragstart","dragging","dragend","timeout"],data(){return{prefix:g.Pl,classPrefix:w,distanceTop:0,barHeight:0,tipsHeight:0,refreshStatus:S.INITIAL,loosing:!1,enableToRefresh:!0,scrollTop:0,_maxBarHeight:0,_loadingBarHeight:0,pixelRatio:1,startPoint:null,isPulling:!1,maxRefreshAnimateTimeFlag:0,closingAnimateTimeFlag:0,refreshStatusTimer:null,tools:v.A,REFRESH_STATUS_MAP:S}},computed:{touchEnable(){return this.refreshStatus!==S.LOADING&&this.refreshStatus!==S.SUCCESS&&!this.disabled}},watch:{value(t){t?this.doRefresh():(clearTimeout(this.maxRefreshAnimateTimeFlag),this.refreshStatus>S.PULLING&&(this.refreshStatus=S.SUCCESS),clearTimeout(this.successTimer),this.successTimer=setTimeout(()=>{this.barHeight=0,this.refreshStatus=S.INITIAL},(0,m.Gz)(this.successDuration)))},barHeight(t){this.resetTimer(),0===t&&this.refreshStatus!==S.INITIAL&&(this.refreshStatusTimer=setTimeout(()=>{this.refreshStatus=S.INITIAL},240)),this.tipsHeight=Math.min(t,this._loadingBarHeight)},maxBarHeight(t){this._maxBarHeight=(0,m.Gz)(t)},loadingBarHeight(t){this._loadingBarHeight=(0,m.Gz)(t)}},mounted(){const{screenWidth:t}=m.c1,{loadingTexts:e,maxBarHeight:o,loadingBarHeight:s}=this,a=Array.isArray(e)&&e.length>=4;this._maxBarHeight=(0,m.Gz)(o),this._loadingBarHeight=(0,m.Gz)(s),this.dataLoadingTexts=a?e:_,this.pixelRatio=750/t,this.updateDistanceTop()},beforeUnMount(){clearTimeout(this.maxRefreshAnimateTimeFlag),clearTimeout(this.closingAnimateTimeFlag),this.resetTimer()},methods:{updateDistanceTop(){const t=t=>{this.distanceTop=t};(0,m.l)(this,`.${w}`).then(e=>{e.top?t(e.top):(0,T.H$)(this,`.${w}`).then(e=>{e.intersectionRatio>0&&t(e.boundingClientRect.top)})})},resetTimer(){this.refreshStatusTimer&&(clearTimeout(this.refreshStatusTimer),this.refreshStatusTimer=null)},onScrollToBottom(){this.$emit("scrolltolower")},onScrollToTop(){this.enableToRefresh=!0},onScroll(t){const{scrollTop:e}=t.detail;this.enableToRefresh=0===e,this.$emit("scroll",{scrollTop:e})},onTouchStart(t){if(this.isPulling||!this.enableToRefresh||!this.touchEnable)return;const{touches:e}=t;if(this.$emit("dragstart",t),1!==e.length)return;const{pageX:o,pageY:s}=e[0];this.loosing=!1,this.startPoint={pageX:o,pageY:s},this.isPulling=!0},onTouchMove(t){if(!this.startPoint||!this.touchEnable)return;const{touches:e}=t;if(1!==e.length)return;const{pageY:o}=e[0],s=o-this.startPoint.pageY;s>0&&this.setRefreshBarHeight(s),this.$emit("dragging",t)},onTouchEnd(t){if(!this.startPoint||this.disabled)return;const{changedTouches:e}=t;if(1!==e.length)return;const{pageY:o}=e[0],s=o-this.startPoint.pageY;this.startPoint=null,this.isPulling=!1,this.loosing=!0,s>this._loadingBarHeight?(this._trigger("change",{value:!0}),this.$emit("refresh")):this.barHeight=0,this.$emit("dragend",t)},doRefresh(){this.disabled||(this.barHeight=this._loadingBarHeight,this.refreshStatus=S.LOADING,this.loosing=!0,this.maxRefreshAnimateTimeFlag=setTimeout(()=>{this.maxRefreshAnimateTimeFlag=null,this.refreshStatus===S.LOADING&&(this.$emit("timeout"),this._trigger("change",{value:!1}))},this.refreshTimeout))},setRefreshBarHeight(t){const e=Math.min(t,this._maxBarHeight),o={barHeight:e};return e>=this._loadingBarHeight?o.refreshStatus=S.LOSING:o.refreshStatus=S.PULLING,new Promise(t=>{Object.keys(o).forEach(t=>{this[t]=o[t]}),setTimeout(()=>{t(e)},20)})},setScrollTop(t){this.scrollTop=t},scrollToTop(){let t=!1;this.scrollTop=0===this.scrollTop?.01:0,t=!0,t||this.setScrollTop(0)}}}),H=A,B=(o(20856),o(1391)),E=(0,B.A)(H,h,u,!1,null,"301a9f17",null,!1,r,x),I=E.exports,$=o(6097),C=o(59172),R={components:{TPullDownRefresh:I,TSkeleton:$.A,TBackTop:C.A},data:function(){return{enable:!1,rowCol1:[{width:"100%",height:"342rpx",borderRadius:"24rpx"}],rowCol2:[[{width:"327rpx"}],[{width:"200rpx"}],[{size:"327rpx",borderRadius:"24rpx"}]],scrollTop:0}},mounted:function(){var t=this;this.$nextTick(function(){return t.ready()})},created:function(){},methods:{ready:function(){var t=this;this.enable=!0,setTimeout(function(){t.enable=!1},1e3)},onRefresh:function(){var t=this;this.enable=!0,setTimeout(function(){t.enable=!1},1500)},onScroll:function(t){var e=t.scrollTop;this.scrollTop=e},onDragstart:function(t){console.log("[onDragstart]",t)},onDragging:function(t){console.log("[onDragging]",t)},onDragend:function(t){console.log("[onDragend]",t)},onScrolltolower:function(t){console.log("[onScrolltolower]",t)},onTimeout:function(t){console.log("[onTimeout]",t)}}},k=R,D=(o(18292),(0,B.A)(k,l,c,!1,null,"40bb5a2f",null,!1,a,y)),L=D.exports,N={components:{BaseDemo:L},data:function(){return{}},methods:{}},M=N,F=(o(17482),(0,B.A)(M,i,n,!1,null,"afe09926",null,!1,s,P)),G=F.exports},86651:function(t,e,o){"use strict";o.r(e);var s=o(22093),a=o.n(s),r=o(12670),i=o.n(r),n=i()(a());n.push([t.id,".demo[data-v-40bb5a2f]{padding-bottom:%?56?%;overflow:hidden}.demo-title[data-v-40bb5a2f]{font-size:%?48?%;font-weight:700;line-height:%?64?%;margin:%?48?% %?32?% 0;color:var(--td-text-color-primary)}.demo-desc[data-v-40bb5a2f]{font-size:%?28?%;color:var(--td-text-color-secondary);margin:%?16?% %?32?% 0;line-height:%?44?%}.pulldown-refresh__content[data-v-40bb5a2f]{margin:%?64?% %?32?% 0;position:relative}.row[data-v-40bb5a2f]{display:flex;justify-content:space-between;margin-top:%?32?%}.text[data-v-40bb5a2f]{position:absolute;top:%?152?%;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);text-align:center;font-size:%?32?%;color:var(--td-text-color-disabled);width:%?686?%}",""]),e["default"]=n}}]);