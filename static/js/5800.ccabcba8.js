(self["webpackChunktdesign_uniapp_vue2_cli"]=self["webpackChunktdesign_uniapp_vue2_cli"]||[]).push([[5800],{744:function(t,a,e){"use strict";e.r(a);var r=e(22093),s=e.n(r),n=e(12670),i=e.n(n),c=i()(s());c.push([t.id,".t-chat-thinking[data-v-455360fa]{width:100%;box-sizing:border-box}.t-chat-thinking__inner--block[data-v-455360fa]{background-color:var(--td-bg-color-page,var(--td-gray-color-1,#f3f3f3));border-radius:var(--td-radius-default,6px);padding:var(--td-spacer,8px) var(--td-spacer-1,12px)}.t-chat-thinking__inner--border[data-v-455360fa]{padding:var(--td-spacer,8px) var(--td-spacer-1,12px)}.t-chat-thinking__hd[data-v-455360fa]{height:%?48?%;overflow:hidden;display:flex;align-items:center}.t-chat-thinking__hd[data-v-455360fa]  .t-chat-thinking__icon{font-size:var(--td-font-size-xl,20px)}.t-chat-thinking__hd[data-v-455360fa]  .t-chat-thinking__icon--close{color:var(--td-text-color-secondary,var(--td-font-gray-2,rgba(0,0,0,.6)))}.t-chat-thinking__hd[data-v-455360fa]  .t-chat-thinking__icon--complete,\n.t-chat-thinking__hd[data-v-455360fa]  .t-chat-thinking__icon--stop{color:var(--td-success-color,var(--td-success-color-5,#2ba471))}.t-chat-thinking__hd[data-v-455360fa]  .t-chat-thinking__icon--collapse{color:var(--td-text-color-secondary,var(--td-font-gray-2,rgba(0,0,0,.6)));transition:-webkit-transform .3s ease-in-out;transition:transform .3s ease-in-out;transition:transform .3s ease-in-out,-webkit-transform .3s ease-in-out}.t-chat-thinking__hd .t-chat-thinking__txt[data-v-455360fa]{color:var(--td-text-color-primary,var(--td-font-gray-1,rgba(0,0,0,.9)));font-size:var(--td-font-size-base,14px);line-height:%?32?%;flex:1;margin-left:var(--td-spacer,8px)}.t-chat-thinking__bd[data-v-455360fa]{color:var(--td-text-color-placeholder,var(--td-font-gray-3,rgba(0,0,0,.4)));font-size:var(--td-font-size-base,14px);line-height:170%;margin-top:var(--td-spacer-1,12px);white-space:pre-wrap;overflow-y:auto}.t-chat-thinking__bd--border[data-v-455360fa]{border-left:%?4?% solid var(--td-component-stroke,var(--td-gray-color-3,#e7e7e7));padding-left:var(--td-spacer,8px)}@keyframes scale-data-v-455360fa{0%{-webkit-transform:scale(1.333) translateY(-50%);transform:scale(1.333) translateY(-50%)}33%{-webkit-transform:scale(1.333) translateY(-50%);transform:scale(1.333) translateY(-50%)}34%{-webkit-transform:scale(1) translateY(-50%);transform:scale(1) translateY(-50%)}100%{-webkit-transform:scale(1) translateY(-50%);transform:scale(1) translateY(-50%)}}@-webkit-keyframes scale-data-v-455360fa{0%{-webkit-transform:scale(1.333) translateY(-50%);transform:scale(1.333) translateY(-50%)}33%{-webkit-transform:scale(1.333) translateY(-50%);transform:scale(1.333) translateY(-50%)}34%{-webkit-transform:scale(1) translateY(-50%);transform:scale(1) translateY(-50%)}100%{-webkit-transform:scale(1) translateY(-50%);transform:scale(1) translateY(-50%)}}",""]),a["default"]=c},15690:function(t,a,e){"use strict";var r;e.d(a,{A:function(){return m}});var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{class:t.classPrefix,style:t._._style([t.customStyle])},["error"===t.status||"text"===t.content.type?[e("v-uni-view",{class:t.classPrefix+"__"+t.role+" "+t.classPrefix+"__"+t.status},[e("v-uni-view",{staticClass:"_pre"},[e("v-uni-rich-text",{attrs:{nodes:t.textInfo}})],1)],1)]:[e("v-uni-view",{class:t.classPrefix+"__assistant"},[e("TChatMarkdown",{attrs:{content:t.textInfo,options:t.markdownProps&&t.markdownProps.options},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.onClick.apply(void 0,arguments)}}})],1)]],2)},n=[],i=e(79074),c=e(15512),o=(e(26128),{content:{type:Object,required:!0},markdownProps:{type:Object},role:{type:String,required:!0,validator:function(t){return["user","assistant","system"].includes(t)}},status:{type:String,validator:function(t){return!t||["error",""].includes(t)}},onClick:{type:Function,default:function(){return{}}}}),d=e(1383),l=e(75070);const h=`${c.Pl}-chat-content`;var p,v=(0,l.o1)({name:h,options:{multipleSlots:!0,styleIsolation:"shared"},components:{TChatMarkdown:i.A},props:{...o},emits:["click"],data(){return{classPrefix:h,textInfo:"",_:d.A}},watch:{content:{handler(){this.setTextInfo()},immediate:!0,deep:!0}},mounted(){this.setTextInfo()},methods:{getEscapeReplacement(t){const a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return a[t]},escape(t,a=!1){const e=/[&<>"']/,r=new RegExp(e.source,"g"),s=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,n=new RegExp(s.source,"g");if(a){if(e.test(t))return t.replace(r,this.getEscapeReplacement)}else if(s.test(t))return t.replace(n,this.getEscapeReplacement);return t},setTextInfo(){"text"===this.content.type||"error"===this.status?this.textInfo=this.escape(this.content.data||""):this.textInfo=this.content.data},onClick(t){this.$emit("click",t)}}}),g=v,f=(e(44589),e(1391)),u=(0,f.A)(g,s,n,!1,null,"3e956f1c",null,!1,r,p),m=u.exports},44589:function(t,a,e){var r=e(76480);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);var s=e(31997).A;s("4ebe7808",r,!0,{sourceMap:!1,shadowMode:!1})},54661:function(t,a,e){"use strict";e.r(a);var r=e(22093),s=e.n(r),n=e(12670),i=e.n(n),c=i()(s());c.push([t.id,".t-chat-list__content--reverse .t-chat-message[data-v-0f996b4c]{-webkit-transform:scaleY(-1);transform:scaleY(-1)}[data-v-0f996b4c] .t-attachments + t-chat-content:not(:empty),[data-v-0f996b4c] .t-chat-thinking + t-chat-content:not(:empty){margin-top:%?24?%}.t-chat-message[data-v-0f996b4c]{display:flex;margin-bottom:var(--td-spacer-2,16px)}.t-chat-message .t-chat-message__avatar[data-v-0f996b4c]{flex:0 0 auto;padding-top:%?0?%}.t-chat-message .t-chat-message__content[data-v-0f996b4c]{flex:1 1 auto;width:1%}.t-chat-message .t-chat-message__content--base[data-v-0f996b4c]{padding-top:var(--td-spacer-3,24px)}.t-chat-message .t-chat-message__detail[data-v-0f996b4c]{max-width:100%;box-sizing:border-box;display:contents}.t-chat-message__header .t-chat-message__avatar[data-v-0f996b4c]{padding-top:calc(%?44?% + var(--td-spacer, %?16?%))}.t-chat-message.user .t-chat-message__base[data-v-0f996b4c]{padding-right:var(--td-spacer-2,16px)}.t-chat-message.assistant .t-chat-message__base[data-v-0f996b4c]{padding-left:var(--td-spacer-2,16px)}.t-chat-message.error .t-chat-message__base[data-v-0f996b4c]{padding-left:var(--td-spacer-2,16px)}.t-chat-message.error .t-chat-message__text--error[data-v-0f996b4c]{color:var(--td-error-color-6,#d54941)}.t-chat-message.left[data-v-0f996b4c]{display:flex;flex-direction:row}.t-chat-message.left .t-chat-message__content[data-v-0f996b4c]{align-items:flex-start}.t-chat-message.left .t-chat-message__base[data-v-0f996b4c]{padding-left:var(--td-spacer-2,16px)}.t-chat-message.right[data-v-0f996b4c]{display:flex;flex-direction:row-reverse}.t-chat-message.right .t-chat-message__content[data-v-0f996b4c]{align-items:flex-end}.t-chat-message.right .t-chat-message__base[data-v-0f996b4c]{padding-right:var(--td-spacer-2,16px)}.t-chat-message.right .t-chat-message__avatar[data-v-0f996b4c]{margin-left:var(--td-spacer-1,12px);margin-right:0}.t-chat-message__avatar[data-v-0f996b4c]{flex-shrink:0;cursor:pointer;display:flex;margin-right:var(--td-spacer-1,12px);padding-top:calc(%?44?% + var(--td-spacer, %?16?%))}.t-chat-message__avatar-image[data-v-0f996b4c]{width:var(--td-spacer-4,32px);height:var(--td-spacer-4,32px);border-radius:var(--td-radius-circle,50%)}.t-chat-message__content[data-v-0f996b4c]{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;font-size:var(--td-font-size-m,16px);line-height:%?48?%;font-family:var(--td-font-family,PingFang SC,Microsoft YaHei,Arial Regular)}.t-chat-message__content .t-skeleton[data-v-0f996b4c]{width:100%}.t-chat-message__base[data-v-0f996b4c]{display:flex;justify-content:flex-start;align-items:center;height:%?44?%;font-size:var(--td-font-size-base,14px);line-height:%?44?%;font-family:var(--td-font-family,PingFang SC,Microsoft YaHei,Arial Regular);color:var(--td-text-color-placeholder,var(--td-font-gray-3,rgba(0,0,0,.4)));margin-bottom:var(--td-spacer,8px)}.t-chat-message__name[data-v-0f996b4c]{padding-right:var(--td-spacer,8px);cursor:pointer}.t-chat-message--text[data-v-0f996b4c]  .t-chat-content__user,\n.t-chat-message--text[data-v-0f996b4c]  .t-chat-content__assistant{color:var(--td-text-color-secondary,var(--td-font-gray-2,rgba(0,0,0,.6)))}.t-chat-message--base[data-v-0f996b4c]  .t-chat-content{padding:%?24?% %?32?%;background-color:var(--td-bg-color-secondarycontainer,var(--td-gray-color-1,#f3f3f3));border-radius:0 var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px)}.t-chat-message--base.assistant[data-v-0f996b4c]  .t-chat-content{border-radius:0 var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px);background-color:initial;padding:0}.t-chat-message--base.user[data-v-0f996b4c]  .t-chat-content{border-radius:0 var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px)}.t-chat-message--base.left[data-v-0f996b4c]  .t-chat-content{border-radius:0 var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px)}.t-chat-message--base.right[data-v-0f996b4c]  .t-chat-content{border-radius:var(--td-radius-extraLarge,12px) 0 var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px)}.t-chat-message--outline[data-v-0f996b4c]  .t-chat-content{padding:%?24?% %?32?%;border:%?1?% solid var(--td-component-border,var(--td-gray-color-4,#dcdcdc));border-radius:0 var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px)}.t-chat-message--outline.assistant[data-v-0f996b4c]  .t-chat-content{border-radius:0 var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px)}.t-chat-message--outline.user[data-v-0f996b4c]  .t-chat-content{border-radius:0 var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px)}.t-chat-message--outline.left[data-v-0f996b4c]  .t-chat-content{border-radius:0 var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px)}.t-chat-message--outline.right[data-v-0f996b4c]  .t-chat-content{border-radius:var(--td-radius-extraLarge,12px) 0 var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px)}.t-chat-message--base.right[data-v-0f996b4c]  .t-attachments__scrollable,\n.t-chat-message--outline.right[data-v-0f996b4c]  .t-attachments__scrollable,\n.t-chat-message--text.right[data-v-0f996b4c]  .t-attachments__scrollable{justify-content:flex-end}.t-chat-message__actionbar[data-v-0f996b4c]{--chat-actionbar-padding:var(--td-spacer-1,12px) 0 0 0}.t-chat-message__actionbar[data-v-0f996b4c]:empty{display:none}",""]),a["default"]=c},62097:function(t,a,e){var r=e(744);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);var s=e(31997).A;s("0a5ce89b",r,!0,{sourceMap:!1,shadowMode:!1})},65800:function(t,a,e){"use strict";var r;e.d(a,{A:function(){return b}});var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{class:t.chatItemClass,style:t._._style([t.customStyle]),on:{longpress:function(a){arguments[0]=a=t.$handleEvent(a),t.handleLongPress.apply(void 0,arguments)}}},[t.avatar?e("v-uni-view",{class:t.classPrefix+"__avatar"},[t.avatar?[e("v-uni-image",{class:t.classPrefix+"__avatar-image",attrs:{src:t.avatar}})]:t._e()],2):t._e(),e("v-uni-view",{class:t.contentClasses},[t.name||t.datetime?e("v-uni-view",{class:t.classPrefix+"__base"},[t.name?e("v-uni-text",{class:t.classPrefix+"__name"},[t._v(" "+t._s(t.name)+" ")]):t._e(),t.datetime?e("v-uni-text",{class:t.classPrefix+"__time"},[t._v(" "+t._s(t.datetime)+" ")]):t._e()],1):t._e(),"pending"===t.status?[e("v-uni-view",{staticStyle:{width:"100%"}},[e("chat-loading",{attrs:{animation:t.animation}})],1)]:[e("v-uni-view",{class:t.classPrefix+"__detail"},[t.content&&t.content.length>0?[t._l(t.content,function(a,r){return["attachment"===a.type&&"user"===t.role?e("attachments",{key:r+"_0",attrs:{items:a.data,removable:!1,"in-chat":!0}}):t._e(),"thinking"===a.type?e("chat-thinking",{key:r+"_1",attrs:{content:a.data,role:t.role,status:["complete","stop","error","pending"].indexOf(t.status)<0?"pending":t.status}}):"text"===a.type||"markdown"===a.type?e("chat-content",{attrs:{content:a,role:t.role,status:"error"===t.status?"error":""}}):t._e()]})]:[t._t("content")]],2)],"assistant"===t.role?e("v-uni-view",{class:t.classPrefix+"__actionbar"},[t._t("actionbar")],2):t._e()],2)],1)},n=[],i=e(15690),c=e(89134),o=e(5833),d=e(45932),l=(e(26128),{animation:{type:String,default:"skeleton",validator:function(t){return!t||["skeleton","moving","gradient","dots"].includes(t)}},avatar:{type:String},chatContentProps:{type:Object},chatId:{type:String,default:""},content:{type:Array},datetime:{type:String},name:{type:String},placement:{type:String,validator:function(t){return!t||["left","right"].includes(t)}},role:{type:String,default:"user",validator:function(t){return!t||["user","assistant","system"].includes(t)}},status:{type:String,validator:function(t){return!t||["pending","streaming","complete","stop","error"].includes(t)}},variant:{type:String,default:"base",validator:function(t){return!t||["base","outline","text"].includes(t)}},onLongpress:{type:Function,default:function(){return{}}}}),h=e(15512),p=e(1383),v=e(75070);const g=`${h.Pl}-chat-message`;var f,u=(0,v.o1)({name:g,options:{multipleSlots:!0,styleIsolation:"shared"},components:{chatContent:i.A,chatThinking:c.A,chatLoading:o.A,attachments:d.A},props:{...l},data(){return{classPrefix:g,article:"",contentClasses:[],chatItemClass:[],_:p.A}},watch:{classPrefix(){this.setContentClasses(),this.setChatItemClass()},variant:{handler(){this.setChatItemClass()}},placement:{handler(){this.setChatItemClass()}}},mounted(){this.setContentClasses(),this.setChatItemClass()},methods:{handleLongPress(t){this.$emit("message-longpress",{e:t,id:this.chatId,longPressPosition:{x:t.detail.x,y:t.detail.y}})},setContentClasses(){this.contentClasses=[`${this.classPrefix}__content`]},setChatItemClass(){const{classPrefix:t,datetime:a}=this,{variant:e,role:r,placement:s}=this,n=[`${t}`,`${t}--${e}`,r,s];a&&n.push(`${t}__header`),this.chatItemClass=n}}}),m=u,_=(e(84176),e(1391)),x=(0,_.A)(m,s,n,!1,null,"0f996b4c",null,!1,r,f),b=x.exports},76480:function(t,a,e){"use strict";e.r(a);var r=e(22093),s=e.n(r),n=e(12670),i=e.n(n),c=i()(s());c.push([t.id,".t-chat-content[data-v-3e956f1c]{font-size:%?32?%;line-height:%?48?%;word-break:break-word;word-wrap:break-word;overflow-wrap:break-word;box-sizing:border-box;width:-webkit-fit-content;width:fit-content}.t-chat-content__user[data-v-3e956f1c]{color:var(--td-chat-content-user-text-color,var(--td-text-color-primary,var(--td-font-gray-1,rgba(0,0,0,.9))))}.t-chat-content__user ._pre[data-v-3e956f1c]{margin:0;white-space:pre-wrap}.t-chat-content__assistant[data-v-3e956f1c]{color:var(--td-chat-content-assistant-text-color,var(--td-text-color-primary,var(--td-font-gray-1,rgba(0,0,0,.9))))}.t-chat-content__assistant ._ol[data-v-3e956f1c]{-webkit-padding-start:%?40?%;padding-inline-start:%?40?%}.t-chat-content__assistant ._ol ._li[data-v-3e956f1c]{list-style:decimal}.t-chat-content__assistant ._img[data-v-3e956f1c]{max-width:100%;margin:%?8?% 0;border-radius:var(--td-radius-small,3px)}.t-chat-content__error[data-v-3e956f1c]{color:var(--td-chat-content-error-text-color,var(--td-error-color,var(--td-error-color-6,#d54941)))}",""]),a["default"]=c},84176:function(t,a,e){var r=e(54661);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);var s=e(31997).A;s("3668b07b",r,!0,{sourceMap:!1,shadowMode:!1})},89134:function(t,a,e){"use strict";var r;e.d(a,{A:function(){return _}});var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{class:t.classPrefix,style:t._._style([t.customStyle])},[e("v-uni-view",{class:t._.cls(t.classPrefix+"__inner",[t.layout])},[e("v-uni-view",{class:t.classPrefix+"__hd"},["error"===t.status||"complete"===t.status||"stop"===t.status?[e("t-icon",{attrs:{"t-class":t._.cls(t.classPrefix+"__icon",[t.status]),name:"error"===t.status?"close-circle":"check-circle"}})]:[e("TChatLoading",{attrs:{animation:t.animation}})],e("v-uni-view",{class:t.classPrefix+"__txt"},[t._v(" "+t._s(t.content.title||"正在思考中...")+" ")]),e("v-uni-view",{attrs:{"data-event-opts":[["tap",[["handleCollapse",["$event"]]]]]}},[e("t-icon",{attrs:{"custom-style":t.localCollapsed?"transform: rotate(180deg)":"","t-class":t._.cls(t.classPrefix+"__icon",[["collapse",!0]]),name:"chevron-up"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.handleCollapse.apply(void 0,arguments)}}})],1)],2),t.localCollapsed?t._e():e("v-uni-view",{class:t._.cls(t.classPrefix+"__bd",[t.layout]),style:t.contentStyle},[t._v(" "+t._s(t.content.text||"")+" ")])],1)],1)},n=[],i=e(5833),c=e(99105),o=e(15512),d=(e(26128),e(27439),{animation:{type:String,default:"moving",validator:function(t){return!t||["skeleton","moving","gradient","dot"].includes(t)}},collapsed:Boolean,content:{type:Object,required:!0},layout:{type:String,default:"block",validator:function(t){return!t||["block","border"].includes(t)}},maxHeight:{type:Number},status:{type:String,default:"pending",required:!0,validator:function(t){return["complete","stop","error","pending"].includes(t)}},onCollapsedChange:{type:Function,default:function(){return{}}}}),l=e(1383),h=e(75070);const p=`${o.Pl}-chat-thinking`;var v,g=(0,h.o1)({name:p,options:{multipleSlots:!0,styleIsolation:"shared"},components:{TIcon:c.A,TChatLoading:i.A},props:{...d},data(){return{localCollapsed:!1,contentStyle:"",classPrefix:p,_:l.A}},watch:{maxHeight:{handler(){this.setContentStyle()},immediate:!0}},created(){},mounted(){const t=function(){this.localCollapsed=this.collapsed||!1};t.call(this),this.setContentStyle()},methods:{handleCollapse(){this.localCollapsed=!this.localCollapsed,this.$emit("collapsedChange",this.localCollapsed)},setContentStyle(){this.maxHeight?this.contentStyle=`max-height: ${this.maxHeight}px;`:this.contentStyle=""}}}),f=g,u=(e(62097),e(1391)),m=(0,u.A)(f,s,n,!1,null,"455360fa",null,!1,r,v),_=m.exports}}]);