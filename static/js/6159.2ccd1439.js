(self["webpackChunktdesign_uniapp_vue2_cli"]=self["webpackChunktdesign_uniapp_vue2_cli"]||[]).push([[6159],{1413:function(t,a,e){"use strict";e.d(a,{A:function(){return x}});var r,s={tIcon:e(14867).A},n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{class:t.classPrefix,style:t._._style([t.customStyle])},[e("v-uni-view",{class:t._.cls(t.classPrefix+"__inner",[t.layout])},[e("v-uni-view",{class:t.classPrefix+"__hd"},["error"===t.status||"complete"===t.status||"stop"===t.status?[e("t-icon",{attrs:{"t-class":t._.cls(t.classPrefix+"__icon",[t.status]),name:"error"===t.status?"close-circle":"check-circle"}})]:[e("TChatLoading",{attrs:{animation:t.animation}})],e("v-uni-view",{class:t.classPrefix+"__txt"},[t._v(" "+t._s(t.content.title||"正在思考中...")+" ")]),e("v-uni-view",{attrs:{"data-event-opts":[["tap",[["handleCollapse",["$event"]]]]]}},[e("t-icon",{attrs:{"custom-style":t.localCollapsed?"transform: rotate(180deg)":"","t-class":t._.cls(t.classPrefix+"__icon",[["collapse",!0]]),name:"chevron-up"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.handleCollapse.apply(void 0,arguments)}}})],1)],2),t.localCollapsed?t._e():e("v-uni-view",{class:t._.cls(t.classPrefix+"__bd",[t.layout]),style:t.contentStyle},[t._v(" "+t._s(t.content.text||"")+" ")])],1)],1)},i=[],o=e(70012),c=e(89553),d=e(14867),l=e(46056),h=(e(26128),e(27439),{animation:{type:String,default:"moving",validator:function(t){return!t||["skeleton","moving","gradient","dot"].includes(t)}},collapsed:Boolean,content:{type:Object,required:!0},layout:{type:String,default:"block",validator:function(t){return!t||["block","border"].includes(t)}},maxHeight:{type:Number},status:{type:String,default:"pending",required:!0,validator:function(t){return["complete","stop","error","pending"].includes(t)}},onCollapsedChange:{type:Function,default:function(){return{}}}}),u=e(10263),p=e(88070),v="".concat(l.Pl,"-chat-thinking"),g=(0,p.o1)({name:v,options:{multipleSlots:!0,styleIsolation:"shared"},components:{TIcon:d.A,TChatLoading:c.A},props:(0,o.A)({},h),data:function(){return{localCollapsed:!1,contentStyle:"",classPrefix:v,_:u.A}},watch:{maxHeight:{handler:function(){this.setContentStyle()},immediate:!0}},created:function(){},mounted:function(){var t=function(){this.localCollapsed=this.collapsed||!1};t.call(this),this.setContentStyle()},methods:{handleCollapse:function(){this.localCollapsed=!this.localCollapsed,this.$emit("collapsedChange",this.localCollapsed)},setContentStyle:function(){this.maxHeight?this.contentStyle="max-height: ".concat(this.maxHeight,"px;"):this.contentStyle=""}}}),f=g,m=(e(13784),e(1391)),_=(0,m.A)(f,n,i,!1,null,"e68e9aa0",null,!1,s,r),x=_.exports},13784:function(t,a,e){var r=e(85835);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);var s=e(31997).A;s("d30bfffa",r,!0,{sourceMap:!1,shadowMode:!1})},19284:function(t,a,e){"use strict";var r;e.d(a,{A:function(){return _}});var s,n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{class:t.classPrefix,style:t._._style([t.customStyle])},["error"===t.status||"text"===t.content.type?[e("v-uni-view",{class:t.classPrefix+"__"+t.role+" "+t.classPrefix+"__"+t.status},[e("v-uni-view",{staticClass:"_pre"},[e("v-uni-rich-text",{attrs:{nodes:t.textInfo}})],1)],1)]:[e("v-uni-view",{class:t.classPrefix+"__assistant"},[e("TChatMarkdown",{attrs:{content:t.textInfo,options:t.markdownProps&&t.markdownProps.options},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.onClick.apply(void 0,arguments)}}})],1)]],2)},i=[],o=e(70012),c=(e(67723),e(62142),e(47402),e(52912),e(29035),e(41790),e(87311),e(67703)),d=e(46056),l=(e(26128),{content:{type:Object,required:!0},markdownProps:{type:Object},role:{type:String,required:!0,validator:function(t){return["user","assistant","system"].includes(t)}},status:{type:String,validator:function(t){return!t||["error",""].includes(t)}},onClick:{type:Function,default:function(){return{}}}}),h=e(10263),u=e(88070),p="".concat(d.Pl,"-chat-content"),v=(0,u.o1)({name:p,options:{multipleSlots:!0,styleIsolation:"shared"},components:{TChatMarkdown:c.A},props:(0,o.A)({},l),emits:["click"],data:function(){return{classPrefix:p,textInfo:"",_:h.A}},watch:{content:{handler:function(){this.setTextInfo()},immediate:!0,deep:!0}},mounted:function(){this.setTextInfo()},methods:{getEscapeReplacement:function(t){var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return a[t]},escape:function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=/[&<>"']/,r=new RegExp(e.source,"g"),s=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,n=new RegExp(s.source,"g");if(a){if(e.test(t))return t.replace(r,this.getEscapeReplacement)}else if(s.test(t))return t.replace(n,this.getEscapeReplacement);return t},setTextInfo:function(){"text"===this.content.type||"error"===this.status?this.textInfo=this.escape(this.content.data||""):this.textInfo=this.content.data},onClick:function(t){this.$emit("click",t)}}}),g=v,f=(e(34071),e(1391)),m=(0,f.A)(g,n,i,!1,null,"616ecf4c",null,!1,r,s),_=m.exports},34071:function(t,a,e){var r=e(55272);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);var s=e(31997).A;s("643a4236",r,!0,{sourceMap:!1,shadowMode:!1})},36159:function(t,a,e){"use strict";var r;e.d(a,{A:function(){return y}});var s,n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{class:t.chatItemClass,style:t._._style([t.customStyle]),on:{longpress:function(a){arguments[0]=a=t.$handleEvent(a),t.handleLongPress.apply(void 0,arguments)}}},[t.avatar?e("v-uni-view",{class:t.classPrefix+"__avatar"},[t.avatar?[e("v-uni-image",{class:t.classPrefix+"__avatar-image",attrs:{src:t.avatar}})]:t._e()],2):t._e(),e("v-uni-view",{class:t.contentClasses},[t.name||t.datetime?e("v-uni-view",{class:t.classPrefix+"__base"},[t.name?e("v-uni-text",{class:t.classPrefix+"__name"},[t._v(" "+t._s(t.name)+" ")]):t._e(),t.datetime?e("v-uni-text",{class:t.classPrefix+"__time"},[t._v(" "+t._s(t.datetime)+" ")]):t._e()],1):t._e(),"pending"===t.status?[e("v-uni-view",{staticStyle:{width:"100%"}},[e("chat-loading",{attrs:{animation:t.animation}})],1)]:[e("v-uni-view",{class:t.classPrefix+"__detail"},[t.content&&t.content.length>0?[t._l(t.content,function(a,r){return["attachment"===a.type&&"user"===t.role?e("attachments",{key:r+"_0",attrs:{items:a.data,removable:!1,"in-chat":!0}}):t._e(),"thinking"===a.type?e("chat-thinking",{key:r+"_1",attrs:{content:a.data,role:t.role,status:["complete","stop","error","pending"].indexOf(t.status)<0?"pending":t.status}}):"text"===a.type||"markdown"===a.type?e("chat-content",{attrs:{content:a,role:t.role,status:"error"===t.status?"error":""}}):t._e()]})]:[t._t("content")]],2)],"assistant"===t.role?e("v-uni-view",{class:t.classPrefix+"__actionbar"},[t._t("actionbar")],2):t._e()],2)],1)},i=[],o=e(70012),c=(e(73645),e(52093),e(19284)),d=e(1413),l=e(89553),h=e(27812),u=(e(26128),{animation:{type:String,default:"skeleton",validator:function(t){return!t||["skeleton","moving","gradient","dots"].includes(t)}},avatar:{type:String},chatContentProps:{type:Object},chatId:{type:String,default:""},content:{type:Array},datetime:{type:String},name:{type:String},placement:{type:String,validator:function(t){return!t||["left","right"].includes(t)}},role:{type:String,default:"user",validator:function(t){return!t||["user","assistant","system"].includes(t)}},status:{type:String,validator:function(t){return!t||["pending","streaming","complete","stop","error"].includes(t)}},variant:{type:String,default:"base",validator:function(t){return!t||["base","outline","text"].includes(t)}},onLongpress:{type:Function,default:function(){return{}}}}),p=e(46056),v=e(10263),g=e(88070),f="".concat(p.Pl,"-chat-message"),m=(0,g.o1)({name:f,options:{multipleSlots:!0,styleIsolation:"shared"},components:{chatContent:c.A,chatThinking:d.A,chatLoading:l.A,attachments:h.A},props:(0,o.A)({},u),data:function(){return{classPrefix:f,article:"",contentClasses:[],chatItemClass:[],_:v.A}},watch:{classPrefix:function(){this.setContentClasses(),this.setChatItemClass()},variant:{handler:function(){this.setChatItemClass()}},placement:{handler:function(){this.setChatItemClass()}}},mounted:function(){this.setContentClasses(),this.setChatItemClass()},methods:{handleLongPress:function(t){this.$emit("longpress",{e:t,id:this.chatId})},setContentClasses:function(){this.contentClasses=["".concat(this.classPrefix,"__content")]},setChatItemClass:function(){var t=this.classPrefix,a=this.datetime,e=this.variant,r=this.role,s=this.placement,n=["".concat(t),"".concat(t,"--").concat(e),r,s];a&&n.push("".concat(t,"__header")),this.chatItemClass=n}}}),_=m,x=(e(55319),e(1391)),b=(0,x.A)(_,n,i,!1,null,"48be9d3e",null,!1,r,s),y=b.exports},55272:function(t,a,e){"use strict";e.r(a);var r=e(22093),s=e.n(r),n=e(12670),i=e.n(n),o=i()(s());o.push([t.id,".t-chat-content[data-v-616ecf4c]{font-size:%?32?%;line-height:%?48?%;word-break:break-all;word-wrap:break-word;overflow-wrap:break-word;box-sizing:border-box;width:-webkit-fit-content;width:fit-content}.t-chat-content__user[data-v-616ecf4c]{color:var(--td-chat-content-user-text-color,var(--td-text-color-primary,var(--td-font-gray-1,rgba(0,0,0,.9))))}.t-chat-content__user ._pre[data-v-616ecf4c]{margin:0;white-space:pre-wrap}.t-chat-content__assistant[data-v-616ecf4c]{color:var(--td-chat-content-assistant-text-color,var(--td-text-color-primary,var(--td-font-gray-1,rgba(0,0,0,.9))))}.t-chat-content__assistant ._ol[data-v-616ecf4c]{-webkit-padding-start:%?40?%;padding-inline-start:%?40?%}.t-chat-content__assistant ._ol ._li[data-v-616ecf4c]{list-style:decimal}.t-chat-content__assistant ._img[data-v-616ecf4c]{max-width:100%;margin:%?8?% 0;border-radius:var(--td-radius-small,3px)}.t-chat-content__error[data-v-616ecf4c]{color:var(--td-chat-content-error-text-color,var(--td-error-color,var(--td-error-color-6,#d54941)))}",""]),a["default"]=o},55319:function(t,a,e){var r=e(57808);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);var s=e(31997).A;s("aa3b94ea",r,!0,{sourceMap:!1,shadowMode:!1})},57808:function(t,a,e){"use strict";e.r(a);var r=e(22093),s=e.n(r),n=e(12670),i=e.n(n),o=i()(s());o.push([t.id,".t-chat-list__content--reverse .t-chat-message[data-v-48be9d3e]{-webkit-transform:scaleY(-1);transform:scaleY(-1)}[data-v-48be9d3e] .t-attachments + t-chat-content:not(:empty),[data-v-48be9d3e] .t-chat-thinking + t-chat-content:not(:empty){margin-top:%?24?%}.t-chat-message[data-v-48be9d3e]{display:flex;margin-bottom:var(--td-spacer-2,16px)}.t-chat-message .t-chat-message__avatar[data-v-48be9d3e]{flex:0 0 auto;padding-top:%?0?%}.t-chat-message .t-chat-message__content[data-v-48be9d3e]{flex:1 1 auto;width:1%}.t-chat-message .t-chat-message__content--base[data-v-48be9d3e]{padding-top:var(--td-spacer-3,24px)}.t-chat-message .t-chat-message__detail[data-v-48be9d3e]{max-width:100%;box-sizing:border-box;display:contents}.t-chat-message__header .t-chat-message__avatar[data-v-48be9d3e]{padding-top:calc(%?44?% + var(--td-spacer, %?16?%))}.t-chat-message.user .t-chat-message__base[data-v-48be9d3e]{padding-right:var(--td-spacer-2,16px)}.t-chat-message.user[data-v-48be9d3e]  .t-chat-content{max-width:90%}.t-chat-message.assistant .t-chat-message__base[data-v-48be9d3e]{padding-left:var(--td-spacer-2,16px)}.t-chat-message.error .t-chat-message__base[data-v-48be9d3e]{padding-left:var(--td-spacer-2,16px)}.t-chat-message.error .t-chat-message__text--error[data-v-48be9d3e]{color:var(--td-error-color-6,#d54941)}.t-chat-message.left[data-v-48be9d3e]{display:flex;flex-direction:row}.t-chat-message.left .t-chat-message__content[data-v-48be9d3e]{align-items:flex-start}.t-chat-message.left .t-chat-message__base[data-v-48be9d3e]{padding-left:var(--td-spacer-2,16px)}.t-chat-message.right[data-v-48be9d3e]{display:flex;flex-direction:row-reverse}.t-chat-message.right .t-chat-message__content[data-v-48be9d3e]{align-items:flex-end}.t-chat-message.right .t-chat-message__base[data-v-48be9d3e]{padding-right:var(--td-spacer-2,16px)}.t-chat-message.right .t-chat-message__avatar[data-v-48be9d3e]{margin-left:var(--td-spacer-1,12px);margin-right:0}.t-chat-message__avatar[data-v-48be9d3e]{flex-shrink:0;cursor:pointer;display:flex;margin-right:var(--td-spacer-1,12px);padding-top:calc(%?44?% + var(--td-spacer, %?16?%))}.t-chat-message__avatar-image[data-v-48be9d3e]{width:var(--td-spacer-4,32px);height:var(--td-spacer-4,32px);border-radius:var(--td-radius-circle,50%)}.t-chat-message__content[data-v-48be9d3e]{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;font-size:var(--td-font-size-m,16px);line-height:%?48?%;font-family:var(--td-font-family,PingFang SC,Microsoft YaHei,Arial Regular)}.t-chat-message__content .t-skeleton[data-v-48be9d3e]{width:100%}.t-chat-message__base[data-v-48be9d3e]{display:flex;justify-content:flex-start;align-items:center;height:%?44?%;font-size:var(--td-font-size-base,14px);line-height:%?44?%;font-family:var(--td-font-family,PingFang SC,Microsoft YaHei,Arial Regular);color:var(--td-text-color-placeholder,var(--td-font-gray-3,rgba(0,0,0,.4)));margin-bottom:var(--td-spacer,8px)}.t-chat-message__name[data-v-48be9d3e]{padding-right:var(--td-spacer,8px);cursor:pointer}.t-chat-message--text[data-v-48be9d3e]  .t-chat-content__user,\n.t-chat-message--text[data-v-48be9d3e]  .t-chat-content__assistant{color:var(--td-text-color-secondary,var(--td-font-gray-2,rgba(0,0,0,.6)))}.t-chat-message--base[data-v-48be9d3e]  .t-chat-content{padding:%?24?% %?32?%;background-color:var(--td-bg-color-secondarycontainer,var(--td-gray-color-1,#f3f3f3));border-radius:0 var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px)}.t-chat-message--base.assistant[data-v-48be9d3e]  .t-chat-content{border-radius:0 var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px);background-color:initial;padding:0}.t-chat-message--base.user[data-v-48be9d3e]  .t-chat-content{border-radius:0 var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px)}.t-chat-message--base.left[data-v-48be9d3e]  .t-chat-content{border-radius:0 var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px)}.t-chat-message--base.right[data-v-48be9d3e]  .t-chat-content{border-radius:var(--td-radius-extraLarge,12px) 0 var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px)}.t-chat-message--outline[data-v-48be9d3e]  .t-chat-content{padding:%?24?% %?32?%;border:%?1?% solid var(--td-component-border,var(--td-gray-color-4,#dcdcdc));border-radius:0 var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px)}.t-chat-message--outline.assistant[data-v-48be9d3e]  .t-chat-content{border-radius:0 var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px)}.t-chat-message--outline.user[data-v-48be9d3e]  .t-chat-content{border-radius:0 var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px)}.t-chat-message--outline.left[data-v-48be9d3e]  .t-chat-content{border-radius:0 var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px)}.t-chat-message--outline.right[data-v-48be9d3e]  .t-chat-content{border-radius:var(--td-radius-extraLarge,12px) 0 var(--td-radius-extraLarge,12px) var(--td-radius-extraLarge,12px)}.t-chat-message--base.right[data-v-48be9d3e]  .t-attachments__scrollable,\n.t-chat-message--outline.right[data-v-48be9d3e]  .t-attachments__scrollable,\n.t-chat-message--text.right[data-v-48be9d3e]  .t-attachments__scrollable{justify-content:flex-end}.t-chat-message__actionbar[data-v-48be9d3e]{--chat-actionbar-padding:var(--td-spacer-1,12px) 0 0 0}.t-chat-message__actionbar[data-v-48be9d3e]:empty{display:none}",""]),a["default"]=o},85835:function(t,a,e){"use strict";e.r(a);var r=e(22093),s=e.n(r),n=e(12670),i=e.n(n),o=i()(s());o.push([t.id,".t-chat-thinking[data-v-e68e9aa0]{width:100%;box-sizing:border-box}.t-chat-thinking__inner--block[data-v-e68e9aa0]{background-color:var(--td-bg-color-page,var(--td-gray-color-1,#f3f3f3));border-radius:var(--td-radius-default,6px);padding:var(--td-spacer,8px) var(--td-spacer-1,12px)}.t-chat-thinking__inner--border[data-v-e68e9aa0]{padding:var(--td-spacer,8px) var(--td-spacer-1,12px)}.t-chat-thinking__hd[data-v-e68e9aa0]{height:%?48?%;overflow:hidden;display:flex;align-items:center}.t-chat-thinking__hd[data-v-e68e9aa0]  .t-chat-thinking__icon{font-size:var(--td-font-size-xl,20px)}.t-chat-thinking__hd[data-v-e68e9aa0]  .t-chat-thinking__icon--close{color:var(--td-text-color-secondary,var(--td-font-gray-2,rgba(0,0,0,.6)))}.t-chat-thinking__hd[data-v-e68e9aa0]  .t-chat-thinking__icon--complete,\n.t-chat-thinking__hd[data-v-e68e9aa0]  .t-chat-thinking__icon--stop{color:var(--td-success-color,var(--td-success-color-5,#2ba471))}.t-chat-thinking__hd[data-v-e68e9aa0]  .t-chat-thinking__icon--collapse{color:var(--td-text-color-secondary,var(--td-font-gray-2,rgba(0,0,0,.6)));transition:-webkit-transform .3s ease-in-out;transition:transform .3s ease-in-out;transition:transform .3s ease-in-out,-webkit-transform .3s ease-in-out}.t-chat-thinking__hd .t-chat-thinking__txt[data-v-e68e9aa0]{color:var(--td-text-color-primary,var(--td-font-gray-1,rgba(0,0,0,.9)));font-size:var(--td-font-size-base,14px);line-height:%?32?%;flex:1;margin-left:var(--td-spacer,8px)}.t-chat-thinking__bd[data-v-e68e9aa0]{color:var(--td-text-color-placeholder,var(--td-font-gray-3,rgba(0,0,0,.4)));font-size:var(--td-font-size-base,14px);line-height:170%;margin-top:var(--td-spacer-1,12px);white-space:pre-wrap;overflow-y:auto}.t-chat-thinking__bd--border[data-v-e68e9aa0]{border-left:%?4?% solid var(--td-component-stroke,var(--td-gray-color-3,#e7e7e7));padding-left:var(--td-spacer,8px)}@keyframes scale-data-v-e68e9aa0{0%{-webkit-transform:scale(1.333) translateY(-50%);transform:scale(1.333) translateY(-50%)}33%{-webkit-transform:scale(1.333) translateY(-50%);transform:scale(1.333) translateY(-50%)}34%{-webkit-transform:scale(1) translateY(-50%);transform:scale(1) translateY(-50%)}100%{-webkit-transform:scale(1) translateY(-50%);transform:scale(1) translateY(-50%)}}@-webkit-keyframes scale-data-v-e68e9aa0{0%{-webkit-transform:scale(1.333) translateY(-50%);transform:scale(1.333) translateY(-50%)}33%{-webkit-transform:scale(1.333) translateY(-50%);transform:scale(1.333) translateY(-50%)}34%{-webkit-transform:scale(1) translateY(-50%);transform:scale(1) translateY(-50%)}100%{-webkit-transform:scale(1) translateY(-50%);transform:scale(1) translateY(-50%)}}",""]),a["default"]=o}}]);